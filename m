Return-Path: <openrisc-bounces@lists.librecores.org>
X-Original-To: lists+openrisc@lfdr.de
Delivered-To: lists+openrisc@lfdr.de
Received: from mail.librecores.org (lists.librecores.org [88.198.125.70])
	by mail.lfdr.de (Postfix) with ESMTP id 7495835148B
	for <lists+openrisc@lfdr.de>; Thu,  1 Apr 2021 13:44:29 +0200 (CEST)
Received: from [172.31.1.100] (localhost.localdomain [127.0.0.1])
	by mail.librecores.org (Postfix) with ESMTP id 981E4212EB;
	Thu,  1 Apr 2021 13:44:27 +0200 (CEST)
Received: from mail.kernel.org (mail.kernel.org [198.145.29.99])
 by mail.librecores.org (Postfix) with ESMTPS id 448D121081
 for <openrisc@lists.librecores.org>; Wed, 31 Mar 2021 16:31:56 +0200 (CEST)
Received: by mail.kernel.org (Postfix) with ESMTPSA id AE45660FF1;
 Wed, 31 Mar 2021 14:31:44 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=kernel.org;
 s=k20201202; t=1617201114;
 bh=ZlgshpaCoA6zGi17OQe5KtXtUjgmxHsHhFE58+U5sOg=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=LFUJQ+P1xzQmaWQX8Swd0sEBGp6ODLnJGpzRzYpYmHK8ilk5c7PQAsgb4tqXDyJn4
 C8rYJIkzX5VwZ6DSngDJkzHCIPfe6zBDSfkXd3axY2xtONndhSnaMRJbEBI2nh3QN+
 FlBTndTouquw7fxhbY/3+9mmhXJHVVPYqIOz367B3GbxZJ9sD6fKUW6qcC0nc5Vmh7
 DsDqlI0e38DpWOpASf1pHsgfg2hPt7gwSaexx+iGLJVpymN7V8K6NzB6/pGOW4KqMG
 x6Sn6wZUrDToJQbAaynuurLgXGrc7YkieAd2kd5v4yOGIUWGWPDartHFmFTMyEvaSM
 05tSWZo4NrEww==
From: guoren@kernel.org
To: guoren@kernel.org
Date: Wed, 31 Mar 2021 14:30:32 +0000
Message-Id: <1617201040-83905-2-git-send-email-guoren@kernel.org>
X-Mailer: git-send-email 2.7.4
In-Reply-To: <1617201040-83905-1-git-send-email-guoren@kernel.org>
References: <1617201040-83905-1-git-send-email-guoren@kernel.org>
X-Mailman-Approved-At: Thu, 01 Apr 2021 13:44:25 +0200
Subject: [OpenRISC] [PATCH v6 1/9] locking/qspinlock: Add
 ARCH_USE_QUEUED_SPINLOCKS_XCHG32
X-BeenThere: openrisc@lists.librecores.org
X-Mailman-Version: 2.1.26
Precedence: list
List-Id: Discussion around the OpenRISC processor
 <openrisc.lists.librecores.org>
List-Unsubscribe: <https://lists.librecores.org/options/openrisc>,
 <mailto:openrisc-request@lists.librecores.org?subject=unsubscribe>
List-Archive: <http://lists.librecores.org/pipermail/openrisc/>
List-Post: <mailto:openrisc@lists.librecores.org>
List-Help: <mailto:openrisc-request@lists.librecores.org?subject=help>
List-Subscribe: <https://lists.librecores.org/listinfo/openrisc>,
 <mailto:openrisc-request@lists.librecores.org?subject=subscribe>
Cc: linux-arch@vger.kernel.org, linux-xtensa@linux-xtensa.org,
 Guo Ren <guoren@linux.alibaba.com>, Arnd Bergmann <arnd@arndb.de>,
 Peter Zijlstra <peterz@infradead.org>, Will Deacon <will@kernel.org>,
 linux-kernel@vger.kernel.org, linux-csky@vger.kernel.org,
 openrisc@lists.librecores.org, Anup Patel <anup@brainfault.org>,
 sparclinux@vger.kernel.org, Waiman Long <longman@redhat.com>,
 linux-riscv@lists.infradead.org, linuxppc-dev@lists.ozlabs.org,
 Ingo Molnar <mingo@redhat.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: openrisc-bounces@lists.librecores.org
Sender: "OpenRISC" <openrisc-bounces@lists.librecores.org>

RnJvbTogR3VvIFJlbiA8Z3VvcmVuQGxpbnV4LmFsaWJhYmEuY29tPgoKU29tZSBhcmNoaXRlY3R1
cmVzIGRvbid0IGhhdmUgc3ViLXdvcmQgc3dhcCBhdG9taWMgaW5zdHJ1Y3Rpb24sCnRoZXkgb25s
eSBoYXZlIHRoZSBmdWxsIHdvcmQncyBvbmUuCgpUaGUgc3ViLXdvcmQgc3dhcCBvbmx5IGltcHJv
dmUgdGhlIHBlcmZvcm1hbmNlIHdoZW46Ck5SX0NQVVMgPCAxNksKICogIDAtIDc6IGxvY2tlZCBi
eXRlCiAqICAgICA4OiBwZW5kaW5nCiAqICA5LTE1OiBub3QgdXNlZAogKiAxNi0xNzogdGFpbCBp
bmRleAogKiAxOC0zMTogdGFpbCBjcHUgKCsxKQoKVGhlIDktMTUgYml0cyBhcmUgd2FzdGVkIHRv
IHVzZSB4Y2hnMTYgaW4geGNoZ190YWlsLgoKUGxlYXNlIGxldCBhcmNoaXRlY3R1cmUgc2VsZWN0
IHhjaGcxNi94Y2hnMzIgdG8gaW1wbGVtZW50CnhjaGdfdGFpbC4KClNpZ25lZC1vZmYtYnk6IEd1
byBSZW4gPGd1b3JlbkBsaW51eC5hbGliYWJhLmNvbT4KQ2M6IFBldGVyIFppamxzdHJhIDxwZXRl
cnpAaW5mcmFkZWFkLm9yZz4KQ2M6IFdpbGwgRGVhY29uIDx3aWxsQGtlcm5lbC5vcmc+CkNjOiBJ
bmdvIE1vbG5hciA8bWluZ29AcmVkaGF0LmNvbT4KQ2M6IFdhaW1hbiBMb25nIDxsb25nbWFuQHJl
ZGhhdC5jb20+CkNjOiBBcm5kIEJlcmdtYW5uIDxhcm5kQGFybmRiLmRlPgpDYzogQW51cCBQYXRl
bCA8YW51cEBicmFpbmZhdWx0Lm9yZz4KLS0tCiBrZXJuZWwvS2NvbmZpZy5sb2NrcyAgICAgICB8
ICAzICsrKwoga2VybmVsL2xvY2tpbmcvcXNwaW5sb2NrLmMgfCA0NiArKysrKysrKysrKysrKysr
KysrKystLS0tLS0tLS0tLS0tLS0tLQogMiBmaWxlcyBjaGFuZ2VkLCAyOCBpbnNlcnRpb25zKCsp
LCAyMSBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9rZXJuZWwvS2NvbmZpZy5sb2NrcyBiL2tl
cm5lbC9LY29uZmlnLmxvY2tzCmluZGV4IDNkZThmZDExODczYi4uZDAyZjEyNjFmNzNmIDEwMDY0
NAotLS0gYS9rZXJuZWwvS2NvbmZpZy5sb2NrcworKysgYi9rZXJuZWwvS2NvbmZpZy5sb2NrcwpA
QCAtMjM5LDYgKzIzOSw5IEBAIGNvbmZpZyBMT0NLX1NQSU5fT05fT1dORVIKIGNvbmZpZyBBUkNI
X1VTRV9RVUVVRURfU1BJTkxPQ0tTCiAJYm9vbAogCitjb25maWcgQVJDSF9VU0VfUVVFVUVEX1NQ
SU5MT0NLU19YQ0hHMzIKKwlib29sCisKIGNvbmZpZyBRVUVVRURfU1BJTkxPQ0tTCiAJZGVmX2Jv
b2wgeSBpZiBBUkNIX1VTRV9RVUVVRURfU1BJTkxPQ0tTCiAJZGVwZW5kcyBvbiBTTVAKZGlmZiAt
LWdpdCBhL2tlcm5lbC9sb2NraW5nL3FzcGlubG9jay5jIGIva2VybmVsL2xvY2tpbmcvcXNwaW5s
b2NrLmMKaW5kZXggY2JmZjZiYTUzZDU2Li40YmZhYTk2OWJkMTUgMTAwNjQ0Ci0tLSBhL2tlcm5l
bC9sb2NraW5nL3FzcGlubG9jay5jCisrKyBiL2tlcm5lbC9sb2NraW5nL3FzcGlubG9jay5jCkBA
IC0xNjMsMjYgKzE2Myw2IEBAIHN0YXRpYyBfX2Fsd2F5c19pbmxpbmUgdm9pZCBjbGVhcl9wZW5k
aW5nX3NldF9sb2NrZWQoc3RydWN0IHFzcGlubG9jayAqbG9jaykKIAlXUklURV9PTkNFKGxvY2st
PmxvY2tlZF9wZW5kaW5nLCBfUV9MT0NLRURfVkFMKTsKIH0KIAotLyoKLSAqIHhjaGdfdGFpbCAt
IFB1dCBpbiB0aGUgbmV3IHF1ZXVlIHRhaWwgY29kZSB3b3JkICYgcmV0cmlldmUgcHJldmlvdXMg
b25lCi0gKiBAbG9jayA6IFBvaW50ZXIgdG8gcXVldWVkIHNwaW5sb2NrIHN0cnVjdHVyZQotICog
QHRhaWwgOiBUaGUgbmV3IHF1ZXVlIHRhaWwgY29kZSB3b3JkCi0gKiBSZXR1cm46IFRoZSBwcmV2
aW91cyBxdWV1ZSB0YWlsIGNvZGUgd29yZAotICoKLSAqIHhjaGcobG9jaywgdGFpbCksIHdoaWNo
IGhlYWRzIGFuIGFkZHJlc3MgZGVwZW5kZW5jeQotICoKLSAqIHAsKiwqIC0+IG4sKiwqIDsgcHJl
diA9IHhjaGcobG9jaywgbm9kZSkKLSAqLwotc3RhdGljIF9fYWx3YXlzX2lubGluZSB1MzIgeGNo
Z190YWlsKHN0cnVjdCBxc3BpbmxvY2sgKmxvY2ssIHUzMiB0YWlsKQotewotCS8qCi0JICogV2Ug
Y2FuIHVzZSByZWxheGVkIHNlbWFudGljcyBzaW5jZSB0aGUgY2FsbGVyIGVuc3VyZXMgdGhhdCB0
aGUKLQkgKiBNQ1Mgbm9kZSBpcyBwcm9wZXJseSBpbml0aWFsaXplZCBiZWZvcmUgdXBkYXRpbmcg
dGhlIHRhaWwuCi0JICovCi0JcmV0dXJuICh1MzIpeGNoZ19yZWxheGVkKCZsb2NrLT50YWlsLAot
CQkJCSB0YWlsID4+IF9RX1RBSUxfT0ZGU0VUKSA8PCBfUV9UQUlMX09GRlNFVDsKLX0KLQogI2Vs
c2UgLyogX1FfUEVORElOR19CSVRTID09IDggKi8KIAogLyoqCkBAIC0yMDYsNiArMTg2LDMwIEBA
IHN0YXRpYyBfX2Fsd2F5c19pbmxpbmUgdm9pZCBjbGVhcl9wZW5kaW5nX3NldF9sb2NrZWQoc3Ry
dWN0IHFzcGlubG9jayAqbG9jaykKIHsKIAlhdG9taWNfYWRkKC1fUV9QRU5ESU5HX1ZBTCArIF9R
X0xPQ0tFRF9WQUwsICZsb2NrLT52YWwpOwogfQorI2VuZGlmIC8qIF9RX1BFTkRJTkdfQklUUyA9
PSA4ICovCisKKyNpZiBfUV9QRU5ESU5HX0JJVFMgPT0gOCAmJiAhZGVmaW5lZChDT05GSUdfQVJD
SF9VU0VfUVVFVUVEX1NQSU5MT0NLU19YQ0hHMzIpCisvKgorICogeGNoZ190YWlsIC0gUHV0IGlu
IHRoZSBuZXcgcXVldWUgdGFpbCBjb2RlIHdvcmQgJiByZXRyaWV2ZSBwcmV2aW91cyBvbmUKKyAq
IEBsb2NrIDogUG9pbnRlciB0byBxdWV1ZWQgc3BpbmxvY2sgc3RydWN0dXJlCisgKiBAdGFpbCA6
IFRoZSBuZXcgcXVldWUgdGFpbCBjb2RlIHdvcmQKKyAqIFJldHVybjogVGhlIHByZXZpb3VzIHF1
ZXVlIHRhaWwgY29kZSB3b3JkCisgKgorICogeGNoZyhsb2NrLCB0YWlsKSwgd2hpY2ggaGVhZHMg
YW4gYWRkcmVzcyBkZXBlbmRlbmN5CisgKgorICogcCwqLCogLT4gbiwqLCogOyBwcmV2ID0geGNo
Zyhsb2NrLCBub2RlKQorICovCitzdGF0aWMgX19hbHdheXNfaW5saW5lIHUzMiB4Y2hnX3RhaWwo
c3RydWN0IHFzcGlubG9jayAqbG9jaywgdTMyIHRhaWwpCit7CisJLyoKKwkgKiBXZSBjYW4gdXNl
IHJlbGF4ZWQgc2VtYW50aWNzIHNpbmNlIHRoZSBjYWxsZXIgZW5zdXJlcyB0aGF0IHRoZQorCSAq
IE1DUyBub2RlIGlzIHByb3Blcmx5IGluaXRpYWxpemVkIGJlZm9yZSB1cGRhdGluZyB0aGUgdGFp
bC4KKwkgKi8KKwlyZXR1cm4gKHUzMil4Y2hnX3JlbGF4ZWQoJmxvY2stPnRhaWwsCisJCQkJIHRh
aWwgPj4gX1FfVEFJTF9PRkZTRVQpIDw8IF9RX1RBSUxfT0ZGU0VUOworfQorCisjZWxzZQogCiAv
KioKICAqIHhjaGdfdGFpbCAtIFB1dCBpbiB0aGUgbmV3IHF1ZXVlIHRhaWwgY29kZSB3b3JkICYg
cmV0cmlldmUgcHJldmlvdXMgb25lCkBAIC0yMzYsNyArMjQwLDcgQEAgc3RhdGljIF9fYWx3YXlz
X2lubGluZSB1MzIgeGNoZ190YWlsKHN0cnVjdCBxc3BpbmxvY2sgKmxvY2ssIHUzMiB0YWlsKQog
CX0KIAlyZXR1cm4gb2xkOwogfQotI2VuZGlmIC8qIF9RX1BFTkRJTkdfQklUUyA9PSA4ICovCisj
ZW5kaWYKIAogLyoqCiAgKiBxdWV1ZWRfZmV0Y2hfc2V0X3BlbmRpbmdfYWNxdWlyZSAtIGZldGNo
IHRoZSB3aG9sZSBsb2NrIHZhbHVlIGFuZCBzZXQgcGVuZGluZwotLSAKMi4xNy4xCgpfX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpPcGVuUklTQyBtYWlsaW5n
IGxpc3QKT3BlblJJU0NAbGlzdHMubGlicmVjb3Jlcy5vcmcKaHR0cHM6Ly9saXN0cy5saWJyZWNv
cmVzLm9yZy9saXN0aW5mby9vcGVucmlzYwo=
