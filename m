Return-Path: <openrisc-bounces@lists.librecores.org>
X-Original-To: lists+openrisc@lfdr.de
Delivered-To: lists+openrisc@lfdr.de
Received: from mail.librecores.org (lists.librecores.org [88.198.125.70])
	by mail.lfdr.de (Postfix) with ESMTP id 9EB7B408B50
	for <lists+openrisc@lfdr.de>; Mon, 13 Sep 2021 14:48:38 +0200 (CEST)
Received: from [172.31.1.100] (localhost.localdomain [127.0.0.1])
	by mail.librecores.org (Postfix) with ESMTP id 789A12417F;
	Mon, 13 Sep 2021 14:48:38 +0200 (CEST)
Received: from mail-pl1-f170.google.com (mail-pl1-f170.google.com
 [209.85.214.170])
 by mail.librecores.org (Postfix) with ESMTPS id 7CC4021016
 for <openrisc@lists.librecores.org>; Mon, 13 Sep 2021 14:48:36 +0200 (CEST)
Received: by mail-pl1-f170.google.com with SMTP id d17so5719347plr.12
 for <openrisc@lists.librecores.org>; Mon, 13 Sep 2021 05:48:36 -0700 (PDT)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=AsP9uJUgyeFrspfZA3DDueQiVkw6XY3vkHFNeq5ZggM=;
 b=LGy6tNu15VDtuA4HNIJ6gJ/QTHra75yEdw6bAK7FlJULcNXiGtFZAKkGXR7qXEj0Wn
 uSZq76lKO5BkOdXvUP01aVWa6mpueyE/ax0CsG1dBzxhLK5lIdX0PzJzLmt+fVQPVzCU
 czrwAbHB+p6A3wRaOWxruTK5SPRXiTHzHgdG+KFagZrS7E57GbE2LxeSDFIToJVVbshn
 bcsONe/wwbsdr3WFbdUIUZB429iassrip+OV3J2/G9dpJfXhURGXlp/HUcxJhrfa8qKb
 kez+cbYCbXyvhuEGoUWip6DuwraLH+lM2s3nQkXfCRYNChG2pNhxs2q330fx9CLFpz+4
 svIw==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20210112;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=AsP9uJUgyeFrspfZA3DDueQiVkw6XY3vkHFNeq5ZggM=;
 b=iVuZsy18j3IfVcqn0CLuiiE7F59ZvJor8a4WHm7NliwBUArOadXyYQBTcpNZbG9GBm
 CU5OuzbovSEnybDYByqaYzq9ATXQh7IuCg1+6d/M21cf+XkRqaogvBpFH0+Yn91DFqRj
 iz0OXrAOZHoa/sJbm1A0B3Tyt0uKrGL9inlT+USgszCpDc2wRadz0z7HHjsru4q1I5ri
 4Opn1QgGv7W1Ir/NEI/Grn30JTpt4heqzXiFfqskBZC6qxSYXolh/9v5auXdp7Wv9lKM
 HEZHXPd9ItIthNpNd0dyLs1Ho56ri+5aj7IluSbxmwkogyiEia1kQVomv+4NCuOnw/gs
 S0Ig==
X-Gm-Message-State: AOAM533qkFxc3kQu2ircmptCeQIwVJoyseEO5jtJS68gRatWa02sqPQz
 xiHNV/PB4waacWaIJrEBnKNwbopi76w=
X-Google-Smtp-Source: ABdhPJwnQ54NBX1LuVRRocZyaaMcYlocklAGWhGs3kuqrzqECDiKNlS5DR4ly0JuHpMFSoXkqg45Dw==
X-Received: by 2002:a17:90a:a389:: with SMTP id
 x9mr12646476pjp.167.1631537315038; 
 Mon, 13 Sep 2021 05:48:35 -0700 (PDT)
Received: from localhost (g245.61-45-50.ppp.wakwak.ne.jp. [61.45.50.245])
 by smtp.gmail.com with ESMTPSA id a71sm7293776pfd.86.2021.09.13.05.48.34
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Mon, 13 Sep 2021 05:48:34 -0700 (PDT)
From: Stafford Horne <shorne@gmail.com>
To: GDB patches <gdb-patches@sourceware.org>
Date: Mon, 13 Sep 2021 21:47:59 +0900
Message-Id: <20210913124800.471680-5-shorne@gmail.com>
X-Mailer: git-send-email 2.31.1
In-Reply-To: <20210913124800.471680-1-shorne@gmail.com>
References: <20210913124800.471680-1-shorne@gmail.com>
MIME-Version: 1.0
Subject: [OpenRISC] [PATCH 4/5] gdb: or1k: add native linux support
X-BeenThere: openrisc@lists.librecores.org
X-Mailman-Version: 2.1.26
Precedence: list
List-Id: Discussion around the OpenRISC processor
 <openrisc.lists.librecores.org>
List-Unsubscribe: <https://lists.librecores.org/options/openrisc>,
 <mailto:openrisc-request@lists.librecores.org?subject=unsubscribe>
List-Archive: <http://lists.librecores.org/pipermail/openrisc/>
List-Post: <mailto:openrisc@lists.librecores.org>
List-Help: <mailto:openrisc-request@lists.librecores.org?subject=help>
List-Subscribe: <https://lists.librecores.org/listinfo/openrisc>,
 <mailto:openrisc-request@lists.librecores.org?subject=subscribe>
Cc: Openrisc <openrisc@lists.librecores.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: openrisc-bounces@lists.librecores.org
Sender: "OpenRISC" <openrisc-bounces@lists.librecores.org>

VGhpcyBwYXRjaCBhZGRzIHN1cHBvcnQgZm9yIHJ1bm5pbmcgZ2RiIG5hdGl2ZWx5IG9uIE9wZW5S
SVNDIGxpbnV4LgpEZWJ1Z2dpbmcgc3VwcG9ydCBpcyBwcm92aWRlZCB2aWEgdGhlIGxpbnV4IFBU
UkFDRSBpbnRlcmZhY2Ugd2hpY2ggaXMKbW9zdGx5IGhhbmRsZWQgYnkgR0RCIGdlbnJpYyBjb2Rl
LiAgVGhpcyBwYXRjaCBwcm92aWRlcyB0aGUgbG9naWMgb2YgaG93CnRvIHJlYWQgYW5kIHdyaXRl
IHRoZSBwdHJhY2UgcmVnaXN0ZXJzIGJldHdlZW4gbGludXggYW5kIEdEQi4KClNpbmdsZSBzdGVw
cGluZyBpcyBwcml2aWRlZCBpbiBhIHNlcGFyYXRlIHBhdGNoLgotLS0KIGdkYi9NYWtlZmlsZS5p
biAgICAgICB8ICAgMiArCiBnZGIvY29uZmlndXJlLmhvc3QgICAgfCAgIDIgKwogZ2RiL2NvbmZp
Z3VyZS5uYXQgICAgIHwgICA0ICsKIGdkYi9vcjFrLWxpbnV4LW5hdC5jICB8IDIxMCArKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysKIGdkYi9vcjFrLWxpbnV4LXRkZXAu
YyB8ICAgNSArCiBnZGIvb3Ixay1saW51eC10ZGVwLmggfCAgMjYgKysrKysrCiA2IGZpbGVzIGNo
YW5nZWQsIDI0OSBpbnNlcnRpb25zKCspCiBjcmVhdGUgbW9kZSAxMDA2NDQgZ2RiL29yMWstbGlu
dXgtbmF0LmMKIGNyZWF0ZSBtb2RlIDEwMDY0NCBnZGIvb3Ixay1saW51eC10ZGVwLmgKCmRpZmYg
LS1naXQgYS9nZGIvTWFrZWZpbGUuaW4gYi9nZGIvTWFrZWZpbGUuaW4KaW5kZXggMzIwZDMzMjZh
ODEuLjY5Y2MxNDAyNTk0IDEwMDY0NAotLS0gYS9nZGIvTWFrZWZpbGUuaW4KKysrIGIvZ2RiL01h
a2VmaWxlLmluCkBAIC0xMzc3LDYgKzEzNzcsNyBAQCBIRklMRVNfTk9fU1JDRElSID0gXAogCW9i
amZpbGVzLmggXAogCW9ic2QtbmF0LmggXAogCW9ic2QtdGRlcC5oIFwKKwlvcjFrLWxpbnV4LXRk
ZXAuaCBcCiAJb3NhYmkuaCBcCiAJb3NkYXRhLmggXAogCXAtbGFuZy5oIFwKQEAgLTIyNDcsNiAr
MjI0OCw3IEBAIEFMTERFUEZJTEVTID0gXAogCW5pb3MyLXRkZXAuYyBcCiAJb2JzZC1uYXQuYyBc
CiAJb2JzZC10ZGVwLmMgXAorCW9yMWstbGludXgtbmF0LmMgXAogCXBvc2l4LWhkZXAuYyBcCiAJ
cHBjLWZic2QtbmF0LmMgXAogCXBwYy1mYnNkLXRkZXAuYyBcCmRpZmYgLS1naXQgYS9nZGIvY29u
ZmlndXJlLmhvc3QgYi9nZGIvY29uZmlndXJlLmhvc3QKaW5kZXggMWZjODM2MDFlMGUuLmJlNDBj
YzgxNGZjIDEwMDY0NAotLS0gYS9nZGIvY29uZmlndXJlLmhvc3QKKysrIGIvZ2RiL2NvbmZpZ3Vy
ZS5ob3N0CkBAIC0xMzAsNiArMTMwLDggQEAgbWlwcyotKi1uZXRic2Rhb3V0KiB8IG1pcHMqLSot
a25ldGJzZCotZ251KQogbWlwcyotKi1mcmVlYnNkKikJZ2RiX2hvc3Q9ZmJzZCA7OwogbWlwczY0
Ki0qLW9wZW5ic2QqKQlnZGJfaG9zdD1vYnNkNjQgOzsKIAorb3Ixay0qLWxpbnV4KikJCWdkYl9o
b3N0PWxpbnV4IDs7CisKIHBvd2VycGMtKi1haXgqIHwgcnM2MDAwLSotKiB8IHBvd2VycGM2NC0q
LWFpeCopCiAJCQlnZGJfaG9zdD1haXggOzsKIHBvd2VycGMqLSotZnJlZWJzZCopCWdkYl9ob3N0
PWZic2QgOzsKZGlmZiAtLWdpdCBhL2dkYi9jb25maWd1cmUubmF0IGIvZ2RiL2NvbmZpZ3VyZS5u
YXQKaW5kZXggNjU1Yzc1ZGQxYWIuLmQ0MmNmMTNlNjkxIDEwMDY0NAotLS0gYS9nZGIvY29uZmln
dXJlLm5hdAorKysgYi9nZGIvY29uZmlndXJlLm5hdApAQCAtMjcxLDYgKzI3MSwxMCBAQCBjYXNl
ICR7Z2RiX2hvc3R9IGluCiAJCU5BVERFUEZJTEVTPSIke05BVERFUEZJTEVTfSBsaW51eC1uYXQt
dHJhZC5vIFwKIAkJbWlwcy1saW51eC1uYXQubyBuYXQvbWlwcy1saW51eC13YXRjaC5vIgogCQk7
OworCSAgICBvcjFrKQorCQkjIEhvc3Q6IExpbnV4L09wZW5SSVNDCisJCU5BVERFUEZJTEVTPSIk
e05BVERFUEZJTEVTfSBvcjFrLWxpbnV4LW5hdC5vIgorCQk7OwogCSAgICBwYSkKIAkJIyBIb3N0
OiBIZXdsZXR0LVBhY2thcmQgUEEtUklTQyBtYWNoaW5lLCBydW5uaW5nIExpbnV4CiAJCU5BVERF
UEZJTEVTPSIke05BVERFUEZJTEVTfSBocHBhLWxpbnV4LW5hdC5vIgpkaWZmIC0tZ2l0IGEvZ2Ri
L29yMWstbGludXgtbmF0LmMgYi9nZGIvb3Ixay1saW51eC1uYXQuYwpuZXcgZmlsZSBtb2RlIDEw
MDY0NAppbmRleCAwMDAwMDAwMDAwMC4uMWRhZmE5MjI0NjIKLS0tIC9kZXYvbnVsbAorKysgYi9n
ZGIvb3Ixay1saW51eC1uYXQuYwpAQCAtMCwwICsxLDIxMCBAQAorLyogTmF0aXZlLWRlcGVuZGVu
dCBjb2RlIGZvciBHTlUvTGludXggT3BlblJJU0MuCisgICBDb3B5cmlnaHQgKEMpIDIwMjEgRnJl
ZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBJbmMuCisKKyAgIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIEdE
Qi4KKworICAgVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmli
dXRlIGl0IGFuZC9vciBtb2RpZnkKKyAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdl
bmVyYWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5CisgICB0aGUgRnJlZSBTb2Z0d2Fy
ZSBGb3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvcgorICAgKGF0
IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KKworICAgVGhpcyBwcm9ncmFtIGlzIGRp
c3RyaWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCisgICBidXQgV0lU
SE9VVCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgor
ICAgTUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAg
U2VlIHRoZQorICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy4K
KworICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwg
UHVibGljIExpY2Vuc2UKKyAgIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUg
PGh0dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LiAgKi8KKworI2luY2x1ZGUgImRlZnMuaCIK
KyNpbmNsdWRlICJyZWdjYWNoZS5oIgorI2luY2x1ZGUgImdyZWdzZXQuaCIKKyNpbmNsdWRlICJs
aW51eC1uYXQuaCIKKyNpbmNsdWRlICJvcjFrLXRkZXAuaCIKKyNpbmNsdWRlICJvcjFrLWxpbnV4
LXRkZXAuaCIKKyNpbmNsdWRlICJpbmZlcmlvci5oIgorCisjaW5jbHVkZSAiZWxmL2NvbW1vbi5o
IgorCisjaW5jbHVkZSA8c3lzL3B0cmFjZS5oPgorCisvKiBPcGVuUklTQyBMaW51eCBuYXRpdmUg
YWRkaXRpb25zIHRvIHRoZSBkZWZhdWx0IGxpbnV4IHN1cHBvcnQuICAqLworCitjbGFzcyBvcjFr
X2xpbnV4X25hdF90YXJnZXQgZmluYWwgOiBwdWJsaWMgbGludXhfbmF0X3RhcmdldAoreworcHVi
bGljOgorICAvKiBBZGQgb3VyIHJlZ2lzdGVyIGFjY2VzcyBtZXRob2RzLiAgKi8KKyAgdm9pZCBm
ZXRjaF9yZWdpc3RlcnMgKHN0cnVjdCByZWdjYWNoZSAqcmVnY2FjaGUsIGludCByZWdudW0pIG92
ZXJyaWRlOworICB2b2lkIHN0b3JlX3JlZ2lzdGVycyAoc3RydWN0IHJlZ2NhY2hlICpyZWdjYWNo
ZSwgaW50IHJlZ251bSkgb3ZlcnJpZGU7CisKKyAgLyogUmVhZCBzdWl0YWJsZSB0YXJnZXQgZGVz
Y3JpcHRpb24uICAqLworICBjb25zdCBzdHJ1Y3QgdGFyZ2V0X2Rlc2MgKnJlYWRfZGVzY3JpcHRp
b24gKCkgb3ZlcnJpZGU7Cit9OworCitzdGF0aWMgb3Ixa19saW51eF9uYXRfdGFyZ2V0IHRoZV9v
cjFrX2xpbnV4X25hdF90YXJnZXQ7CisKKy8qIENvcHkgZ2VuZXJhbCBwdXJwb3NlIHJlZ2lzdGVy
IFJFR05VTSAob3IgYWxsIGdwIHJlZ3MgaWYgUkVHTlVNID09IC0xKQorICAgZnJvbSByZWdzZXQg
R1JFR1MgaW50byBSRUdDQUNIRS4gICovCisKK3N0YXRpYyB2b2lkCitzdXBwbHlfZ3JlZ3NldF9y
ZWdudW0gKHN0cnVjdCByZWdjYWNoZSAqcmVnY2FjaGUsIGNvbnN0IHByZ3JlZ3NldF90ICpncmVn
cywKKwkJICAgICAgIGludCByZWdudW0pCit7CisgIGludCBpOworICBjb25zdCBlbGZfZ3JlZ190
ICpyZWdwID0gKmdyZWdzOworCisgIC8qIEFjY2VzcyBhbGwgcmVnaXN0ZXJzICovCisgIGlmIChy
ZWdudW0gPT0gLTEpCisgICAgeworICAgICAgLyogV2UgZmlsbCB0aGUgZ2VuZXJhbCBwdXJwb3Nl
IHJlZ2lzdGVycy4gICovCisgICAgICBmb3IgKGkgPSBPUjFLX1pFUk9fUkVHTlVNICsgMTsgaSA8
IE9SMUtfTUFYX0dQUl9SRUdTOyBpKyspCisJcmVnY2FjaGUtPnJhd19zdXBwbHkgKGksIHJlZ3Ag
KyBpKTsKKworICAgICAgLyogU3VwcGx5IE9SMUtfTlBDX1JFR05VTSBmcm9tIGluZGV4IDMyLiAg
Ki8KKyAgICAgIHJlZ2NhY2hlLT5yYXdfc3VwcGx5IChPUjFLX05QQ19SRUdOVU0sIHJlZ3AgKyAz
Mik7CisKKyAgICAgIC8qIEZpbGwgdGhlIGluYWNjZXNzaWJsZSB6ZXJvIHJlZ2lzdGVyIHdpdGgg
emVyby4gICovCisgICAgICByZWdjYWNoZS0+cmF3X3N1cHBseV96ZXJvZWQgKDApOworICAgIH0K
KyAgZWxzZSBpZiAocmVnbnVtID09IE9SMUtfWkVST19SRUdOVU0pCisgICAgcmVnY2FjaGUtPnJh
d19zdXBwbHlfemVyb2VkICgwKTsKKyAgZWxzZSBpZiAocmVnbnVtID09IE9SMUtfTlBDX1JFR05V
TSkKKyAgICByZWdjYWNoZS0+cmF3X3N1cHBseSAoT1IxS19OUENfUkVHTlVNLCByZWdwICsgMzIp
OworICBlbHNlIGlmIChyZWdudW0gPiBPUjFLX1pFUk9fUkVHTlVNICYmIHJlZ251bSA8IE9SMUtf
TUFYX0dQUl9SRUdTKQorICAgIHJlZ2NhY2hlLT5yYXdfc3VwcGx5IChyZWdudW0sIHJlZ3AgKyBy
ZWdudW0pOworfQorCisvKiBDb3B5IGFsbCBnZW5lcmFsIHB1cnBvc2UgcmVnaXN0ZXJzIGZyb20g
cmVnc2V0IEdSRUdTIGludG8gUkVHQ0FDSEUuICAqLworCit2b2lkCitzdXBwbHlfZ3JlZ3NldCAo
c3RydWN0IHJlZ2NhY2hlICpyZWdjYWNoZSwgY29uc3QgcHJncmVnc2V0X3QgKmdyZWdzKQorewor
ICBzdXBwbHlfZ3JlZ3NldF9yZWdudW0gKHJlZ2NhY2hlLCBncmVncywgLTEpOworfQorCisvKiBD
b3B5IGdlbmVyYWwgcHVycG9zZSByZWdpc3RlciBSRUdOVU0gKG9yIGFsbCBncCByZWdzIGlmIFJF
R05VTSA9PSAtMSkKKyAgIGZyb20gUkVHQ0FDSEUgaW50byByZWdzZXQgR1JFR1MuICAqLworCit2
b2lkCitmaWxsX2dyZWdzZXQgKGNvbnN0IHN0cnVjdCByZWdjYWNoZSAqcmVnY2FjaGUsIHByZ3Jl
Z3NldF90ICpncmVncywgaW50IHJlZ251bSkKK3sKKyAgZWxmX2dyZWdfdCAqcmVncCA9ICpncmVn
czsKKworICBpZiAocmVnbnVtID09IC0xKQorICAgIHsKKyAgICAgIC8qIFdlIGZpbGwgdGhlIGdl
bmVyYWwgcHVycG9zZSByZWdpc3RlcnMuICAqLworICAgICAgZm9yIChpbnQgaSA9IE9SMUtfWkVS
T19SRUdOVU0gKyAxOyBpIDwgT1IxS19NQVhfR1BSX1JFR1M7IGkrKykKKwlyZWdjYWNoZS0+cmF3
X2NvbGxlY3QgKGksIHJlZ3AgKyBpKTsKKworICAgICAgcmVnY2FjaGUtPnJhd19jb2xsZWN0IChP
UjFLX05QQ19SRUdOVU0sIHJlZ3AgKyAzMik7CisgICAgfQorICBlbHNlIGlmIChyZWdudW0gPT0g
T1IxS19aRVJPX1JFR05VTSkKKyAgICAvKiBOb3RoaW5nIHRvIGRvIGhlcmUuICAqLworICAgIDsK
KyAgZWxzZSBpZiAocmVnbnVtID4gT1IxS19aRVJPX1JFR05VTSAmJiByZWdudW0gPCBPUjFLX01B
WF9HUFJfUkVHUykKKyAgICByZWdjYWNoZS0+cmF3X2NvbGxlY3QgKHJlZ251bSwgcmVncCArIHJl
Z251bSk7CisgIGVsc2UgaWYgKHJlZ251bSA9PSBPUjFLX05QQ19SRUdOVU0pCisgICAgcmVnY2Fj
aGUtPnJhd19jb2xsZWN0IChPUjFLX05QQ19SRUdOVU0sIHJlZ3AgKyAzMik7Cit9CisKKy8qIFRy
YW5zZmVyaW5nIGZsb2F0aW5nLXBvaW50IHJlZ2lzdGVycyBiZXR3ZWVuIEdEQiwgaW5mZXJpb3Jz
IGFuZCBjb3Jlcy4KKyAgIFNpbmNlIE9wZW5SSVNDIGZsb2F0aW5nLXBvaW50IHJlZ2lzdGVycyBh
cmUgdGhlIHNhbWUgYXMgR1BScyB0aGVzZSBkbworICAgbm90aGluZy4gICovCisKK3ZvaWQKK3N1
cHBseV9mcHJlZ3NldCAoc3RydWN0IHJlZ2NhY2hlICpyZWdjYWNoZSwgY29uc3QgZ2RiX2ZwcmVn
c2V0X3QgKmZwcmVncykKK3sKK30KKwordm9pZAorZmlsbF9mcHJlZ3NldCAoY29uc3Qgc3RydWN0
IHJlZ2NhY2hlICpyZWdjYWNoZSwKKwkgICAgICAgZ2RiX2ZwcmVnc2V0X3QgKmZwcmVncywgaW50
IHJlZ25vKQoreworfQorCisvKiBSZXR1cm4gYSB0YXJnZXQgZGVzY3JpcHRpb24gZm9yIHRoZSBj
dXJyZW50IHRhcmdldC4gICovCisKK2NvbnN0IHN0cnVjdCB0YXJnZXRfZGVzYyAqCitvcjFrX2xp
bnV4X25hdF90YXJnZXQ6OnJlYWRfZGVzY3JpcHRpb24gKCkKK3sKKyAgcmV0dXJuIHRkZXNjX29y
MWtfbGludXg7Cit9CisKKy8qIEZldGNoIFJFR05VTSAob3IgYWxsIHJlZ2lzdGVycyBpZiBSRUdO
VU0gPT0gLTEpIGZyb20gdGhlIHRhcmdldAorICAgaW50byBSRUdDQUNIRSB1c2luZyBQVFJBQ0Vf
R0VUUkVHU0VULiAgKi8KKwordm9pZAorb3Ixa19saW51eF9uYXRfdGFyZ2V0OjpmZXRjaF9yZWdp
c3RlcnMgKHN0cnVjdCByZWdjYWNoZSAqcmVnY2FjaGUsIGludCByZWdudW0pCit7CisgIGludCB0
aWQ7CisKKyAgdGlkID0gZ2V0X3B0cmFjZV9waWQgKHJlZ2NhY2hlLT5wdGlkKCkpOworCisgIGlm
ICgocmVnbnVtID49IE9SMUtfWkVST19SRUdOVU0gJiYgcmVnbnVtIDwgT1IxS19NQVhfR1BSX1JF
R1MpCisgICAgICB8fCAocmVnbnVtID09IE9SMUtfTlBDX1JFR05VTSkKKyAgICAgIHx8IChyZWdu
dW0gPT0gLTEpKQorICAgIHsKKyAgICAgIHN0cnVjdCBpb3ZlYyBpb3Y7CisgICAgICBlbGZfZ3Jl
Z3NldF90IHJlZ3M7CisKKyAgICAgIGlvdi5pb3ZfYmFzZSA9ICZyZWdzOworICAgICAgaW92Lmlv
dl9sZW4gPSBzaXplb2YgKHJlZ3MpOworCisgICAgICBpZiAocHRyYWNlIChQVFJBQ0VfR0VUUkVH
U0VULCB0aWQsIE5UX1BSU1RBVFVTLAorCQkgIChQVFJBQ0VfVFlQRV9BUkczKSAmaW92KSA9PSAt
MSkKKwlwZXJyb3Jfd2l0aF9uYW1lIChfKCJDb3VsZG4ndCBnZXQgcmVnaXN0ZXJzIikpOworICAg
ICAgZWxzZQorCXN1cHBseV9ncmVnc2V0X3JlZ251bSAocmVnY2FjaGUsICZyZWdzLCByZWdudW0p
OworICAgIH0KKworICAvKiBBY2Nlc3MgdG8gb3RoZXIgU1BScyBoYXMgcG90ZW50aWFsIHNlY3Vy
aXR5IGlzc3VlcywgZG9uJ3Qgc3VwcG9ydCB0aGVtIGZvcgorICAgICBub3cuICAqLworfQorCisv
KiBTdG9yZSBSRUdOVU0gKG9yIGFsbCByZWdpc3RlcnMgaWYgUkVHTlVNID09IC0xKSB0byB0aGUg
dGFyZ2V0CisgICBmcm9tIFJFR0NBQ0hFIHVzaW5nIFBUUkFDRV9TRVRSRUdTRVQuICAqLworCit2
b2lkCitvcjFrX2xpbnV4X25hdF90YXJnZXQ6OnN0b3JlX3JlZ2lzdGVycyAoc3RydWN0IHJlZ2Nh
Y2hlICpyZWdjYWNoZSwgaW50IHJlZ251bSkKK3sKKyAgaW50IHRpZDsKKworICB0aWQgPSBnZXRf
cHRyYWNlX3BpZCAocmVnY2FjaGUtPnB0aWQgKCkpOworCisgIGlmICgocmVnbnVtID49IE9SMUtf
WkVST19SRUdOVU0gJiYgcmVnbnVtIDwgT1IxS19NQVhfR1BSX1JFR1MpCisgICAgICB8fCAocmVn
bnVtID09IE9SMUtfTlBDX1JFR05VTSkKKyAgICAgIHx8IChyZWdudW0gPT0gLTEpKQorICAgIHsK
KyAgICAgIHN0cnVjdCBpb3ZlYyBpb3Y7CisgICAgICBlbGZfZ3JlZ3NldF90IHJlZ3M7CisKKyAg
ICAgIGlvdi5pb3ZfYmFzZSA9ICZyZWdzOworICAgICAgaW92Lmlvdl9sZW4gPSBzaXplb2YgKHJl
Z3MpOworCisgICAgICBpZiAocHRyYWNlIChQVFJBQ0VfR0VUUkVHU0VULCB0aWQsIE5UX1BSU1RB
VFVTLAorCQkgIChQVFJBQ0VfVFlQRV9BUkczKSAmaW92KSA9PSAtMSkKKwlwZXJyb3Jfd2l0aF9u
YW1lIChfKCJDb3VsZG4ndCBnZXQgcmVnaXN0ZXJzIikpOworICAgICAgZWxzZQorCXsKKwkgIGZp
bGxfZ3JlZ3NldCAocmVnY2FjaGUsICZyZWdzLCByZWdudW0pOworCisJICBpZiAocHRyYWNlIChQ
VFJBQ0VfU0VUUkVHU0VULCB0aWQsIE5UX1BSU1RBVFVTLAorCQkgICAgICAoUFRSQUNFX1RZUEVf
QVJHMykgJmlvdikgPT0gLTEpCisJICAgIHBlcnJvcl93aXRoX25hbWUgKF8oIkNvdWxkbid0IHNl
dCByZWdpc3RlcnMiKSk7CisJfQorICAgIH0KKworICAvKiBBY2Nlc3MgdG8gU1BScyBoYXMgcG90
ZW50aWFsIHNlY3VyaXR5IGlzc3VlcywgZG9uJ3Qgc3VwcG9ydCB0aGVtIGZvcgorICAgICBub3cu
ICAqLworfQorCisvKiBJbml0aWFsaXplIE9wZW5SSVNDIExpbnV4IG5hdGl2ZSBzdXBwb3J0LiAg
Ki8KKwordm9pZCBfaW5pdGlhbGl6ZV9vcjFrX2xpbnV4X25hdCAoKTsKK3ZvaWQKK19pbml0aWFs
aXplX29yMWtfbGludXhfbmF0ICgpCit7CisgIC8qIFJlZ2lzdGVyIHRoZSB0YXJnZXQuICAqLwor
ICBsaW51eF90YXJnZXQgPSAmdGhlX29yMWtfbGludXhfbmF0X3RhcmdldDsKKyAgYWRkX2luZl9j
aGlsZF90YXJnZXQgKCZ0aGVfb3Ixa19saW51eF9uYXRfdGFyZ2V0KTsKK30KZGlmZiAtLWdpdCBh
L2dkYi9vcjFrLWxpbnV4LXRkZXAuYyBiL2dkYi9vcjFrLWxpbnV4LXRkZXAuYwppbmRleCAyZWZi
NGQwYjBmOS4uYTcxYTgyMDJiMWUgMTAwNjQ0Ci0tLSBhL2dkYi9vcjFrLWxpbnV4LXRkZXAuYwor
KysgYi9nZGIvb3Ixay1saW51eC10ZGVwLmMKQEAgLTI3LDYgKzI3LDggQEAKICNpbmNsdWRlICJ0
cmFkLWZyYW1lLmgiCiAjaW5jbHVkZSAiZ2RiYXJjaC5oIgogCisjaW5jbHVkZSAiZmVhdHVyZXMv
b3Ixay1saW51eC5jIgorCiAvKiBEZWZpbmUgdGhlIGdlbmVyYWwgcmVnaXN0ZXIgbWFwcGluZy4g
IFRoZSBrZXJuZWwgYW5kIEdEQiBwdXQgcmVnaXN0ZXJzCiAgICByMSB0byByMzEgaW4gdGhlIHNh
bWUgcGxhY2UuICBUaGUgTlBDIHJlZ2lzdGVyIGlzIHN0b3JlZCBhdCBpbmRleCAzMiBpbgogICAg
bGludXggYW5kIDMzIGluIEdEQiwgaW4gR0RCIDMyIGlzIGZvciBQUEMgd2hpY2ggaXMgbm90IHBv
cHVwYXRlZCBmcm9tIGxpbnV4LgpAQCAtMTcwLDQgKzE3Miw3IEBAIF9pbml0aWFsaXplX29yMWtf
bGludXhfdGRlcCAoKQogewogICBnZGJhcmNoX3JlZ2lzdGVyX29zYWJpIChiZmRfYXJjaF9vcjFr
LCAwLCBHREJfT1NBQklfTElOVVgsCiAJCQkgIG9yMWtfbGludXhfaW5pdF9hYmkpOworCisgIC8q
IEluaXRpYWxpemUgdGhlIHN0YW5kYXJkIHRhcmdldCBkZXNjcmlwdGlvbnMuICAqLworICBpbml0
aWFsaXplX3RkZXNjX29yMWtfbGludXggKCk7CiB9CmRpZmYgLS1naXQgYS9nZGIvb3Ixay1saW51
eC10ZGVwLmggYi9nZGIvb3Ixay1saW51eC10ZGVwLmgKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5k
ZXggMDAwMDAwMDAwMDAuLjE5Mjk0NjY5ZTY0Ci0tLSAvZGV2L251bGwKKysrIGIvZ2RiL29yMWst
bGludXgtdGRlcC5oCkBAIC0wLDAgKzEsMjYgQEAKKy8qIFRhcmdldC1kZXBlbmRlbnQgY29kZSBm
b3IgR05VL0xpbnV4IG9uIE9wZW5SSVNDLgorCisgICBDb3B5cmlnaHQgKEMpIDIwMjEgRnJlZSBT
b2Z0d2FyZSBGb3VuZGF0aW9uLCBJbmMuCisKKyAgIFRoaXMgZmlsZSBpcyBwYXJ0IG9mIEdEQi4K
KworICAgVGhpcyBwcm9ncmFtIGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRl
IGl0IGFuZC9vciBtb2RpZnkKKyAgIGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIEdlbmVy
YWwgUHVibGljIExpY2Vuc2UgYXMgcHVibGlzaGVkIGJ5CisgICB0aGUgRnJlZSBTb2Z0d2FyZSBG
b3VuZGF0aW9uOyBlaXRoZXIgdmVyc2lvbiAzIG9mIHRoZSBMaWNlbnNlLCBvcgorICAgKGF0IHlv
dXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KKworICAgVGhpcyBwcm9ncmFtIGlzIGRpc3Ry
aWJ1dGVkIGluIHRoZSBob3BlIHRoYXQgaXQgd2lsbCBiZSB1c2VmdWwsCisgICBidXQgV0lUSE9V
VCBBTlkgV0FSUkFOVFk7IHdpdGhvdXQgZXZlbiB0aGUgaW1wbGllZCB3YXJyYW50eSBvZgorICAg
TUVSQ0hBTlRBQklMSVRZIG9yIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFLiAgU2Vl
IHRoZQorICAgR05VIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy4KKwor
ICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIEdlbmVyYWwgUHVi
bGljIExpY2Vuc2UKKyAgIGFsb25nIHdpdGggdGhpcyBwcm9ncmFtLiAgSWYgbm90LCBzZWUgPGh0
dHA6Ly93d3cuZ251Lm9yZy9saWNlbnNlcy8+LiAgKi8KKworI2lmbmRlZiBPUjFLX0xJTlVYX1RE
RVBfSAorI2RlZmluZSBPUjFLX0xJTlVYX1RERVBfSAorCisvKiBUYXJnZXQgZGVzY3JpcHRpb25z
LiAgKi8KK2V4dGVybiBzdHJ1Y3QgdGFyZ2V0X2Rlc2MgKnRkZXNjX29yMWtfbGludXg7CisKKyNl
bmRpZiAvKiBPUjFLX0xJTlVYX1RERVBfSCAqLwotLSAKMi4zMS4xCgpfX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpPcGVuUklTQyBtYWlsaW5nIGxpc3QKT3Bl
blJJU0NAbGlzdHMubGlicmVjb3Jlcy5vcmcKaHR0cHM6Ly9saXN0cy5saWJyZWNvcmVzLm9yZy9s
aXN0aW5mby9vcGVucmlzYwo=
