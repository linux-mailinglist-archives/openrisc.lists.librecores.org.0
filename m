Return-Path: <openrisc-bounces@lists.librecores.org>
X-Original-To: lists+openrisc@lfdr.de
Delivered-To: lists+openrisc@lfdr.de
Received: from mail.librecores.org (lists.librecores.org [88.198.125.70])
	by mail.lfdr.de (Postfix) with ESMTP id 3B1A2480FA2
	for <lists+openrisc@lfdr.de>; Wed, 29 Dec 2021 05:43:15 +0100 (CET)
Received: from [172.31.1.100] (localhost.localdomain [127.0.0.1])
	by mail.librecores.org (Postfix) with ESMTP id 1D9D2242FE;
	Wed, 29 Dec 2021 05:43:15 +0100 (CET)
Received: from mail-pj1-f44.google.com (mail-pj1-f44.google.com
 [209.85.216.44])
 by mail.librecores.org (Postfix) with ESMTPS id 37BAF20A95
 for <openrisc@lists.librecores.org>; Wed, 29 Dec 2021 05:43:13 +0100 (CET)
Received: by mail-pj1-f44.google.com with SMTP id mj19so17549851pjb.3
 for <openrisc@lists.librecores.org>; Tue, 28 Dec 2021 20:43:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112;
 h=from:to:cc:subject:date:message-id:in-reply-to:references
 :mime-version:content-transfer-encoding;
 bh=G2YEQV7YkHpEw+2T/RvlZ5T5xUiVZvlIaZY/+WmXL88=;
 b=kl77MAIjT15u3qFVXYxy2ne9ylb4kVF7/PiYmeRLBOKJ5lOGRu44rYpqCzBywZ3BBO
 6zwMLvrR91d5YFB8kpuD4FdZ20WrOg7VlC2bZJhhFT4rV7eDG/4LCOKxlexYr9l/EDH7
 gZ+JQHYi6G4NeEK4VTUNm73R6BHmDjlFzada+ytBWKSyfo/UOYh1VmoW1nv1qBxnVUvj
 ct9ZtDacDLpEG/h1p9Krzq10wGouPS11eSvckt8ZUnBT64VputJqIQKpzoPe8Nz9W+ge
 1ztHDRTs4lV4y/55yMPboiI8YO1medlFJl/fzVi184v8/UHyJMGhn6/fQKFTq0dxztnq
 8p4g==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20210112;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:in-reply-to
 :references:mime-version:content-transfer-encoding;
 bh=G2YEQV7YkHpEw+2T/RvlZ5T5xUiVZvlIaZY/+WmXL88=;
 b=gZjBdQzWZOtf5U2MGfIm+OVYWJ65BvXaHM9z0ZFABIMbIE+j34Tza8AsNSF2gJ9PTW
 aaMNl7ULfZMlX/BYYBNwx9RgGWEL/tU4wG+8MD4JNUDXlatrG2MeKhwpKHp2Pop0bs0G
 W3EoQragfmpl2SUCLUel0D835x4oqQt1R7tWjDSIeF8LfNNwIyFI7w3+30YvHmlpxNxB
 Xi6Yd9KPCFbqo5rC7Mk/q9akDjXpHiXZYyGiYJlhuaC5Pw/B/+lYe+ZvL9KP717V9Sld
 k5Ra1/WDx5gzajyWs65wYhfJP65yrX7fEECpELm4N33vuFVxIiTNJSSKLr59HmofA0yb
 ItlQ==
X-Gm-Message-State: AOAM531mqOM6M8odCMrUVenRtBRTB4BzeBGIpeRk6IpXN+uOQkctO6nQ
 p5AxToZW33OyrQMtJ/S5vJs=
X-Google-Smtp-Source: ABdhPJwQ8hmKLLPS/AMvfQaA815tsnPSN2WFwGlggzEZCifEICwh9g7pg8yo/WC3Q6qnhEae1Gv0FQ==
X-Received: by 2002:a17:90b:38c1:: with SMTP id
 nn1mr30325540pjb.65.1640752991603; 
 Tue, 28 Dec 2021 20:43:11 -0800 (PST)
Received: from localhost ([2409:10:24a0:4700:e8ad:216a:2a9d:6d0c])
 by smtp.gmail.com with ESMTPSA id t10sm23403210pfg.105.2021.12.28.20.43.10
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Tue, 28 Dec 2021 20:43:10 -0800 (PST)
From: Stafford Horne <shorne@gmail.com>
To: GLIBC patches <libc-alpha@sourceware.org>
Date: Wed, 29 Dec 2021 13:42:43 +0900
Message-Id: <20211229044251.2203653-6-shorne@gmail.com>
X-Mailer: git-send-email 2.31.1
In-Reply-To: <20211229044251.2203653-1-shorne@gmail.com>
References: <20211229044251.2203653-1-shorne@gmail.com>
MIME-Version: 1.0
Subject: [OpenRISC] [PATCH v4 05/13] or1k: Thread Local Storage support
X-BeenThere: openrisc@lists.librecores.org
X-Mailman-Version: 2.1.26
Precedence: list
List-Id: Discussion around the OpenRISC processor
 <openrisc.lists.librecores.org>
List-Unsubscribe: <https://lists.librecores.org/options/openrisc>,
 <mailto:openrisc-request@lists.librecores.org?subject=unsubscribe>
List-Archive: <http://lists.librecores.org/pipermail/openrisc/>
List-Post: <mailto:openrisc@lists.librecores.org>
List-Help: <mailto:openrisc-request@lists.librecores.org?subject=help>
List-Subscribe: <https://lists.librecores.org/listinfo/openrisc>,
 <mailto:openrisc-request@lists.librecores.org?subject=subscribe>
Cc: Openrisc <openrisc@lists.librecores.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: openrisc-bounces@lists.librecores.org
Sender: "OpenRISC" <openrisc-bounces@lists.librecores.org>

T3BlblJJU0MgaW5jbHVkZXMgMyBUTFMgYWRkcmVzc2luZyBtb2RlbHMuICBMb2NhbCBEeW5hbWlj
IG9wdGltaXphdGlvbnMKYXJlIG5vdCBkb25lIGluIHRoZSBsaW5rZXIgYW5kIHRoZXJlZm9yZSB1
c2UgdGhlIHNhbWUgY29kZSBzZXF1ZW5jZXMgYXMKR2xvYmFsIER5bmFtaWMuCi0tLQogc3lzZGVw
cy9vcjFrL2RsLXRscy5oICAgIHwgIDI3ICsrKysrKwogc3lzZGVwcy9vcjFrL2xpYmMtdGxzLmMg
IHwgIDM0ICsrKysrKysrCiBzeXNkZXBzL29yMWsvbnB0bC90bHMuaCAgfCAxODQgKysrKysrKysr
KysrKysrKysrKysrKysrKysrKysrKysrKysrKysrCiBzeXNkZXBzL29yMWsvc3RhY2tpbmZvLmgg
fCAgMzQgKysrKysrKysKIDQgZmlsZXMgY2hhbmdlZCwgMjc5IGluc2VydGlvbnMoKykKIGNyZWF0
ZSBtb2RlIDEwMDY0NCBzeXNkZXBzL29yMWsvZGwtdGxzLmgKIGNyZWF0ZSBtb2RlIDEwMDY0NCBz
eXNkZXBzL29yMWsvbGliYy10bHMuYwogY3JlYXRlIG1vZGUgMTAwNjQ0IHN5c2RlcHMvb3Ixay9u
cHRsL3Rscy5oCiBjcmVhdGUgbW9kZSAxMDA2NDQgc3lzZGVwcy9vcjFrL3N0YWNraW5mby5oCgpk
aWZmIC0tZ2l0IGEvc3lzZGVwcy9vcjFrL2RsLXRscy5oIGIvc3lzZGVwcy9vcjFrL2RsLXRscy5o
Cm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAuLjM4MjU4OGQ1MDQKLS0tIC9k
ZXYvbnVsbAorKysgYi9zeXNkZXBzL29yMWsvZGwtdGxzLmgKQEAgLTAsMCArMSwyNyBAQAorLyog
VExTIGRlZmluaXRpb25zIGZvciB0aGUgRUxGIGR5bmFtaWMgbGlua2VyLiAgT3BlblJJU0MgdmVy
c2lvbi4KKyAgIENvcHlyaWdodCAoQykgMjAyMSBGcmVlIFNvZnR3YXJlIEZvdW5kYXRpb24sIElu
Yy4KKworICAgVGhpcyBmaWxlIGlzIHBhcnQgb2YgdGhlIEdOVSBDIExpYnJhcnkuCisKKyAgIFRo
ZSBHTlUgQyBMaWJyYXJ5IGlzIGZyZWUgc29mdHdhcmU7IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0
IGFuZC9vcgorICAgbW9kaWZ5IGl0IHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgR05VIExlc3NlciBH
ZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzCisgICBwdWJsaXNoZWQgYnkgdGhlIEZyZWUgU29mdHdh
cmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMi4xIG9mIHRoZQorICAgTGljZW5zZSwgb3Ig
KGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4KKworICAgVGhlIEdOVSBDIExpYnJh
cnkgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBpdCB3aWxsIGJlIHVzZWZ1bCwKKyAg
IGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJh
bnR5IG9mCisgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBV
UlBPU0UuICBTZWUgdGhlIEdOVQorICAgTGVzc2VyIEdlbmVyYWwgUHVibGljIExpY2Vuc2UgZm9y
IG1vcmUgZGV0YWlscy4KKworICAgWW91IHNob3VsZCBoYXZlIHJlY2VpdmVkIGEgY29weSBvZiB0
aGUgR05VIExlc3NlciBHZW5lcmFsIFB1YmxpYworICAgTGljZW5zZSBhbG9uZyB3aXRoIHRoZSBH
TlUgQyBMaWJyYXJ5OyBpZiBub3QsIHNlZQorICAgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5z
ZXMvPi4gICovCisKKy8qIFR5cGUgdXNlZCBmb3IgdGhlIHJlcHJlc2VudGF0aW9uIG9mIFRMUyBp
bmZvcm1hdGlvbiBpbiB0aGUgR09ULiAgKi8KK3R5cGVkZWYgc3RydWN0Cit7CisgIHVuc2lnbmVk
IGxvbmcgaW50IHRpX21vZHVsZTsKKyAgdW5zaWduZWQgbG9uZyBpbnQgdGlfb2Zmc2V0OworfSB0
bHNfaW5kZXg7CisKK2V4dGVybiB2b2lkICpfX3Rsc19nZXRfYWRkciAodGxzX2luZGV4ICp0aSk7
CmRpZmYgLS1naXQgYS9zeXNkZXBzL29yMWsvbGliYy10bHMuYyBiL3N5c2RlcHMvb3Ixay9saWJj
LXRscy5jCm5ldyBmaWxlIG1vZGUgMTAwNjQ0CmluZGV4IDAwMDAwMDAwMDAuLjE1MjQ4NTVlODgK
LS0tIC9kZXYvbnVsbAorKysgYi9zeXNkZXBzL29yMWsvbGliYy10bHMuYwpAQCAtMCwwICsxLDM0
IEBACisvKiBUaHJlYWQtbG9jYWwgc3RvcmFnZSBoYW5kbGluZyBpbiB0aGUgRUxGIGR5bmFtaWMg
bGlua2VyLgorICAgT3BlblJJU0MgdmVyc2lvbi4KKyAgIENvcHlyaWdodCAoQykgMjAyMSBGcmVl
IFNvZnR3YXJlIEZvdW5kYXRpb24sIEluYy4KKworICAgVGhpcyBmaWxlIGlzIHBhcnQgb2YgdGhl
IEdOVSBDIExpYnJhcnkuCisKKyAgIFRoZSBHTlUgQyBMaWJyYXJ5IGlzIGZyZWUgc29mdHdhcmU7
IHlvdSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vcgorICAgbW9kaWZ5IGl0IHVuZGVyIHRoZSB0
ZXJtcyBvZiB0aGUgR05VIExlc3NlciBHZW5lcmFsIFB1YmxpYyBMaWNlbnNlIGFzCisgICBwdWJs
aXNoZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyIHZlcnNpb24gMi4x
IG9mIHRoZQorICAgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lv
bi4KKworICAgVGhlIEdOVSBDIExpYnJhcnkgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhh
dCBpdCB3aWxsIGJlIHVzZWZ1bCwKKyAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91
dCBldmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCisgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklU
TkVTUyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlIEdOVQorICAgTGVzc2VyIEdl
bmVyYWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy4KKworICAgWW91IHNob3VsZCBo
YXZlIHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIExlc3NlciBHZW5lcmFsIFB1YmxpYworICAg
TGljZW5zZSBhbG9uZyB3aXRoIHRoZSBHTlUgQyBMaWJyYXJ5OyBpZiBub3QsIHNlZQorICAgPGh0
dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4gICovCisKKyNpbmNsdWRlIDxjc3UvbGliYy10
bHMuYz4KKyNpbmNsdWRlIDxkbC10bHMuaD4KKworLyogT24gT3BlblJJU0MsIGxpbmtlciBvcHRp
bWl6YXRpb25zIGFyZSBub3QgcmVxdWlyZWQsIHNvIF9fdGxzX2dldF9hZGRyCisgICBjYW4gYmUg
Y2FsbGVkIGV2ZW4gaW4gc3RhdGljYWxseSBsaW5rZWQgYmluYXJpZXMuICBJbiB0aGlzIGNhc2Ug
bW9kdWxlCisgICBtdXN0IGJlIGFsd2F5cyAxIGFuZCBQVF9UTFMgc2VnbWVudCBleGlzdCBpbiB0
aGUgYmluYXJ5LCBvdGhlcndpc2UgaXQKKyAgIHdvdWxkIG5vdCBsaW5rLiAgKi8KKwordm9pZCAq
CitfX3Rsc19nZXRfYWRkciAodGxzX2luZGV4ICp0aSkKK3sKKyAgZHR2X3QgKmR0diA9IFRIUkVB
RF9EVFYgKCk7CisgIHJldHVybiAoY2hhciAqKSBkdHZbMV0ucG9pbnRlci52YWwgKyB0aS0+dGlf
b2Zmc2V0OworfQpkaWZmIC0tZ2l0IGEvc3lzZGVwcy9vcjFrL25wdGwvdGxzLmggYi9zeXNkZXBz
L29yMWsvbnB0bC90bHMuaApuZXcgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMDAwMDAwMDAwLi5j
OWU4NmFkZDZkCi0tLSAvZGV2L251bGwKKysrIGIvc3lzZGVwcy9vcjFrL25wdGwvdGxzLmgKQEAg
LTAsMCArMSwxODQgQEAKKy8qIERlZmluaXRpb24gZm9yIHRocmVhZC1sb2NhbCBkYXRhIGhhbmRs
aW5nLiAgTlBUTC9PcGVuUklTQyB2ZXJzaW9uLgorICAgQ29weXJpZ2h0IChDKSAyMDIxIEZyZWUg
U29mdHdhcmUgRm91bmRhdGlvbiwgSW5jLgorICAgVGhpcyBmaWxlIGlzIHBhcnQgb2YgdGhlIEdO
VSBDIExpYnJhcnkuCisKKyAgIFRoZSBHTlUgQyBMaWJyYXJ5IGlzIGZyZWUgc29mdHdhcmU7IHlv
dSBjYW4gcmVkaXN0cmlidXRlIGl0IGFuZC9vcgorICAgbW9kaWZ5IGl0IHVuZGVyIHRoZSB0ZXJt
cyBvZiB0aGUgR05VIExlc3NlciBHZW5lcmFsIFB1YmxpYworICAgTGljZW5zZSBhcyBwdWJsaXNo
ZWQgYnkgdGhlIEZyZWUgU29mdHdhcmUgRm91bmRhdGlvbjsgZWl0aGVyCisgICB2ZXJzaW9uIDIu
MSBvZiB0aGUgTGljZW5zZSwgb3IgKGF0IHlvdXIgb3B0aW9uKSBhbnkgbGF0ZXIgdmVyc2lvbi4K
KworICAgVGhlIEdOVSBDIExpYnJhcnkgaXMgZGlzdHJpYnV0ZWQgaW4gdGhlIGhvcGUgdGhhdCBp
dCB3aWxsIGJlIHVzZWZ1bCwKKyAgIGJ1dCBXSVRIT1VUIEFOWSBXQVJSQU5UWTsgd2l0aG91dCBl
dmVuIHRoZSBpbXBsaWVkIHdhcnJhbnR5IG9mCisgICBNRVJDSEFOVEFCSUxJVFkgb3IgRklUTkVT
UyBGT1IgQSBQQVJUSUNVTEFSIFBVUlBPU0UuICBTZWUgdGhlIEdOVQorICAgTGVzc2VyIEdlbmVy
YWwgUHVibGljIExpY2Vuc2UgZm9yIG1vcmUgZGV0YWlscy4KKworICAgWW91IHNob3VsZCBoYXZl
IHJlY2VpdmVkIGEgY29weSBvZiB0aGUgR05VIExlc3NlciBHZW5lcmFsIFB1YmxpYworICAgTGlj
ZW5zZSBhbG9uZyB3aXRoIHRoZSBHTlUgQyBMaWJyYXJ5LiAgSWYgbm90LCBzZWUKKyAgIDxodHRw
czovL3d3dy5nbnUub3JnL2xpY2Vuc2VzLz4uICAqLworCisjaWZuZGVmIF9UTFNfSAorI2RlZmlu
ZSBfVExTX0ggIDEKKworI2luY2x1ZGUgPGRsLXN5c2RlcC5oPgorCisjaWZuZGVmIF9fQVNTRU1C
TEVSX18KKyMgaW5jbHVkZSA8c3RkYm9vbC5oPgorIyBpbmNsdWRlIDxzdGRkZWYuaD4KKyMgaW5j
bHVkZSA8c3RkaW50Lmg+CisjIGluY2x1ZGUgPGRsLWR0di5oPgorCit0eXBlZGVmIHN0cnVjdAor
eworICBkdHZfdCAqZHR2OworICB2b2lkICpfX3BhZGRpbmdbM107Cit9IHRjYmhlYWRfdDsKKwor
cmVnaXN0ZXIgdGNiaGVhZF90ICpfX3RocmVhZF9zZWxmIF9fYXNtX18oInIxMCIpOworCisjIGRl
ZmluZSBUTFNfTVVMVElQTEVfVEhSRUFEU19JTl9UQ0IgMQorCisvKiBHZXQgc3lzdGVtIGNhbGwg
aW5mb3JtYXRpb24uICAqLworIyBpbmNsdWRlIDxzeXNkZXAuaD4KKworLyogVGhlIFRQIHBvaW50
cyB0byB0aGUgc3RhcnQgb2YgdGhlIFRMUyBibG9jay4KKyAgIEFzIEkgdW5kZXJzdGFuZCBpdCwg
dGhpcyBpc24ndCBzdHJpY3RseSB0aGF0ICJUUCBwb2ludHMgdG8gRFRWIiAtIGl0J3MKKyAgIG1v
cmUgd2hlcmUgdG8gcGxhY2UgdGhlIFRDQiBpbiB0aGUgVExTIGJsb2NrLiAgVGhpcyB3aWxsIHBs
YWNlIGl0IGluCisgICB0aGUgYmVnaW5uaW5nLgorCisgICBMYXlvdXQ6CisgICAgKy0tLS0tKy0t
LS0tKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rCisgICAgfCBQUkUgfCBUQ0IgfCBUTFMgTUVNT1JZ
IC4uICAgICAgICB8CisgICAgKy0tLS0tKy0tLS0tKy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0rCisJ
CSBeIHIxMCAvIFRQCisKKyAgIFBSRSBpcyB0aGUgc3RydWN0IHB0aHJlYWQgZGVzY3JpYmVkIGJl
bG93CisgICBUQ0IgaXMgdGNiaGVhZF90CisgICBUTFMgbWVtb3J5IGlzIHdoZXJlIHRoZSBUTFMg
cHJvZ3JhbSBzZWN0aW9ucyBhcmUgbG9hZGVkCisKKyAgIFNlZSBfZGxfYWxsb2NhdGVfdGxzX3N0
b3JhZ2UgYW5kIF9fbGliY19zZXR1cF90bHMgZm9yIG1vcmUgaW5mb3JtYXRpb24uICAqLworCisj
IGRlZmluZSBUTFNfRFRWX0FUX1RQICAxCisjIGRlZmluZSBUTFNfVENCX0FUX1RQICAwCisKKy8q
IEdldCB0aGUgdGhyZWFkIGRlc2NyaXB0b3IgZGVmaW5pdGlvbi4gICovCisjIGluY2x1ZGUgPG5w
dGwvZGVzY3IuaD4KKworLyogUmVxdWlyZW1lbnRzIGZvciB0aGUgVENCLiAgKi8KKyMgZGVmaW5l
IFRMU19JTklUX1RDQl9TSVpFICAgIHNpemVvZiAodGNiaGVhZF90KQorIyBkZWZpbmUgVExTX0lO
SVRfVENCX0FMSUdOICAgX19hbGlnbm9mX18gKHN0cnVjdCBwdGhyZWFkKQorCisjIGRlZmluZSBU
TFNfVENCX1NJWkUgICAgICAgICBzaXplb2YgKHRjYmhlYWRfdCkKKyMgZGVmaW5lIFRMU19UQ0Jf
QUxJR04gICAgICAgIF9fYWxpZ25vZl9fIChzdHJ1Y3QgcHRocmVhZCkKKworLyogVGhpcyBpcyB0
aGUgc2l6ZSBvZiB0aGUgVENCLiAgKi8KKworLyogVGhpcyBpcyB0aGUgc2l6ZSB3ZSBuZWVkIGJl
Zm9yZSBUQ0IuCisgICBUbyBzdXBwb3J0IFRIUkVBRF9HRVRNRU0gd2l0aCBmcmllbmRzIHdlIHdh
bnQgdG8gaGF2ZSBhCisgICBzdHJ1Y3QgcHRocmVhZCBhdmFpbGFibGUuCisgICBZYW5rIGl0IGlu
IGluZnJvbnQgb2YgZXZlcnl0aGluZywgSSdtIHN1cmUgbm9ib2R5IHdpbGwgbWluZC4KKworICAg
VGhpcyBtZW1vcnkgaXMgcmVhbGx5IGFsbG9jYXRlZCBQUkUgdGhlIFRMUyBibG9jaywgc28gaXQn
cyBwb3NzaWJsZQorICAgdG8gZG8gKChjaGFyKil0bHNibG9jaykgLSBUTFNfUFJFX1RDQl9TSVpF
IHRvIGFjY2VzcyBpdC4KKyAgIFRoaXMgaXMgZG9uZSBmb3IgVEhSRUFEX1NFTEYuICAqLworCisj
IGRlZmluZSBUTFNfUFJFX1RDQl9TSVpFIHNpemVvZiAoc3RydWN0IHB0aHJlYWQpCisKKy8qIElu
c3RhbGwgdGhlIGR0diBwb2ludGVyLgorICAgV2hlbiBjYWxsZWQsIGR0dnAgaXMgYSBwb2ludGVy
IG5vdCB0aGUgRFRWIHBlciBzYXkgKHdoaWNoIHNob3VsZCBzdGFydAorICAgd2l0aCB0aGUgZ2Vu
ZXJhdGlvbiBjb3VudGVyKSBidXQgdG8gdGhlIGxlbmd0aCBvZiB0aGUgRFRWLgorICAgV2UgY2Fu
IGFsd2F5cyBpbmRleCB3aXRoIC0xLCBzbyB3ZSBzdG9yZSBkdHZwWzFdLiAgKi8KKworIyBkZWZp
bmUgSU5TVEFMTF9EVFYodGNicCwgZHR2cCkgXAorICAoKCh0Y2JoZWFkX3QgKikgKHRjYnApKS0+
ZHR2ID0gKGR0dnApICsgMSkKKworLyogSW5zdGFsbCBuZXcgZHR2IGZvciBjdXJyZW50IHRocmVh
ZAorICAgSW4gYSBsb2dpY2lhbCB3b3JsZCBkdHYgaGVyZSB3b3VsZCBhbHNvIHBvaW50IHRvIHRo
ZSBsZW5ndGggb2YgdGhlIERUVi4KKyAgIEhvd2V2ZXIgaXQgZG9lcyBub3QsIHRoaXMgdGltZSBp
dCBwb2ludHMgdG8gdGhlIGdlbmVyYXRpb24gY291bnRlciwKKyAgIHNvIGp1c3Qgc3RvcmUgaXQu
CisKKyAgIE5vdGU6IC0xIGlzIHN0aWxsIHZhbGlkIGFuZCBjb250YWlucyB0aGUgbGVuZ3RoLiAg
Ki8KKworIyBkZWZpbmUgSU5TVEFMTF9ORVdfRFRWKGR0dikgKFRIUkVBRF9EVFYoKSA9IChkdHYp
KQorCisvKiBSZXR1cm4gZHR2IG9mIGdpdmVuIHRocmVhZCBkZXNjcmlwdG9yLiAgKi8KKyMgZGVm
aW5lIEdFVF9EVFYodGNicCkgKCgodGNiaGVhZF90ICopICh0Y2JwKSktPmR0dikKKworLyogQ29k
ZSB0byBpbml0aWFsbHkgaW5pdGlhbGl6ZSB0aGUgdGhyZWFkIHBvaW50ZXIuCisKKyAgIFNldCBU
UCB0byB0aGUgYWRkcmVzcyBfYWZ0ZXJfIHRjYmhlYWRfdC4gIFRoaXMgd2lsbCBhbGxvdyB1cwor
ICAgdG8gY2hhbmdlIHRoZSBzaXplIG9mIHRjYmhlYWRfdCB3aXRob3V0IGhhdmluZyB0byByZS1s
aW5rIGV2ZXJ5dGhpbmcuCisKKyAgIFRoaXMgaGFzIHRvIHJldHVybiBOVUxMIG9uIHN1Y2Nlc3Mg
KG9yIGEgc3RyaW5nIHdpdGggdGhlIGZhaWx1cmUgdGV4dCkuCisgICBJdCdzIGhhcmQgdG8gZmFp
bCB0aGlzLCBzbyByZXR1cm4gTlVMTCBhbHdheXMuICAqLworCisjIGRlZmluZSBUTFNfSU5JVF9U
UCh0Y2JwKSBcCisgICh7X190aHJlYWRfc2VsZiA9ICgodGNiaGVhZF90ICopdGNicCArIDEpOyBO
VUxMO30pCisKKy8qIFZhbHVlIHBhc3NlZCB0byAnY2xvbmUnIGZvciBpbml0aWFsaXphdGlvbiBv
ZiB0aGUgdGhyZWFkIHJlZ2lzdGVyLiAgKi8KKyMgZGVmaW5lIFRMU19ERUZJTkVfSU5JVF9UUCh0
cCwgcGQpIFwKKyAgdm9pZCAqdHAgPSAoKGNoYXIgKikgcGQgKyBUTFNfUFJFX1RDQl9TSVpFICsg
VExTX0lOSVRfVENCX1NJWkUpCisKKy8qIFJldHVybiB0aGUgYWRkcmVzcyBvZiB0aGUgZHR2IGZv
ciB0aGUgY3VycmVudCB0aHJlYWQuCisKKyAgIERlcmVmZXJlbmNlIFRQLCBvZmZzZXQgdG8gZHR2
IC0gcmVhbGx5IHN0cmFpZ2h0Zm9yd2FyZC4KKyAgIFJlbWVtYmVyIHRoYXQgd2UgbWFkZSBUUCBw
b2ludCB0byBhZnRlciB0Y2IsIHNvIHdlIG5lZWQgdG8gcmV2ZXJzZSB0aGF0LiAgKi8KKworIyAg
ZGVmaW5lIFRIUkVBRF9EVFYoKSBcCisgICgoKCh0Y2JoZWFkX3QgKilfX3RocmVhZF9zZWxmKS0x
KS0+ZHR2KQorCisvKiBSZXR1cm4gdGhlIHRocmVhZCBkZXNjcmlwdG9yIGZvciB0aGUgY3VycmVu
dCB0aHJlYWQuCisKKyAgIFJldHVybiBhIHBvaW50ZXIgdG8gdGhlIFRMU19QUkUgYXJlYSB3aGVy
ZSB3ZSBhbGxvY2F0ZWQgc3BhY2UgZm9yCisgICBhIHN0cnVjdCBwdGhyZWFkLiAgQWdhaW4sIFRQ
IHBvaW50cyB0byBhZnRlciB0Y2JoZWFkX3QsIGNvbXBlbnNhdGUgd2l0aAorICAgVExTX0lOSVRf
VENCX1NJWkUuCisKKyAgIEkgcmVnYXJkIHRoaXMgaXMgYSBzZXBlcmF0ZSBzeXN0ZW0gZnJvbSB0
aGUgIm5vcm1hbCIgVExTLiAgKi8KKworIyBkZWZpbmUgVEhSRUFEX1NFTEYgXAorICAoKHN0cnVj
dCBwdGhyZWFkICopICgoY2hhciAqKSBfX3RocmVhZF9zZWxmIC0gVExTX0lOSVRfVENCX1NJWkUg
XAorICAgIC0gVExTX1BSRV9UQ0JfU0laRSkpCisKKy8qIE1hZ2ljIGZvciBsaWJ0aHJlYWRfZGIg
dG8ga25vdyBob3cgdG8gZG8gVEhSRUFEX1NFTEYuICAqLworCisjIGRlZmluZSBEQl9USFJFQURf
U0VMRiBcCisgIFJFR0lTVEVSICgzMiwgMzIsIDEwICogNCwgLSBUTFNfSU5JVF9UQ0JfU0laRSAt
IFRMU19QUkVfVENCX1NJWkUpCisKKyMgaW5jbHVkZSA8dGNiLWFjY2Vzcy5oPgorCisvKiBBY2Nl
c3MgdG8gZGF0YSBpbiB0aGUgdGhyZWFkIGRlc2NyaXB0b3IgaXMgZWFzeS4gICovCisKKyNkZWZp
bmUgVEhSRUFEX0dFVE1FTShkZXNjciwgbWVtYmVyKSBcCisgIGRlc2NyLT5tZW1iZXIKKyNkZWZp
bmUgVEhSRUFEX0dFVE1FTV9OQyhkZXNjciwgbWVtYmVyLCBpZHgpIFwKKyAgZGVzY3ItPm1lbWJl
cltpZHhdCisjZGVmaW5lIFRIUkVBRF9TRVRNRU0oZGVzY3IsIG1lbWJlciwgdmFsdWUpIFwKKyAg
ZGVzY3ItPm1lbWJlciA9ICh2YWx1ZSkKKyNkZWZpbmUgVEhSRUFEX1NFVE1FTV9OQyhkZXNjciwg
bWVtYmVyLCBpZHgsIHZhbHVlKSBcCisgIGRlc2NyLT5tZW1iZXJbaWR4XSA9ICh2YWx1ZSkKKwor
LyogR2V0IGFuZCBzZXQgdGhlIGdsb2JhbCBzY29wZSBnZW5lcmF0aW9uIGNvdW50ZXIgaW4gc3Ry
dWN0IHB0aHJlYWQuICAqLworCisjZGVmaW5lIFRIUkVBRF9HU0NPUEVfRkxBR19VTlVTRUQgMAor
I2RlZmluZSBUSFJFQURfR1NDT1BFX0ZMQUdfVVNFRCAgIDEKKyNkZWZpbmUgVEhSRUFEX0dTQ09Q
RV9GTEFHX1dBSVQgICAyCisjZGVmaW5lIFRIUkVBRF9HU0NPUEVfUkVTRVRfRkxBRygpCQkJCQlc
CisgIGRvCQkJCQkJCQkJXAorICAgIHsJCQkJCQkJCQlcCisgICAgICBpbnQgX19yZXMgPSBhdG9t
aWNfZXhjaGFuZ2VfcmVsICgmVEhSRUFEX1NFTEYtPmhlYWRlci5nc2NvcGVfZmxhZyxcCisJCQkJ
ICAgICAgIFRIUkVBRF9HU0NPUEVfRkxBR19VTlVTRUQpOwlcCisgICAgICBpZiAoX19yZXMgPT0g
VEhSRUFEX0dTQ09QRV9GTEFHX1dBSVQpCQkJCVwKKwkgIGxsbF9mdXRleF93YWtlICgmVEhSRUFE
X1NFTEYtPmhlYWRlci5nc2NvcGVfZmxhZywgMSwJCVwKKwkJCSAgTExMX1BSSVZBVEUpOwkJCQkJ
XAorICAgIH0JCQkJCQkJCQlcCisgIHdoaWxlICgwKQorI2RlZmluZSBUSFJFQURfR1NDT1BFX1NF
VF9GTEFHKCkJCQkJCVwKKyAgZG8JCQkJCQkJCQlcCisgICAgewkJCQkJCQkJCVwKKyAgICAgIFRI
UkVBRF9TRUxGLT5oZWFkZXIuZ3Njb3BlX2ZsYWcgPSBUSFJFQURfR1NDT1BFX0ZMQUdfVVNFRDsJ
XAorICAgICAgYXRvbWljX3dyaXRlX2JhcnJpZXIgKCk7CQkJCQkJXAorICAgIH0JCQkJCQkJCQlc
CisgIHdoaWxlICgwKQorCisjZW5kaWYgLyogX19BU1NFTUJMRVJfXyAqLworCisjZW5kaWYgIC8q
IHRscy5oICovCmRpZmYgLS1naXQgYS9zeXNkZXBzL29yMWsvc3RhY2tpbmZvLmggYi9zeXNkZXBz
L29yMWsvc3RhY2tpbmZvLmgKbmV3IGZpbGUgbW9kZSAxMDA2NDQKaW5kZXggMDAwMDAwMDAwMC4u
OTI3M2U3MDliZAotLS0gL2Rldi9udWxsCisrKyBiL3N5c2RlcHMvb3Ixay9zdGFja2luZm8uaApA
QCAtMCwwICsxLDM0IEBACisvKiBTdGFjayBkZWZpbml0aW9ucyBmb3IgT3BlblJJU0MuCisgICBD
b3B5cmlnaHQgKEMpIDIwMjEgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9uLCBJbmMuCisgICBUaGlz
IGZpbGUgaXMgcGFydCBvZiB0aGUgR05VIEMgTGlicmFyeS4KKworICAgVGhlIEdOVSBDIExpYnJh
cnkgaXMgZnJlZSBzb2Z0d2FyZTsgeW91IGNhbiByZWRpc3RyaWJ1dGUgaXQgYW5kL29yCisgICBt
b2RpZnkgaXQgdW5kZXIgdGhlIHRlcm1zIG9mIHRoZSBHTlUgTGVzc2VyIEdlbmVyYWwgUHVibGlj
CisgICBMaWNlbnNlIGFzIHB1Ymxpc2hlZCBieSB0aGUgRnJlZSBTb2Z0d2FyZSBGb3VuZGF0aW9u
OyBlaXRoZXIKKyAgIHZlcnNpb24gMi4xIG9mIHRoZSBMaWNlbnNlLCBvciAoYXQgeW91ciBvcHRp
b24pIGFueSBsYXRlciB2ZXJzaW9uLgorCisgICBUaGUgR05VIEMgTGlicmFyeSBpcyBkaXN0cmli
dXRlZCBpbiB0aGUgaG9wZSB0aGF0IGl0IHdpbGwgYmUgdXNlZnVsLAorICAgYnV0IFdJVEhPVVQg
QU5ZIFdBUlJBTlRZOyB3aXRob3V0IGV2ZW4gdGhlIGltcGxpZWQgd2FycmFudHkgb2YKKyAgIE1F
UkNIQU5UQUJJTElUWSBvciBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRS4gIFNlZSB0
aGUgR05VCisgICBMZXNzZXIgR2VuZXJhbCBQdWJsaWMgTGljZW5zZSBmb3IgbW9yZSBkZXRhaWxz
LgorCisgICBZb3Ugc2hvdWxkIGhhdmUgcmVjZWl2ZWQgYSBjb3B5IG9mIHRoZSBHTlUgTGVzc2Vy
IEdlbmVyYWwgUHVibGljCisgICBMaWNlbnNlIGFsb25nIHdpdGggdGhlIEdOVSBDIExpYnJhcnku
ICBJZiBub3QsIHNlZQorICAgPGh0dHBzOi8vd3d3LmdudS5vcmcvbGljZW5zZXMvPi4gICovCisK
Ky8qIFRoaXMgZmlsZSBjb250YWlucyBhIGJpdCBvZiBpbmZvcm1hdGlvbiBhYm91dCB0aGUgc3Rh
Y2sgYWxsb2NhdGlvbgorICAgb2YgdGhlIHByb2Nlc3Nvci4gICovCisKKyNpZm5kZWYgX1NUQUNL
SU5GT19ICisjZGVmaW5lIF9TVEFDS0lORk9fSAkxCisKKyNpbmNsdWRlIDxlbGYuaD4KKworLyog
T24gb3IxayB0aGUgc3RhY2sgZ3Jvd3MgZG93bi4gICovCisjZGVmaW5lIF9TVEFDS19HUk9XU19E
T1dOCTEKKworLyogRGVmYXVsdCB0byBhbiBleGVjdXRhYmxlIHN0YWNrLiAgUEZfWCBjYW4gYmUg
b3ZlcnJpZGRlbiBpZiBQVF9HTlVfU1RBQ0sgaXMKKyAgIHByZXNlbnQsIGJ1dCBpdCBpcyBwcmVz
dW1lZCBhYnNlbnQuICAqLworI2RlZmluZSBERUZBVUxUX1NUQUNLX1BFUk1TIChQRl9SIHwgUEZf
VyB8IFBGX1gpCisKKyNlbmRpZiAvKiBzdGFja2luZm8uaCAqLwotLSAKMi4zMS4xCgpfX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwpPcGVuUklTQyBtYWlsaW5n
IGxpc3QKT3BlblJJU0NAbGlzdHMubGlicmVjb3Jlcy5vcmcKaHR0cHM6Ly9saXN0cy5saWJyZWNv
cmVzLm9yZy9saXN0aW5mby9vcGVucmlzYwo=
