Return-Path: <openrisc-bounces@lists.librecores.org>
X-Original-To: lists+openrisc@lfdr.de
Delivered-To: lists+openrisc@lfdr.de
Received: from mail.librecores.org (lists.librecores.org [88.198.125.70])
	by mail.lfdr.de (Postfix) with ESMTP id 0D7EF1E502D
	for <lists+openrisc@lfdr.de>; Wed, 27 May 2020 23:19:22 +0200 (CEST)
Received: from [172.31.1.100] (localhost.localdomain [127.0.0.1])
	by mail.librecores.org (Postfix) with ESMTP id B74FC20B84;
	Wed, 27 May 2020 23:19:21 +0200 (CEST)
Received: from mail.kernel.org (mail.kernel.org [198.145.29.99])
 by mail.librecores.org (Postfix) with ESMTPS id 45BA320AB3
 for <openrisc@lists.librecores.org>; Thu, 14 May 2020 19:05:19 +0200 (CEST)
Received: from aquarius.haifa.ibm.com (nesher1.haifa.il.ibm.com [195.110.40.7])
 (using TLSv1.2 with cipher ECDHE-RSA-AES128-SHA256 (128/128 bits))
 (No client certificate requested)
 by mail.kernel.org (Postfix) with ESMTPSA id 21FF0206F1;
 Thu, 14 May 2020 17:05:03 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=kernel.org;
 s=default; t=1589475918;
 bh=yCvMg9jE76Q0mBLXp3JtaX9kPYeAaa6ImoilPHaVKJo=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=MsXf+YHLiMI+6nfVDWOloety14o6JtNlRYn5C4NpDZVRH90TiJvlFuFoUuAZuA9+K
 HZhIg1NTYiA/9LFiictyIBYEvruIwYzYcqZJyQuCYfPaGccEozO27Q88Ag+LaopJp/
 uY8eQCnE5yZhTWiArvI3ABGMenLhVbfIKS966Dkg=
From: Mike Rapoport <rppt@kernel.org>
To: linux-kernel@vger.kernel.org
Date: Thu, 14 May 2020 20:03:21 +0300
Message-Id: <20200514170327.31389-7-rppt@kernel.org>
X-Mailer: git-send-email 2.26.2
In-Reply-To: <20200514170327.31389-1-rppt@kernel.org>
References: <20200514170327.31389-1-rppt@kernel.org>
MIME-Version: 1.0
X-Mailman-Approved-At: Wed, 27 May 2020 23:18:58 +0200
Subject: [OpenRISC] [PATCH v2 06/12] m68k/mm: move {cache,
 nocahe}_page() definitions close to their user
X-BeenThere: openrisc@lists.librecores.org
X-Mailman-Version: 2.1.26
Precedence: list
List-Id: Discussion around the OpenRISC processor
 <openrisc.lists.librecores.org>
List-Unsubscribe: <https://lists.librecores.org/options/openrisc>,
 <mailto:openrisc-request@lists.librecores.org?subject=unsubscribe>
List-Archive: <http://lists.librecores.org/pipermail/openrisc/>
List-Post: <mailto:openrisc@lists.librecores.org>
List-Help: <mailto:openrisc-request@lists.librecores.org?subject=help>
List-Subscribe: <https://lists.librecores.org/listinfo/openrisc>,
 <mailto:openrisc-request@lists.librecores.org?subject=subscribe>
Cc: Rich Felker <dalias@libc.org>, linux-ia64@vger.kernel.org,
 linux-sh@vger.kernel.org, Catalin Marinas <catalin.marinas@arm.com>,
 Heiko Carstens <heiko.carstens@de.ibm.com>, Max Filippov <jcmvbkbc@gmail.com>,
 Guo Ren <guoren@kernel.org>, Matthew Wilcox <willy@infradead.org>,
 sparclinux@vger.kernel.org, linux-hexagon@vger.kernel.org,
 linux-riscv@lists.infradead.org, Vincent Chen <deanbo422@gmail.com>,
 Will Deacon <will@kernel.org>, Greg Ungerer <gerg@linux-m68k.org>,
 linux-arch@vger.kernel.org, linux-s390@vger.kernel.org,
 linux-c6x-dev@linux-c6x.org, Brian Cain <bcain@codeaurora.org>,
 Michael Ellerman <mpe@ellerman.id.au>, Helge Deller <deller@gmx.de>,
 x86@kernel.org, Russell King <linux@armlinux.org.uk>,
 Ley Foon Tan <ley.foon.tan@intel.com>, Mike Rapoport <rppt@linux.ibm.com>,
 Ingo Molnar <mingo@redhat.com>, linux-parisc@vger.kernel.org,
 Mark Salter <msalter@redhat.com>, Matt Turner <mattst88@gmail.com>,
 linux-snps-arc@lists.infradead.org, linux-xtensa@linux-xtensa.org,
 Arnd Bergmann <arnd@arndb.de>, linux-alpha@vger.kernel.org,
 linux-um@lists.infradead.org, linux-m68k@lists.linux-m68k.org,
 Tony Luck <tony.luck@intel.com>, Borislav Petkov <bp@alien8.de>,
 Greentime Hu <green.hu@gmail.com>, Paul Walmsley <paul.walmsley@sifive.com>,
 linux-csky@vger.kernel.org, Guan Xuetao <gxt@pku.edu.cn>,
 linux-arm-kernel@lists.infradead.org, Chris Zankel <chris@zankel.net>,
 Michal Simek <monstr@monstr.eu>,
 Thomas Bogendoerfer <tsbogend@alpha.franken.de>,
 Yoshinori Sato <ysato@users.sourceforge.jp>, Nick Hu <nickhu@andestech.com>,
 linux-mm@kvack.org, Vineet Gupta <vgupta@synopsys.com>,
 linux-mips@vger.kernel.org, openrisc@lists.librecores.org,
 Thomas Gleixner <tglx@linutronix.de>, Richard Weinberger <richard@nod.at>,
 Andrew Morton <akpm@linux-foundation.org>, linuxppc-dev@lists.ozlabs.org,
 "David S. Miller" <davem@davemloft.net>, Mike Rapoport <rppt@kernel.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: openrisc-bounces@lists.librecores.org
Sender: "OpenRISC" <openrisc-bounces@lists.librecores.org>

RnJvbTogTWlrZSBSYXBvcG9ydCA8cnBwdEBsaW51eC5pYm0uY29tPgoKVGhlIGNhY2hlX3BhZ2Uo
KSBhbmQgbm9jYWNoZV9wYWdlKCkgZnVuY3Rpb25zIGFyZSBvbmx5IHVzZWQgYnkgdGhlIG1vdG9y
b2xhCk1NVSB2YXJpYW50IGZvciBzZXR0aW5nIGNhY2hpbmcgYXR0cmlidXRlcyBmb3IgdGhlIHBh
Z2UgdGFibGUgcGFnZXMuCgpNb3ZlIHRoZSBkZWZpbml0aW9ucyBvZiB0aGVzZSBmdW5jdGlvbnMg
ZnJvbQphcmNoL202OGsvaW5jbHVkZS9hc20vbW90b3JvbGFfcGd0YWJsZS5oIGNsb3NlciB0byB0
aGVpciB1c2FnZSBpbgphcmNoL202OGsvbW0vbW90b3JvbGEuYyBhbmQgZHJvcCB1bnVzZWQgZGVm
aW5pdGlvbiBpbgphcmNoL202OGsvaW5jbHVkZS9hc20vbWNmX3BndGFibGUuaC4KClNpZ25lZC1v
ZmYtYnk6IE1pa2UgUmFwb3BvcnQgPHJwcHRAbGludXguaWJtLmNvbT4KQWNrZWQtYnk6IEdyZWcg
VW5nZXJlciA8Z2VyZ0BsaW51eC1tNjhrLm9yZz4KLS0tCiBhcmNoL202OGsvaW5jbHVkZS9hc20v
bWNmX3BndGFibGUuaCAgICAgIHwgNDAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiBhcmNoL202OGsv
aW5jbHVkZS9hc20vbW90b3JvbGFfcGd0YWJsZS5oIHwgNDQgLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tCiBhcmNoL202OGsvbW0vbW90b3JvbGEuYyAgICAgICAgICAgICAgICAgIHwgNDMgKysrKysr
KysrKysrKysrKysrKysrKysKIDMgZmlsZXMgY2hhbmdlZCwgNDMgaW5zZXJ0aW9ucygrKSwgODQg
ZGVsZXRpb25zKC0pCgpkaWZmIC0tZ2l0IGEvYXJjaC9tNjhrL2luY2x1ZGUvYXNtL21jZl9wZ3Rh
YmxlLmggYi9hcmNoL202OGsvaW5jbHVkZS9hc20vbWNmX3BndGFibGUuaAppbmRleCAwMDMxY2Qz
ODdiNzUuLjczN2U4MjYyOTRmMyAxMDA2NDQKLS0tIGEvYXJjaC9tNjhrL2luY2x1ZGUvYXNtL21j
Zl9wZ3RhYmxlLmgKKysrIGIvYXJjaC9tNjhrL2luY2x1ZGUvYXNtL21jZl9wZ3RhYmxlLmgKQEAg
LTMyOCw0NiArMzI4LDYgQEAgZXh0ZXJuIHBnZF90IGtlcm5lbF9wZ19kaXJbUFRSU19QRVJfUEdE
XTsKICNkZWZpbmUgcHRlX29mZnNldF9rZXJuZWwoZGlyLCBhZGRyZXNzKSBcCiAJKChwdGVfdCAq
KSBfX3BtZF9wYWdlKCooZGlyKSkgKyBfX3B0ZV9vZmZzZXQoYWRkcmVzcykpCiAKLS8qCi0gKiBE
aXNhYmxlIGNhY2hpbmcgZm9yIHBhZ2UgYXQgZ2l2ZW4ga2VybmVsIHZpcnR1YWwgYWRkcmVzcy4K
LSAqLwotc3RhdGljIGlubGluZSB2b2lkIG5vY2FjaGVfcGFnZSh2b2lkICp2YWRkcikKLXsKLQlw
Z2RfdCAqZGlyOwotCXA0ZF90ICpwNGRwOwotCXB1ZF90ICpwdWRwOwotCXBtZF90ICpwbWRwOwot
CXB0ZV90ICpwdGVwOwotCXVuc2lnbmVkIGxvbmcgYWRkciA9ICh1bnNpZ25lZCBsb25nKSB2YWRk
cjsKLQotCWRpciA9IHBnZF9vZmZzZXRfayhhZGRyKTsKLQlwNGRwID0gcDRkX29mZnNldChkaXIs
IGFkZHIpOwotCXB1ZHAgPSBwdWRfb2Zmc2V0KHA0ZHAsIGFkZHIpOwotCXBtZHAgPSBwbWRfb2Zm
c2V0KHB1ZHAsIGFkZHIpOwotCXB0ZXAgPSBwdGVfb2Zmc2V0X2tlcm5lbChwbWRwLCBhZGRyKTsK
LQkqcHRlcCA9IHB0ZV9ta25vY2FjaGUoKnB0ZXApOwotfQotCi0vKgotICogRW5hYmxlIGNhY2hp
bmcgZm9yIHBhZ2UgYXQgZ2l2ZW4ga2VybmVsIHZpcnR1YWwgYWRkcmVzcy4KLSAqLwotc3RhdGlj
IGlubGluZSB2b2lkIGNhY2hlX3BhZ2Uodm9pZCAqdmFkZHIpCi17Ci0JcGdkX3QgKmRpcjsKLQlw
NGRfdCAqcDRkcDsKLQlwdWRfdCAqcHVkcDsKLQlwbWRfdCAqcG1kcDsKLQlwdGVfdCAqcHRlcDsK
LQl1bnNpZ25lZCBsb25nIGFkZHIgPSAodW5zaWduZWQgbG9uZykgdmFkZHI7Ci0KLQlkaXIgPSBw
Z2Rfb2Zmc2V0X2soYWRkcik7Ci0JcDRkcCA9IHA0ZF9vZmZzZXQoZGlyLCBhZGRyKTsKLQlwdWRw
ID0gcHVkX29mZnNldChwNGRwLCBhZGRyKTsKLQlwbWRwID0gcG1kX29mZnNldChwdWRwLCBhZGRy
KTsKLQlwdGVwID0gcHRlX29mZnNldF9rZXJuZWwocG1kcCwgYWRkcik7Ci0JKnB0ZXAgPSBwdGVf
bWtjYWNoZSgqcHRlcCk7Ci19Ci0KIC8qCiAgKiBFbmNvZGUgYW5kIGRlLWNvZGUgYSBzd2FwIGVu
dHJ5IChtdXN0IGJlICFwdGVfbm9uZShlKSAmJiAhcHRlX3ByZXNlbnQoZSkpCiAgKi8KZGlmZiAt
LWdpdCBhL2FyY2gvbTY4ay9pbmNsdWRlL2FzbS9tb3Rvcm9sYV9wZ3RhYmxlLmggYi9hcmNoL202
OGsvaW5jbHVkZS9hc20vbW90b3JvbGFfcGd0YWJsZS5oCmluZGV4IDllNWEzZGUyMWUxNS4uZTE1
OTRhY2Y3YzdlIDEwMDY0NAotLS0gYS9hcmNoL202OGsvaW5jbHVkZS9hc20vbW90b3JvbGFfcGd0
YWJsZS5oCisrKyBiL2FyY2gvbTY4ay9pbmNsdWRlL2FzbS9tb3Rvcm9sYV9wZ3RhYmxlLmgKQEAg
LTIyNyw1MCArMjI3LDYgQEAgc3RhdGljIGlubGluZSBwdGVfdCAqcHRlX29mZnNldF9rZXJuZWwo
cG1kX3QgKnBtZHAsIHVuc2lnbmVkIGxvbmcgYWRkcmVzcykKICNkZWZpbmUgcHRlX29mZnNldF9t
YXAocG1kcCxhZGRyZXNzKSAoKHB0ZV90ICopX19wbWRfcGFnZSgqcG1kcCkgKyAoKChhZGRyZXNz
KSA+PiBQQUdFX1NISUZUKSAmIChQVFJTX1BFUl9QVEUgLSAxKSkpCiAjZGVmaW5lIHB0ZV91bm1h
cChwdGUpCQkoKHZvaWQpMCkKIAotLyogUHJpb3IgdG8gY2FsbGluZyB0aGVzZSByb3V0aW5lcywg
dGhlIHBhZ2Ugc2hvdWxkIGhhdmUgYmVlbiBmbHVzaGVkCi0gKiBmcm9tIGJvdGggdGhlIGNhY2hl
IGFuZCBBVEMsIG9yIHRoZSBDUFUgbWlnaHQgbm90IG5vdGljZSB0aGF0IHRoZQotICogY2FjaGUg
c2V0dGluZyBmb3IgdGhlIHBhZ2UgaGFzIGJlZW4gY2hhbmdlZC4gLWpza292Ci0gKi8KLXN0YXRp
YyBpbmxpbmUgdm9pZCBub2NhY2hlX3BhZ2Uodm9pZCAqdmFkZHIpCi17Ci0JdW5zaWduZWQgbG9u
ZyBhZGRyID0gKHVuc2lnbmVkIGxvbmcpdmFkZHI7Ci0KLQlpZiAoQ1BVX0lTXzA0MF9PUl8wNjAp
IHsKLQkJcGdkX3QgKmRpcjsKLQkJcDRkX3QgKnA0ZHA7Ci0JCXB1ZF90ICpwdWRwOwotCQlwbWRf
dCAqcG1kcDsKLQkJcHRlX3QgKnB0ZXA7Ci0KLQkJZGlyID0gcGdkX29mZnNldF9rKGFkZHIpOwot
CQlwNGRwID0gcDRkX29mZnNldChkaXIsIGFkZHIpOwotCQlwdWRwID0gcHVkX29mZnNldChwNGRw
LCBhZGRyKTsKLQkJcG1kcCA9IHBtZF9vZmZzZXQocHVkcCwgYWRkcik7Ci0JCXB0ZXAgPSBwdGVf
b2Zmc2V0X2tlcm5lbChwbWRwLCBhZGRyKTsKLQkJKnB0ZXAgPSBwdGVfbWtub2NhY2hlKCpwdGVw
KTsKLQl9Ci19Ci0KLXN0YXRpYyBpbmxpbmUgdm9pZCBjYWNoZV9wYWdlKHZvaWQgKnZhZGRyKQot
ewotCXVuc2lnbmVkIGxvbmcgYWRkciA9ICh1bnNpZ25lZCBsb25nKXZhZGRyOwotCi0JaWYgKENQ
VV9JU18wNDBfT1JfMDYwKSB7Ci0JCXBnZF90ICpkaXI7Ci0JCXA0ZF90ICpwNGRwOwotCQlwdWRf
dCAqcHVkcDsKLQkJcG1kX3QgKnBtZHA7Ci0JCXB0ZV90ICpwdGVwOwotCi0JCWRpciA9IHBnZF9v
ZmZzZXRfayhhZGRyKTsKLQkJcDRkcCA9IHA0ZF9vZmZzZXQoZGlyLCBhZGRyKTsKLQkJcHVkcCA9
IHB1ZF9vZmZzZXQocDRkcCwgYWRkcik7Ci0JCXBtZHAgPSBwbWRfb2Zmc2V0KHB1ZHAsIGFkZHIp
OwotCQlwdGVwID0gcHRlX29mZnNldF9rZXJuZWwocG1kcCwgYWRkcik7Ci0JCSpwdGVwID0gcHRl
X21rY2FjaGUoKnB0ZXApOwotCX0KLX0KLQogLyogRW5jb2RlIGFuZCBkZS1jb2RlIGEgc3dhcCBl
bnRyeSAobXVzdCBiZSAhcHRlX25vbmUoZSkgJiYgIXB0ZV9wcmVzZW50KGUpKSAqLwogI2RlZmlu
ZSBfX3N3cF90eXBlKHgpCQkoKCh4KS52YWwgPj4gNCkgJiAweGZmKQogI2RlZmluZSBfX3N3cF9v
ZmZzZXQoeCkJCSgoeCkudmFsID4+IDEyKQpkaWZmIC0tZ2l0IGEvYXJjaC9tNjhrL21tL21vdG9y
b2xhLmMgYi9hcmNoL202OGsvbW0vbW90b3JvbGEuYwppbmRleCA5MDRjMmE2NjM5NzcuLjhlNWU3
NDEyMWE3OCAxMDA2NDQKLS0tIGEvYXJjaC9tNjhrL21tL21vdG9yb2xhLmMKKysrIGIvYXJjaC9t
NjhrL21tL21vdG9yb2xhLmMKQEAgLTQ1LDYgKzQ1LDQ5IEBAIHVuc2lnbmVkIGxvbmcgbW1fY2Fj
aGViaXRzOwogRVhQT1JUX1NZTUJPTChtbV9jYWNoZWJpdHMpOwogI2VuZGlmCiAKKy8qIFByaW9y
IHRvIGNhbGxpbmcgdGhlc2Ugcm91dGluZXMsIHRoZSBwYWdlIHNob3VsZCBoYXZlIGJlZW4gZmx1
c2hlZAorICogZnJvbSBib3RoIHRoZSBjYWNoZSBhbmQgQVRDLCBvciB0aGUgQ1BVIG1pZ2h0IG5v
dCBub3RpY2UgdGhhdCB0aGUKKyAqIGNhY2hlIHNldHRpbmcgZm9yIHRoZSBwYWdlIGhhcyBiZWVu
IGNoYW5nZWQuIC1qc2tvdgorICovCitzdGF0aWMgaW5saW5lIHZvaWQgbm9jYWNoZV9wYWdlKHZv
aWQgKnZhZGRyKQoreworCXVuc2lnbmVkIGxvbmcgYWRkciA9ICh1bnNpZ25lZCBsb25nKXZhZGRy
OworCisJaWYgKENQVV9JU18wNDBfT1JfMDYwKSB7CisJCXBnZF90ICpkaXI7CisJCXA0ZF90ICpw
NGRwOworCQlwdWRfdCAqcHVkcDsKKwkJcG1kX3QgKnBtZHA7CisJCXB0ZV90ICpwdGVwOworCisJ
CWRpciA9IHBnZF9vZmZzZXRfayhhZGRyKTsKKwkJcDRkcCA9IHA0ZF9vZmZzZXQoZGlyLCBhZGRy
KTsKKwkJcHVkcCA9IHB1ZF9vZmZzZXQocDRkcCwgYWRkcik7CisJCXBtZHAgPSBwbWRfb2Zmc2V0
KHB1ZHAsIGFkZHIpOworCQlwdGVwID0gcHRlX29mZnNldF9rZXJuZWwocG1kcCwgYWRkcik7CisJ
CSpwdGVwID0gcHRlX21rbm9jYWNoZSgqcHRlcCk7CisJfQorfQorCitzdGF0aWMgaW5saW5lIHZv
aWQgY2FjaGVfcGFnZSh2b2lkICp2YWRkcikKK3sKKwl1bnNpZ25lZCBsb25nIGFkZHIgPSAodW5z
aWduZWQgbG9uZyl2YWRkcjsKKworCWlmIChDUFVfSVNfMDQwX09SXzA2MCkgeworCQlwZ2RfdCAq
ZGlyOworCQlwNGRfdCAqcDRkcDsKKwkJcHVkX3QgKnB1ZHA7CisJCXBtZF90ICpwbWRwOworCQlw
dGVfdCAqcHRlcDsKKworCQlkaXIgPSBwZ2Rfb2Zmc2V0X2soYWRkcik7CisJCXA0ZHAgPSBwNGRf
b2Zmc2V0KGRpciwgYWRkcik7CisJCXB1ZHAgPSBwdWRfb2Zmc2V0KHA0ZHAsIGFkZHIpOworCQlw
bWRwID0gcG1kX29mZnNldChwdWRwLCBhZGRyKTsKKwkJcHRlcCA9IHB0ZV9vZmZzZXRfa2VybmVs
KHBtZHAsIGFkZHIpOworCQkqcHRlcCA9IHB0ZV9ta2NhY2hlKCpwdGVwKTsKKwl9Cit9CiAKIC8q
CiAgKiBNb3Rvcm9sYSA2ODB4MCB1c2VyJ3MgbWFudWFsIHJlY29tbWVuZHMgdXNpbmcgdW5jYWNo
ZWQgbWVtb3J5IGZvciBhZGRyZXNzCi0tIAoyLjI2LjIKCl9fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fCk9wZW5SSVNDIG1haWxpbmcgbGlzdApPcGVuUklTQ0Bs
aXN0cy5saWJyZWNvcmVzLm9yZwpodHRwczovL2xpc3RzLmxpYnJlY29yZXMub3JnL2xpc3RpbmZv
L29wZW5yaXNjCg==
