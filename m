Return-Path: <openrisc-bounces@lists.librecores.org>
X-Original-To: lists+openrisc@lfdr.de
Delivered-To: lists+openrisc@lfdr.de
Received: from mail.librecores.org (lists.librecores.org [88.198.125.70])
	by mail.lfdr.de (Postfix) with ESMTP id D76254628C5
	for <lists+openrisc@lfdr.de>; Tue, 30 Nov 2021 01:01:59 +0100 (CET)
Received: from [172.31.1.100] (localhost.localdomain [127.0.0.1])
	by mail.librecores.org (Postfix) with ESMTP id 29B4C241C5;
	Tue, 30 Nov 2021 01:01:59 +0100 (CET)
Received: from mail-ot1-f52.google.com (mail-ot1-f52.google.com
 [209.85.210.52])
 by mail.librecores.org (Postfix) with ESMTPS id 57394240FE
 for <openrisc@lists.librecores.org>; Tue, 30 Nov 2021 01:01:56 +0100 (CET)
Received: by mail-ot1-f52.google.com with SMTP id
 x43-20020a056830246b00b00570d09d34ebso27863383otr.2
 for <openrisc@lists.librecores.org>; Mon, 29 Nov 2021 16:01:56 -0800 (PST)
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20210112;
 h=x-gm-message-state:date:from:to:cc:subject:message-id:references
 :mime-version:content-disposition:in-reply-to;
 bh=aV2EodJh346t+Wbm3YErslm1vIVsKkg3za0JyncYukQ=;
 b=dufCRBgqmEllvxYhRt0iwyRLn/VvXuMIq/8t5gVFgY5ORVV7iio4LHUvkN3PMTXicO
 PvMG6Xont3/8bPXdHGz1fb7F9tEe6S+S4HfaDAjaKIFAc9DxhDCX2OoLQ+ANQPutAJPK
 YKtqLgZ7lrzh4TO7GP4dvLHz4e2WDTJcqsOqZGjFqPcVmXRx0Tif7lZS30qJHcGE7F3X
 mF+cTcd1SljEfBMu0b/OBICOLG3z99il5d3uFXdb9y0Famd27K5gZJxTTFgDRlWQFYDw
 XWlxnrYjYz71Bl6Xq+O+M/q2XFeomk1h4hxmoJatyyYRU44BgeSg1D898pr64Yddqx0i
 2mFg==
X-Gm-Message-State: AOAM531aq920pr138jij23/xbYTAM9ESzPdeIKuOhftBBGk0vpptkaxq
 MyB3DoRAopDH47vJeeQ2lg==
X-Google-Smtp-Source: ABdhPJxGmP7W+hR5b8+EQ325tbSTlD38AnnrDu+nyHVAQB1cJ7/x12F1fry2XTHV2cl6Sy01eQGOWA==
X-Received: by 2002:a05:6830:4389:: with SMTP id
 s9mr47068865otv.97.1638230514850; 
 Mon, 29 Nov 2021 16:01:54 -0800 (PST)
Received: from robh.at.kernel.org (66-90-148-213.dyn.grandenetworks.net.
 [66.90.148.213])
 by smtp.gmail.com with ESMTPSA id s17sm2465101ooj.42.2021.11.29.16.01.51
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Mon, 29 Nov 2021 16:01:53 -0800 (PST)
Received: (nullmailer pid 855745 invoked by uid 1000);
 Tue, 30 Nov 2021 00:01:51 -0000
Date: Mon, 29 Nov 2021 18:01:50 -0600
From: Rob Herring <robh@kernel.org>
To: Calvin Zhang <calvinzhang.cool@gmail.com>
Message-ID: <YaVp7ubpCLN1xWfF@robh.at.kernel.org>
References: <20211119075844.2902592-1-calvinzhang.cool@gmail.com>
 <20211119075844.2902592-2-calvinzhang.cool@gmail.com>
MIME-Version: 1.0
Content-Disposition: inline
In-Reply-To: <20211119075844.2902592-2-calvinzhang.cool@gmail.com>
Subject: Re: [OpenRISC] [PATCH 1/2] of: Sort reserved_mem related code
X-BeenThere: openrisc@lists.librecores.org
X-Mailman-Version: 2.1.26
Precedence: list
List-Id: Discussion around the OpenRISC processor
 <openrisc.lists.librecores.org>
List-Unsubscribe: <https://lists.librecores.org/options/openrisc>,
 <mailto:openrisc-request@lists.librecores.org?subject=unsubscribe>
List-Archive: <http://lists.librecores.org/pipermail/openrisc/>
List-Post: <mailto:openrisc@lists.librecores.org>
List-Help: <mailto:openrisc-request@lists.librecores.org?subject=help>
List-Subscribe: <https://lists.librecores.org/listinfo/openrisc>,
 <mailto:openrisc-request@lists.librecores.org?subject=subscribe>
Cc: Mark Rutland <mark.rutland@arm.com>,
 Kefeng Wang <wangkefeng.wang@huawei.com>, Rich Felker <dalias@libc.org>,
 Jinyang He <hejinyang@loongson.cn>, David Hildenbrand <david@redhat.com>,
 Benjamin Herrenschmidt <benh@kernel.crashing.org>,
 Palmer Dabbelt <palmerdabbelt@google.com>, linux-kernel@vger.kernel.org,
 Max Filippov <jcmvbkbc@gmail.com>, Anup Patel <anup.patel@wdc.com>,
 Guo Ren <guoren@linux.alibaba.com>, Guo Ren <guoren@kernel.org>,
 linux-csky@vger.kernel.org, Nick Kossifidis <mick@ics.forth.gr>,
 Vladimir Isaev <isaev@synopsys.com>, Tiezhu Yang <yangtiezhu@loongson.cn>,
 Vincent Chen <deanbo422@gmail.com>, Will Deacon <will@kernel.org>,
 Markus Elfring <elfring@users.sourceforge.net>,
 Vitaly Wool <vitaly.wool@konsulko.com>, Jonas Bonn <jonas@southpole.se>,
 devicetree@vger.kernel.org, linux-snps-arc@lists.infradead.org,
 Yoshinori Sato <ysato@users.sourceforge.jp>, linux-sh@vger.kernel.org,
 Michael Ellerman <mpe@ellerman.id.au>,
 "Rafael J. Wysocki" <rafael.j.wysocki@intel.com>,
 Christophe JAILLET <christophe.jaillet@wanadoo.fr>,
 Russell King <linux@armlinux.org.uk>, Ley Foon Tan <ley.foon.tan@intel.com>,
 "Aneesh Kumar K.V" <aneesh.kumar@linux.ibm.com>,
 Catalin Marinas <catalin.marinas@arm.com>,
 Ganesh Goudar <ganeshgr@linux.ibm.com>, David Brazdil <dbrazdil@google.com>,
 linux-riscv@lists.infradead.org, Guenter Roeck <linux@roeck-us.net>,
 uclinux-h8-devel@lists.sourceforge.jp, linux-xtensa@linux-xtensa.org,
 Albert Ou <aou@eecs.berkeley.edu>, Arnd Bergmann <arnd@arndb.de>,
 Anshuman Khandual <anshuman.khandual@arm.com>,
 Vineet Gupta <vgupta@kernel.org>, Andreas Oetken <andreas.oetken@siemens.com>,
 "Russell King \(Oracle\)" <rmk+kernel@armlinux.org.uk>,
 openrisc@lists.librecores.org,
 Alexander Sverdlin <alexander.sverdlin@nokia.com>,
 Greentime Hu <green.hu@gmail.com>, Paul Walmsley <paul.walmsley@sifive.com>,
 Andy Shevchenko <andriy.shevchenko@linux.intel.com>,
 Atish Patra <atish.patra@wdc.com>, linux-arm-kernel@lists.infradead.org,
 Andrey Konovalov <andreyknvl@gmail.com>,
 Christophe Leroy <christophe.leroy@c-s.fr>, Chris Zankel <chris@zankel.net>,
 Thomas Bogendoerfer <tsbogend@alpha.franken.de>,
 Alexandre Ghiti <alex@ghiti.fr>, Nick Hu <nickhu@andestech.com>,
 Wolfram Sang <wsa+renesas@sang-engineering.com>, linux-mips@vger.kernel.org,
 Randy Dunlap <rdunlap@infradead.org>, Frank Rowand <frowand.list@gmail.com>,
 Serge Semin <Sergey.Semin@baikalelectronics.ru>,
 Dinh Nguyen <dinguyen@kernel.org>, Zhang Yunkai <zhang.yunkai@zte.com.cn>,
 Palmer Dabbelt <palmer@dabbelt.com>, Souptick Joarder <jrdr.linux@gmail.com>,
 Marc Zyngier <maz@kernel.org>, Mauri Sandberg <sandberg@mailfence.com>,
 Paul Mackerras <paulus@samba.org>, Andrew Morton <akpm@linux-foundation.org>,
 linuxppc-dev@lists.ozlabs.org, Mike Rapoport <rppt@kernel.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: openrisc-bounces@lists.librecores.org
Sender: "OpenRISC" <openrisc-bounces@lists.librecores.org>

T24gRnJpLCBOb3YgMTksIDIwMjEgYXQgMDM6NTg6MThQTSArMDgwMCwgQ2FsdmluIFpoYW5nIHdy
b3RlOgo+IE1vdmUgY29kZSBhYm91dCBwYXJzaW5nIC9yZXNlcnZlZC1tZW1vcnkgYW5kIGluaXRp
YWxpemluZyBvZgo+IHJlc2VydmVkX21lbXMgYXJyYXkgdG8gb2ZfcmVzZXJ2ZWRfbWVtLmMgZm9y
IGJldHRlciBtb2R1bGFyaXR5Lgo+IAo+IFJlbmFtZSBhcnJheSBuYW1lIGZyb20gcmVzZXJ2ZWRf
bWVtIHRvIHJlc2VydmVkX21lbXMgdG8gZGlzdGluZ3Vpc2gKPiBmcm9tIHR5cGUgZGVmaW5pdGlv
bi4KPiAKPiBTaWduZWQtb2ZmLWJ5OiBDYWx2aW4gWmhhbmcgPGNhbHZpbnpoYW5nLmNvb2xAZ21h
aWwuY29tPgo+IC0tLQo+ICBkcml2ZXJzL29mL2ZkdC5jICAgICAgICAgICAgICAgIHwgMTA4ICst
LS0tLS0tLS0tLS0tLS0tLS0tLQo+ICBkcml2ZXJzL29mL29mX3ByaXZhdGUuaCAgICAgICAgIHwg
IDEyICsrLQo+ICBkcml2ZXJzL29mL29mX3Jlc2VydmVkX21lbS5jICAgIHwgMTYzICsrKysrKysr
KysrKysrKysrKysrKysrKysrLS0tLS0tCj4gIGluY2x1ZGUvbGludXgvb2ZfcmVzZXJ2ZWRfbWVt
LmggfCAgIDQgKwo+ICA0IGZpbGVzIGNoYW5nZWQsIDE0OSBpbnNlcnRpb25zKCspLCAxMzggZGVs
ZXRpb25zKC0pCj4gCj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvb2YvZmR0LmMgYi9kcml2ZXJzL29m
L2ZkdC5jCj4gaW5kZXggYmRjYTM1Mjg0Y2ViLi40NDVhZjRlNjkzMDAgMTAwNjQ0Cj4gLS0tIGEv
ZHJpdmVycy9vZi9mZHQuYwo+ICsrKyBiL2RyaXZlcnMvb2YvZmR0LmMKPiBAQCAtODAsNyArODAs
NyBAQCB2b2lkIF9faW5pdCBvZl9mZHRfbGltaXRfbWVtb3J5KGludCBsaW1pdCkKPiAgCX0KPiAg
fQo+ICAKPiAtc3RhdGljIGJvb2wgb2ZfZmR0X2RldmljZV9pc19hdmFpbGFibGUoY29uc3Qgdm9p
ZCAqYmxvYiwgdW5zaWduZWQgbG9uZyBub2RlKQo+ICtib29sIG9mX2ZkdF9kZXZpY2VfaXNfYXZh
aWxhYmxlKGNvbnN0IHZvaWQgKmJsb2IsIHVuc2lnbmVkIGxvbmcgbm9kZSkKPiAgewo+ICAJY29u
c3QgY2hhciAqc3RhdHVzID0gZmR0X2dldHByb3AoYmxvYiwgbm9kZSwgInN0YXR1cyIsIE5VTEwp
Owo+ICAKPiBAQCAtNDc2LDcgKzQ3Niw3IEBAIHZvaWQgKmluaXRpYWxfYm9vdF9wYXJhbXMgX19y
b19hZnRlcl9pbml0Owo+ICAKPiAgc3RhdGljIHUzMiBvZl9mZHRfY3JjMzI7Cj4gIAo+IC1zdGF0
aWMgaW50IF9faW5pdCBlYXJseV9pbml0X2R0X3Jlc2VydmVfbWVtb3J5X2FyY2gocGh5c19hZGRy
X3QgYmFzZSwKPiAraW50IF9faW5pdCBlYXJseV9pbml0X2R0X3Jlc2VydmVfbWVtb3J5X2FyY2go
cGh5c19hZGRyX3QgYmFzZSwKPiAgCQkJCQlwaHlzX2FkZHJfdCBzaXplLCBib29sIG5vbWFwKQoK
SSB0aGluayB5b3UgY2FuIG1vdmUgdGhpcyBmdW5jdGlvbiB0b28gaWYgeW91IGNoYW5nZSB0aGUg
bm9tYXA9PWZhbHNlIApjYWxsZXJzIHRvIGp1c3QgY2FsbCBtZW1ibG9ja19yZXNlcnZlIGRpcmVj
dGx5LgoKCj4gIHsKPiAgCWlmIChub21hcCkgewo+IEBAIC00OTIsMTA4ICs0OTIsNiBAQCBzdGF0
aWMgaW50IF9faW5pdCBlYXJseV9pbml0X2R0X3Jlc2VydmVfbWVtb3J5X2FyY2gocGh5c19hZGRy
X3QgYmFzZSwKPiAgCXJldHVybiBtZW1ibG9ja19yZXNlcnZlKGJhc2UsIHNpemUpOwo+ICB9Cj4g
IAo+IC0vKgo+IC0gKiBfX3Jlc2VydmVkX21lbV9yZXNlcnZlX3JlZygpIC0gcmVzZXJ2ZSBhbGwg
bWVtb3J5IGRlc2NyaWJlZCBpbiAncmVnJyBwcm9wZXJ0eQo+IC0gKi8KPiAtc3RhdGljIGludCBf
X2luaXQgX19yZXNlcnZlZF9tZW1fcmVzZXJ2ZV9yZWcodW5zaWduZWQgbG9uZyBub2RlLAo+IC0J
CQkJCSAgICAgY29uc3QgY2hhciAqdW5hbWUpCj4gLXsKPiAtCWludCB0X2xlbiA9IChkdF9yb290
X2FkZHJfY2VsbHMgKyBkdF9yb290X3NpemVfY2VsbHMpICogc2l6ZW9mKF9fYmUzMik7Cj4gLQlw
aHlzX2FkZHJfdCBiYXNlLCBzaXplOwo+IC0JaW50IGxlbjsKPiAtCWNvbnN0IF9fYmUzMiAqcHJv
cDsKPiAtCWludCBmaXJzdCA9IDE7Cj4gLQlib29sIG5vbWFwOwo+IC0KPiAtCXByb3AgPSBvZl9n
ZXRfZmxhdF9kdF9wcm9wKG5vZGUsICJyZWciLCAmbGVuKTsKPiAtCWlmICghcHJvcCkKPiAtCQly
ZXR1cm4gLUVOT0VOVDsKPiAtCj4gLQlpZiAobGVuICYmIGxlbiAlIHRfbGVuICE9IDApIHsKPiAt
CQlwcl9lcnIoIlJlc2VydmVkIG1lbW9yeTogaW52YWxpZCByZWcgcHJvcGVydHkgaW4gJyVzJywg
c2tpcHBpbmcgbm9kZS5cbiIsCj4gLQkJICAgICAgIHVuYW1lKTsKPiAtCQlyZXR1cm4gLUVJTlZB
TDsKPiAtCX0KPiAtCj4gLQlub21hcCA9IG9mX2dldF9mbGF0X2R0X3Byb3Aobm9kZSwgIm5vLW1h
cCIsIE5VTEwpICE9IE5VTEw7Cj4gLQo+IC0Jd2hpbGUgKGxlbiA+PSB0X2xlbikgewo+IC0JCWJh
c2UgPSBkdF9tZW1fbmV4dF9jZWxsKGR0X3Jvb3RfYWRkcl9jZWxscywgJnByb3ApOwo+IC0JCXNp
emUgPSBkdF9tZW1fbmV4dF9jZWxsKGR0X3Jvb3Rfc2l6ZV9jZWxscywgJnByb3ApOwo+IC0KPiAt
CQlpZiAoc2l6ZSAmJgo+IC0JCSAgICBlYXJseV9pbml0X2R0X3Jlc2VydmVfbWVtb3J5X2FyY2go
YmFzZSwgc2l6ZSwgbm9tYXApID09IDApCj4gLQkJCXByX2RlYnVnKCJSZXNlcnZlZCBtZW1vcnk6
IHJlc2VydmVkIHJlZ2lvbiBmb3Igbm9kZSAnJXMnOiBiYXNlICVwYSwgc2l6ZSAlbHUgTWlCXG4i
LAo+IC0JCQkJdW5hbWUsICZiYXNlLCAodW5zaWduZWQgbG9uZykoc2l6ZSAvIFNaXzFNKSk7Cj4g
LQkJZWxzZQo+IC0JCQlwcl9pbmZvKCJSZXNlcnZlZCBtZW1vcnk6IGZhaWxlZCB0byByZXNlcnZl
IG1lbW9yeSBmb3Igbm9kZSAnJXMnOiBiYXNlICVwYSwgc2l6ZSAlbHUgTWlCXG4iLAo+IC0JCQkJ
dW5hbWUsICZiYXNlLCAodW5zaWduZWQgbG9uZykoc2l6ZSAvIFNaXzFNKSk7Cj4gLQo+IC0JCWxl
biAtPSB0X2xlbjsKPiAtCQlpZiAoZmlyc3QpIHsKPiAtCQkJZmR0X3Jlc2VydmVkX21lbV9zYXZl
X25vZGUobm9kZSwgdW5hbWUsIGJhc2UsIHNpemUpOwo+IC0JCQlmaXJzdCA9IDA7Cj4gLQkJfQo+
IC0JfQo+IC0JcmV0dXJuIDA7Cj4gLX0KPiAtCj4gLS8qCj4gLSAqIF9fcmVzZXJ2ZWRfbWVtX2No
ZWNrX3Jvb3QoKSAtIGNoZWNrIGlmICNzaXplLWNlbGxzLCAjYWRkcmVzcy1jZWxscyBwcm92aWRl
ZAo+IC0gKiBpbiAvcmVzZXJ2ZWQtbWVtb3J5IG1hdGNoZXMgdGhlIHZhbHVlcyBzdXBwb3J0ZWQg
YnkgdGhlIGN1cnJlbnQgaW1wbGVtZW50YXRpb24sCj4gLSAqIGFsc28gY2hlY2sgaWYgcmFuZ2Vz
IHByb3BlcnR5IGhhcyBiZWVuIHByb3ZpZGVkCj4gLSAqLwo+IC1zdGF0aWMgaW50IF9faW5pdCBf
X3Jlc2VydmVkX21lbV9jaGVja19yb290KHVuc2lnbmVkIGxvbmcgbm9kZSkKPiAtewo+IC0JY29u
c3QgX19iZTMyICpwcm9wOwo+IC0KPiAtCXByb3AgPSBvZl9nZXRfZmxhdF9kdF9wcm9wKG5vZGUs
ICIjc2l6ZS1jZWxscyIsIE5VTEwpOwo+IC0JaWYgKCFwcm9wIHx8IGJlMzJfdG9fY3B1cChwcm9w
KSAhPSBkdF9yb290X3NpemVfY2VsbHMpCj4gLQkJcmV0dXJuIC1FSU5WQUw7Cj4gLQo+IC0JcHJv
cCA9IG9mX2dldF9mbGF0X2R0X3Byb3Aobm9kZSwgIiNhZGRyZXNzLWNlbGxzIiwgTlVMTCk7Cj4g
LQlpZiAoIXByb3AgfHwgYmUzMl90b19jcHVwKHByb3ApICE9IGR0X3Jvb3RfYWRkcl9jZWxscykK
PiAtCQlyZXR1cm4gLUVJTlZBTDsKPiAtCj4gLQlwcm9wID0gb2ZfZ2V0X2ZsYXRfZHRfcHJvcChu
b2RlLCAicmFuZ2VzIiwgTlVMTCk7Cj4gLQlpZiAoIXByb3ApCj4gLQkJcmV0dXJuIC1FSU5WQUw7
Cj4gLQlyZXR1cm4gMDsKPiAtfQo+IC0KPiAtLyoKPiAtICogZmR0X3NjYW5fcmVzZXJ2ZWRfbWVt
KCkgLSBzY2FuIGEgc2luZ2xlIEZEVCBub2RlIGZvciByZXNlcnZlZCBtZW1vcnkKPiAtICovCj4g
LXN0YXRpYyBpbnQgX19pbml0IGZkdF9zY2FuX3Jlc2VydmVkX21lbSh2b2lkKQo+IC17Cj4gLQlp
bnQgbm9kZSwgY2hpbGQ7Cj4gLQljb25zdCB2b2lkICpmZHQgPSBpbml0aWFsX2Jvb3RfcGFyYW1z
Owo+IC0KPiAtCW5vZGUgPSBmZHRfcGF0aF9vZmZzZXQoZmR0LCAiL3Jlc2VydmVkLW1lbW9yeSIp
Owo+IC0JaWYgKG5vZGUgPCAwKQo+IC0JCXJldHVybiAtRU5PREVWOwo+IC0KPiAtCWlmIChfX3Jl
c2VydmVkX21lbV9jaGVja19yb290KG5vZGUpICE9IDApIHsKPiAtCQlwcl9lcnIoIlJlc2VydmVk
IG1lbW9yeTogdW5zdXBwb3J0ZWQgbm9kZSBmb3JtYXQsIGlnbm9yaW5nXG4iKTsKPiAtCQlyZXR1
cm4gLUVJTlZBTDsKPiAtCX0KPiAtCj4gLQlmZHRfZm9yX2VhY2hfc3Vibm9kZShjaGlsZCwgZmR0
LCBub2RlKSB7Cj4gLQkJY29uc3QgY2hhciAqdW5hbWU7Cj4gLQkJaW50IGVycjsKPiAtCj4gLQkJ
aWYgKCFvZl9mZHRfZGV2aWNlX2lzX2F2YWlsYWJsZShmZHQsIGNoaWxkKSkKPiAtCQkJY29udGlu
dWU7Cj4gLQo+IC0JCXVuYW1lID0gZmR0X2dldF9uYW1lKGZkdCwgY2hpbGQsIE5VTEwpOwo+IC0K
PiAtCQllcnIgPSBfX3Jlc2VydmVkX21lbV9yZXNlcnZlX3JlZyhjaGlsZCwgdW5hbWUpOwo+IC0J
CWlmIChlcnIgPT0gLUVOT0VOVCAmJiBvZl9nZXRfZmxhdF9kdF9wcm9wKGNoaWxkLCAic2l6ZSIs
IE5VTEwpKQo+IC0JCQlmZHRfcmVzZXJ2ZWRfbWVtX3NhdmVfbm9kZShjaGlsZCwgdW5hbWUsIDAs
IDApOwo+IC0JfQo+IC0JcmV0dXJuIDA7Cj4gLX0KPiAtCj4gIC8qCj4gICAqIGZkdF9yZXNlcnZl
X2VsZmNvcmVoZHIoKSAtIHJlc2VydmVzIG1lbW9yeSBmb3IgZWxmIGNvcmUgaGVhZGVyCj4gICAq
Cj4gQEAgLTY0Miw3ICs1NDAsNyBAQCB2b2lkIF9faW5pdCBlYXJseV9pbml0X2ZkdF9zY2FuX3Jl
c2VydmVkX21lbSh2b2lkKQo+ICAJfQo+ICAKPiAgCWZkdF9zY2FuX3Jlc2VydmVkX21lbSgpOwo+
IC0JZmR0X2luaXRfcmVzZXJ2ZWRfbWVtKCk7Cj4gKwlvZl9yZXNlcnZlZF9tZW1faW5pdCgpOwo+
ICAJZmR0X3Jlc2VydmVfZWxmY29yZWhkcigpOwo+ICB9Cj4gIAo+IGRpZmYgLS1naXQgYS9kcml2
ZXJzL29mL29mX3ByaXZhdGUuaCBiL2RyaXZlcnMvb2Yvb2ZfcHJpdmF0ZS5oCj4gaW5kZXggOTMy
NDQ4MzM5N2Y2Li44OGI2N2Y4ZWQ2OTggMTAwNjQ0Cj4gLS0tIGEvZHJpdmVycy9vZi9vZl9wcml2
YXRlLmgKPiArKysgYi9kcml2ZXJzL29mL29mX3ByaXZhdGUuaAo+IEBAIC0xNjMsOCArMTYzLDE0
IEBAIHN0YXRpYyBpbmxpbmUgaW50IG9mX2RtYV9nZXRfcmFuZ2Uoc3RydWN0IGRldmljZV9ub2Rl
ICpucCwKPiAgfQo+ICAjZW5kaWYKPiAgCj4gLXZvaWQgZmR0X2luaXRfcmVzZXJ2ZWRfbWVtKHZv
aWQpOwo+IC12b2lkIGZkdF9yZXNlcnZlZF9tZW1fc2F2ZV9ub2RlKHVuc2lnbmVkIGxvbmcgbm9k
ZSwgY29uc3QgY2hhciAqdW5hbWUsCj4gLQkJCSAgICAgICBwaHlzX2FkZHJfdCBiYXNlLCBwaHlz
X2FkZHJfdCBzaXplKTsKPiArYm9vbCBvZl9mZHRfZGV2aWNlX2lzX2F2YWlsYWJsZShjb25zdCB2
b2lkICpibG9iLCB1bnNpZ25lZCBsb25nIG5vZGUpOwo+ICtpbnQgZWFybHlfaW5pdF9kdF9yZXNl
cnZlX21lbW9yeV9hcmNoKHBoeXNfYWRkcl90IGJhc2UsCj4gKwkJCQkJcGh5c19hZGRyX3Qgc2l6
ZSwgYm9vbCBub21hcCk7Cj4gKyNpZmRlZiBDT05GSUdfT0ZfUkVTRVJWRURfTUVNCj4gK2ludCBm
ZHRfc2Nhbl9yZXNlcnZlZF9tZW0odm9pZCk7Cj4gKyNlbHNlCj4gK3N0YXRpYyBpbmxpbmUgaW50
IGZkdF9zY2FuX3Jlc2VydmVkX21lbSh2b2lkKSB7IH0KPiArI2VuZGlmCj4gKwo+ICAKPiAgI2Vu
ZGlmIC8qIF9MSU5VWF9PRl9QUklWQVRFX0ggKi8KPiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9vZi9v
Zl9yZXNlcnZlZF9tZW0uYyBiL2RyaXZlcnMvb2Yvb2ZfcmVzZXJ2ZWRfbWVtLmMKPiBpbmRleCA5
YzBmYjk2MmMyMmIuLjc4NGNmYzVjZDI1MSAxMDA2NDQKPiAtLS0gYS9kcml2ZXJzL29mL29mX3Jl
c2VydmVkX21lbS5jCj4gKysrIGIvZHJpdmVycy9vZi9vZl9yZXNlcnZlZF9tZW0uYwo+IEBAIC0y
MCwxMyArMjAsMTQgQEAKPiAgI2luY2x1ZGUgPGxpbnV4L29mX3Jlc2VydmVkX21lbS5oPgo+ICAj
aW5jbHVkZSA8bGludXgvc29ydC5oPgo+ICAjaW5jbHVkZSA8bGludXgvc2xhYi5oPgo+ICsjaW5j
bHVkZSA8bGludXgvbGliZmR0Lmg+Cj4gICNpbmNsdWRlIDxsaW51eC9tZW1ibG9jay5oPgo+ICAj
aW5jbHVkZSA8bGludXgva21lbWxlYWsuaD4KPiAgCj4gICNpbmNsdWRlICJvZl9wcml2YXRlLmgi
Cj4gIAo+ICAjZGVmaW5lIE1BWF9SRVNFUlZFRF9SRUdJT05TCTY0Cj4gLXN0YXRpYyBzdHJ1Y3Qg
cmVzZXJ2ZWRfbWVtIHJlc2VydmVkX21lbVtNQVhfUkVTRVJWRURfUkVHSU9OU107Cj4gK3N0YXRp
YyBzdHJ1Y3QgcmVzZXJ2ZWRfbWVtIHJlc2VydmVkX21lbXNbTUFYX1JFU0VSVkVEX1JFR0lPTlNd
OwoKV291bGQgYmUgYSBiaXQgZWFzaWVyIHRvIHJldmlldyB3aXRob3V0IHRoZSByZW5hbWUuCgoK
PiAgc3RhdGljIGludCByZXNlcnZlZF9tZW1fY291bnQ7Cj4gIAo+ICBzdGF0aWMgaW50IF9faW5p
dCBlYXJseV9pbml0X2R0X2FsbG9jX3Jlc2VydmVkX21lbW9yeV9hcmNoKHBoeXNfYWRkcl90IHNp
emUsCj4gQEAgLTU2LDEyICs1NywxMiBAQCBzdGF0aWMgaW50IF9faW5pdCBlYXJseV9pbml0X2R0
X2FsbG9jX3Jlc2VydmVkX21lbW9yeV9hcmNoKHBoeXNfYWRkcl90IHNpemUsCj4gIC8qCj4gICAq
IGZkdF9yZXNlcnZlZF9tZW1fc2F2ZV9ub2RlKCkgLSBzYXZlIGZkdCBub2RlIGZvciBzZWNvbmQg
cGFzcyBpbml0aWFsaXphdGlvbgo+ICAgKi8KPiAtdm9pZCBfX2luaXQgZmR0X3Jlc2VydmVkX21l
bV9zYXZlX25vZGUodW5zaWduZWQgbG9uZyBub2RlLCBjb25zdCBjaGFyICp1bmFtZSwKPiArc3Rh
dGljIHZvaWQgX19pbml0IGZkdF9yZXNlcnZlZF9tZW1fc2F2ZV9ub2RlKHVuc2lnbmVkIGxvbmcg
bm9kZSwgY29uc3QgY2hhciAqdW5hbWUsCj4gIAkJCQkgICAgICBwaHlzX2FkZHJfdCBiYXNlLCBw
aHlzX2FkZHJfdCBzaXplKQo+ICB7Cj4gLQlzdHJ1Y3QgcmVzZXJ2ZWRfbWVtICpybWVtID0gJnJl
c2VydmVkX21lbVtyZXNlcnZlZF9tZW1fY291bnRdOwo+ICsJc3RydWN0IHJlc2VydmVkX21lbSAq
cm1lbSA9ICZyZXNlcnZlZF9tZW1zW3Jlc2VydmVkX21lbV9jb3VudF07Cj4gIAo+IC0JaWYgKHJl
c2VydmVkX21lbV9jb3VudCA9PSBBUlJBWV9TSVpFKHJlc2VydmVkX21lbSkpIHsKPiArCWlmIChy
ZXNlcnZlZF9tZW1fY291bnQgPT0gQVJSQVlfU0laRShyZXNlcnZlZF9tZW1zKSkgewo+ICAJCXBy
X2Vycigibm90IGVub3VnaCBzcGFjZSBmb3IgYWxsIGRlZmluZWQgcmVnaW9ucy5cbiIpOwo+ICAJ
CXJldHVybjsKPiAgCX0KPiBAQCAtMTczLDI5ICsxNzQsMTA1IEBAIHN0YXRpYyBjb25zdCBzdHJ1
Y3Qgb2ZfZGV2aWNlX2lkIF9fcm1lbV9vZl90YWJsZV9zZW50aW5lbAo+ICAJX191c2VkIF9fc2Vj
dGlvbigiX19yZXNlcnZlZG1lbV9vZl90YWJsZV9lbmQiKTsKPiAgCj4gIC8qCj4gLSAqIF9fcmVz
ZXJ2ZWRfbWVtX2luaXRfbm9kZSgpIC0gY2FsbCByZWdpb24gc3BlY2lmaWMgcmVzZXJ2ZWQgbWVt
b3J5IGluaXQgY29kZQo+ICsgKiBfX3Jlc2VydmVkX21lbV9jaGVja19yb290KCkgLSBjaGVjayBp
ZiAjc2l6ZS1jZWxscywgI2FkZHJlc3MtY2VsbHMgcHJvdmlkZWQKPiArICogaW4gL3Jlc2VydmVk
LW1lbW9yeSBtYXRjaGVzIHRoZSB2YWx1ZXMgc3VwcG9ydGVkIGJ5IHRoZSBjdXJyZW50IGltcGxl
bWVudGF0aW9uLAo+ICsgKiBhbHNvIGNoZWNrIGlmIHJhbmdlcyBwcm9wZXJ0eSBoYXMgYmVlbiBw
cm92aWRlZAo+ICAgKi8KPiAtc3RhdGljIGludCBfX2luaXQgX19yZXNlcnZlZF9tZW1faW5pdF9u
b2RlKHN0cnVjdCByZXNlcnZlZF9tZW0gKnJtZW0pCj4gK3N0YXRpYyBpbnQgX19pbml0IF9fcmVz
ZXJ2ZWRfbWVtX2NoZWNrX3Jvb3QodW5zaWduZWQgbG9uZyBub2RlKQo+ICB7Cj4gLQlleHRlcm4g
Y29uc3Qgc3RydWN0IG9mX2RldmljZV9pZCBfX3Jlc2VydmVkbWVtX29mX3RhYmxlW107Cj4gLQlj
b25zdCBzdHJ1Y3Qgb2ZfZGV2aWNlX2lkICppOwo+IC0JaW50IHJldCA9IC1FTk9FTlQ7Cj4gKwlj
b25zdCBfX2JlMzIgKnByb3A7Cj4gIAo+IC0JZm9yIChpID0gX19yZXNlcnZlZG1lbV9vZl90YWJs
ZTsgaSA8ICZfX3JtZW1fb2ZfdGFibGVfc2VudGluZWw7IGkrKykgewo+IC0JCXJlc2VydmVkbWVt
X29mX2luaXRfZm4gaW5pdGZuID0gaS0+ZGF0YTsKPiAtCQljb25zdCBjaGFyICpjb21wYXQgPSBp
LT5jb21wYXRpYmxlOwo+ICsJcHJvcCA9IG9mX2dldF9mbGF0X2R0X3Byb3Aobm9kZSwgIiNzaXpl
LWNlbGxzIiwgTlVMTCk7Cj4gKwlpZiAoIXByb3AgfHwgYmUzMl90b19jcHVwKHByb3ApICE9IGR0
X3Jvb3Rfc2l6ZV9jZWxscykKPiArCQlyZXR1cm4gLUVJTlZBTDsKPiAgCj4gLQkJaWYgKCFvZl9m
bGF0X2R0X2lzX2NvbXBhdGlibGUocm1lbS0+ZmR0X25vZGUsIGNvbXBhdCkpCj4gLQkJCWNvbnRp
bnVlOwo+ICsJcHJvcCA9IG9mX2dldF9mbGF0X2R0X3Byb3Aobm9kZSwgIiNhZGRyZXNzLWNlbGxz
IiwgTlVMTCk7Cj4gKwlpZiAoIXByb3AgfHwgYmUzMl90b19jcHVwKHByb3ApICE9IGR0X3Jvb3Rf
YWRkcl9jZWxscykKPiArCQlyZXR1cm4gLUVJTlZBTDsKPiAgCj4gLQkJcmV0ID0gaW5pdGZuKHJt
ZW0pOwo+IC0JCWlmIChyZXQgPT0gMCkgewo+IC0JCQlwcl9pbmZvKCJpbml0aWFsaXplZCBub2Rl
ICVzLCBjb21wYXRpYmxlIGlkICVzXG4iLAo+IC0JCQkJcm1lbS0+bmFtZSwgY29tcGF0KTsKPiAt
CQkJYnJlYWs7Cj4gKwlwcm9wID0gb2ZfZ2V0X2ZsYXRfZHRfcHJvcChub2RlLCAicmFuZ2VzIiwg
TlVMTCk7Cj4gKwlpZiAoIXByb3ApCj4gKwkJcmV0dXJuIC1FSU5WQUw7Cj4gKwlyZXR1cm4gMDsK
PiArfQo+ICsKPiArLyoKPiArICogX19yZXNlcnZlZF9tZW1fcmVzZXJ2ZV9yZWcoKSAtIHJlc2Vy
dmUgYWxsIG1lbW9yeSBkZXNjcmliZWQgaW4gJ3JlZycgcHJvcGVydHkKPiArICovCj4gK3N0YXRp
YyBpbnQgX19pbml0IF9fcmVzZXJ2ZWRfbWVtX3Jlc2VydmVfcmVnKHVuc2lnbmVkIGxvbmcgbm9k
ZSwKPiArCQkJCQkgICAgIGNvbnN0IGNoYXIgKnVuYW1lKQo+ICt7Cj4gKwlpbnQgdF9sZW4gPSAo
ZHRfcm9vdF9hZGRyX2NlbGxzICsgZHRfcm9vdF9zaXplX2NlbGxzKSAqIHNpemVvZihfX2JlMzIp
Owo+ICsJcGh5c19hZGRyX3QgYmFzZSwgc2l6ZTsKPiArCWludCBsZW47Cj4gKwljb25zdCBfX2Jl
MzIgKnByb3A7Cj4gKwlpbnQgZmlyc3QgPSAxOwo+ICsJYm9vbCBub21hcDsKPiArCj4gKwlwcm9w
ID0gb2ZfZ2V0X2ZsYXRfZHRfcHJvcChub2RlLCAicmVnIiwgJmxlbik7Cj4gKwlpZiAoIXByb3Ap
Cj4gKwkJcmV0dXJuIC1FTk9FTlQ7Cj4gKwo+ICsJaWYgKGxlbiAmJiBsZW4gJSB0X2xlbiAhPSAw
KSB7Cj4gKwkJcHJfZXJyKCJSZXNlcnZlZCBtZW1vcnk6IGludmFsaWQgcmVnIHByb3BlcnR5IGlu
ICclcycsIHNraXBwaW5nIG5vZGUuXG4iLAo+ICsJCSAgICAgICB1bmFtZSk7Cj4gKwkJcmV0dXJu
IC1FSU5WQUw7Cj4gKwl9Cj4gKwo+ICsJbm9tYXAgPSBvZl9nZXRfZmxhdF9kdF9wcm9wKG5vZGUs
ICJuby1tYXAiLCBOVUxMKSAhPSBOVUxMOwo+ICsKPiArCXdoaWxlIChsZW4gPj0gdF9sZW4pIHsK
PiArCQliYXNlID0gZHRfbWVtX25leHRfY2VsbChkdF9yb290X2FkZHJfY2VsbHMsICZwcm9wKTsK
PiArCQlzaXplID0gZHRfbWVtX25leHRfY2VsbChkdF9yb290X3NpemVfY2VsbHMsICZwcm9wKTsK
PiArCj4gKwkJaWYgKHNpemUgJiYKPiArCQkgICAgZWFybHlfaW5pdF9kdF9yZXNlcnZlX21lbW9y
eV9hcmNoKGJhc2UsIHNpemUsIG5vbWFwKSA9PSAwKQo+ICsJCQlwcl9kZWJ1ZygiUmVzZXJ2ZWQg
bWVtb3J5OiByZXNlcnZlZCByZWdpb24gZm9yIG5vZGUgJyVzJzogYmFzZSAlcGEsIHNpemUgJWx1
IE1pQlxuIiwKPiArCQkJCXVuYW1lLCAmYmFzZSwgKHVuc2lnbmVkIGxvbmcpKHNpemUgLyBTWl8x
TSkpOwo+ICsJCWVsc2UKPiArCQkJcHJfaW5mbygiUmVzZXJ2ZWQgbWVtb3J5OiBmYWlsZWQgdG8g
cmVzZXJ2ZSBtZW1vcnkgZm9yIG5vZGUgJyVzJzogYmFzZSAlcGEsIHNpemUgJWx1IE1pQlxuIiwK
PiArCQkJCXVuYW1lLCAmYmFzZSwgKHVuc2lnbmVkIGxvbmcpKHNpemUgLyBTWl8xTSkpOwo+ICsK
PiArCQlsZW4gLT0gdF9sZW47Cj4gKwkJaWYgKGZpcnN0KSB7Cj4gKwkJCWZkdF9yZXNlcnZlZF9t
ZW1fc2F2ZV9ub2RlKG5vZGUsIHVuYW1lLCBiYXNlLCBzaXplKTsKPiArCQkJZmlyc3QgPSAwOwo+
ICAJCX0KPiAgCX0KPiAtCXJldHVybiByZXQ7Cj4gKwlyZXR1cm4gMDsKPiArfQo+ICsKPiArLyoK
PiArICogZmR0X3NjYW5fcmVzZXJ2ZWRfbWVtKCkgLSBzY2FuIGEgc2luZ2xlIEZEVCBub2RlIGZv
ciByZXNlcnZlZCBtZW1vcnkKPiArICovCj4gK2ludCBfX2luaXQgZmR0X3NjYW5fcmVzZXJ2ZWRf
bWVtKHZvaWQpCj4gK3sKPiArCWludCBub2RlLCBjaGlsZDsKPiArCWNvbnN0IHZvaWQgKmZkdCA9
IGluaXRpYWxfYm9vdF9wYXJhbXM7Cj4gKwo+ICsJbm9kZSA9IGZkdF9wYXRoX29mZnNldChmZHQs
ICIvcmVzZXJ2ZWQtbWVtb3J5Iik7Cj4gKwlpZiAobm9kZSA8IDApCj4gKwkJcmV0dXJuIC1FTk9E
RVY7Cj4gKwo+ICsJaWYgKF9fcmVzZXJ2ZWRfbWVtX2NoZWNrX3Jvb3Qobm9kZSkgIT0gMCkgewo+
ICsJCXByX2VycigiUmVzZXJ2ZWQgbWVtb3J5OiB1bnN1cHBvcnRlZCBub2RlIGZvcm1hdCwgaWdu
b3JpbmdcbiIpOwo+ICsJCXJldHVybiAtRUlOVkFMOwo+ICsJfQo+ICsKPiArCWZkdF9mb3JfZWFj
aF9zdWJub2RlKGNoaWxkLCBmZHQsIG5vZGUpIHsKPiArCQljb25zdCBjaGFyICp1bmFtZTsKPiAr
CQlpbnQgZXJyOwo+ICsKPiArCQlpZiAoIW9mX2ZkdF9kZXZpY2VfaXNfYXZhaWxhYmxlKGZkdCwg
Y2hpbGQpKQo+ICsJCQljb250aW51ZTsKPiArCj4gKwkJdW5hbWUgPSBmZHRfZ2V0X25hbWUoZmR0
LCBjaGlsZCwgTlVMTCk7Cj4gKwo+ICsJCWVyciA9IF9fcmVzZXJ2ZWRfbWVtX3Jlc2VydmVfcmVn
KGNoaWxkLCB1bmFtZSk7Cj4gKwkJaWYgKGVyciA9PSAtRU5PRU5UICYmIG9mX2dldF9mbGF0X2R0
X3Byb3AoY2hpbGQsICJzaXplIiwgTlVMTCkpCj4gKwkJCWZkdF9yZXNlcnZlZF9tZW1fc2F2ZV9u
b2RlKGNoaWxkLCB1bmFtZSwgMCwgMCk7Cj4gKwl9Cj4gKwlyZXR1cm4gMDsKPiAgfQo+ICAKPiAg
c3RhdGljIGludCBfX2luaXQgX19ybWVtX2NtcChjb25zdCB2b2lkICphLCBjb25zdCB2b2lkICpi
KQo+IEBAIC0yMjgsMTMgKzMwNSwxMyBAQCBzdGF0aWMgdm9pZCBfX2luaXQgX19ybWVtX2NoZWNr
X2Zvcl9vdmVybGFwKHZvaWQpCj4gIAlpZiAocmVzZXJ2ZWRfbWVtX2NvdW50IDwgMikKPiAgCQly
ZXR1cm47Cj4gIAo+IC0Jc29ydChyZXNlcnZlZF9tZW0sIHJlc2VydmVkX21lbV9jb3VudCwgc2l6
ZW9mKHJlc2VydmVkX21lbVswXSksCj4gKwlzb3J0KHJlc2VydmVkX21lbXMsIHJlc2VydmVkX21l
bV9jb3VudCwgc2l6ZW9mKHJlc2VydmVkX21lbXNbMF0pLAo+ICAJICAgICBfX3JtZW1fY21wLCBO
VUxMKTsKPiAgCWZvciAoaSA9IDA7IGkgPCByZXNlcnZlZF9tZW1fY291bnQgLSAxOyBpKyspIHsK
PiAgCQlzdHJ1Y3QgcmVzZXJ2ZWRfbWVtICp0aGlzLCAqbmV4dDsKPiAgCj4gLQkJdGhpcyA9ICZy
ZXNlcnZlZF9tZW1baV07Cj4gLQkJbmV4dCA9ICZyZXNlcnZlZF9tZW1baSArIDFdOwo+ICsJCXRo
aXMgPSAmcmVzZXJ2ZWRfbWVtc1tpXTsKPiArCQluZXh0ID0gJnJlc2VydmVkX21lbXNbaSArIDFd
Owo+ICAKPiAgCQlpZiAodGhpcy0+YmFzZSArIHRoaXMtPnNpemUgPiBuZXh0LT5iYXNlKSB7Cj4g
IAkJCXBoeXNfYWRkcl90IHRoaXNfZW5kLCBuZXh0X2VuZDsKPiBAQCAtMjQ4LDEwICszMjUsMzYg
QEAgc3RhdGljIHZvaWQgX19pbml0IF9fcm1lbV9jaGVja19mb3Jfb3ZlcmxhcCh2b2lkKQo+ICAJ
fQo+ICB9Cj4gIAo+ICsvKgo+ICsgKiBfX3Jlc2VydmVkX21lbV9pbml0X25vZGUoKSAtIGNhbGwg
cmVnaW9uIHNwZWNpZmljIHJlc2VydmVkIG1lbW9yeSBpbml0IGNvZGUKPiArICovCj4gK3N0YXRp
YyBpbnQgX19pbml0IF9fcmVzZXJ2ZWRfbWVtX2luaXRfbm9kZShzdHJ1Y3QgcmVzZXJ2ZWRfbWVt
ICpybWVtKQo+ICt7Cj4gKwlleHRlcm4gY29uc3Qgc3RydWN0IG9mX2RldmljZV9pZCBfX3Jlc2Vy
dmVkbWVtX29mX3RhYmxlW107Cj4gKwljb25zdCBzdHJ1Y3Qgb2ZfZGV2aWNlX2lkICppOwo+ICsJ
aW50IHJldCA9IC1FTk9FTlQ7Cj4gKwo+ICsJZm9yIChpID0gX19yZXNlcnZlZG1lbV9vZl90YWJs
ZTsgaSA8ICZfX3JtZW1fb2ZfdGFibGVfc2VudGluZWw7IGkrKykgewo+ICsJCXJlc2VydmVkbWVt
X29mX2luaXRfZm4gaW5pdGZuID0gaS0+ZGF0YTsKPiArCQljb25zdCBjaGFyICpjb21wYXQgPSBp
LT5jb21wYXRpYmxlOwo+ICsKPiArCQlpZiAoIW9mX2ZsYXRfZHRfaXNfY29tcGF0aWJsZShybWVt
LT5mZHRfbm9kZSwgY29tcGF0KSkKPiArCQkJY29udGludWU7Cj4gKwo+ICsJCXJldCA9IGluaXRm
bihybWVtKTsKPiArCQlpZiAocmV0ID09IDApIHsKPiArCQkJcHJfaW5mbygiaW5pdGlhbGl6ZWQg
bm9kZSAlcywgY29tcGF0aWJsZSBpZCAlc1xuIiwKPiArCQkJCXJtZW0tPm5hbWUsIGNvbXBhdCk7
Cj4gKwkJCWJyZWFrOwo+ICsJCX0KPiArCX0KPiArCXJldHVybiByZXQ7Cj4gK30KPiArCj4gIC8q
Kgo+IC0gKiBmZHRfaW5pdF9yZXNlcnZlZF9tZW0oKSAtIGFsbG9jYXRlIGFuZCBpbml0IGFsbCBz
YXZlZCByZXNlcnZlZCBtZW1vcnkgcmVnaW9ucwo+ICsgKiBvZl9yZXNlcnZlZF9tZW1faW5pdCgp
IC0gYWxsb2NhdGUgYW5kIGluaXQgYWxsIHNhdmVkIHJlc2VydmVkIG1lbW9yeSByZWdpb25zCj4g
ICAqLwo+IC12b2lkIF9faW5pdCBmZHRfaW5pdF9yZXNlcnZlZF9tZW0odm9pZCkKPiArdm9pZCBf
X2luaXQgb2ZfcmVzZXJ2ZWRfbWVtX2luaXQodm9pZCkKPiAgewo+ICAJaW50IGk7Cj4gIAo+IEBA
IC0yNTksNyArMzYyLDcgQEAgdm9pZCBfX2luaXQgZmR0X2luaXRfcmVzZXJ2ZWRfbWVtKHZvaWQp
Cj4gIAlfX3JtZW1fY2hlY2tfZm9yX292ZXJsYXAoKTsKPiAgCj4gIAlmb3IgKGkgPSAwOyBpIDwg
cmVzZXJ2ZWRfbWVtX2NvdW50OyBpKyspIHsKPiAtCQlzdHJ1Y3QgcmVzZXJ2ZWRfbWVtICpybWVt
ID0gJnJlc2VydmVkX21lbVtpXTsKPiArCQlzdHJ1Y3QgcmVzZXJ2ZWRfbWVtICpybWVtID0gJnJl
c2VydmVkX21lbXNbaV07Cj4gIAkJdW5zaWduZWQgbG9uZyBub2RlID0gcm1lbS0+ZmR0X25vZGU7
Cj4gIAkJaW50IGxlbjsKPiAgCQljb25zdCBfX2JlMzIgKnByb3A7Cj4gQEAgLTI5OSw4ICs0MDIs
OCBAQCBzdGF0aWMgaW5saW5lIHN0cnVjdCByZXNlcnZlZF9tZW0gKl9fZmluZF9ybWVtKHN0cnVj
dCBkZXZpY2Vfbm9kZSAqbm9kZSkKPiAgCQlyZXR1cm4gTlVMTDsKPiAgCj4gIAlmb3IgKGkgPSAw
OyBpIDwgcmVzZXJ2ZWRfbWVtX2NvdW50OyBpKyspCj4gLQkJaWYgKHJlc2VydmVkX21lbVtpXS5w
aGFuZGxlID09IG5vZGUtPnBoYW5kbGUpCj4gLQkJCXJldHVybiAmcmVzZXJ2ZWRfbWVtW2ldOwo+
ICsJCWlmIChyZXNlcnZlZF9tZW1zW2ldLnBoYW5kbGUgPT0gbm9kZS0+cGhhbmRsZSkKPiArCQkJ
cmV0dXJuICZyZXNlcnZlZF9tZW1zW2ldOwo+ICAJcmV0dXJuIE5VTEw7Cj4gIH0KPiAgCj4gQEAg
LTQ0Miw4ICs1NDUsOCBAQCBzdHJ1Y3QgcmVzZXJ2ZWRfbWVtICpvZl9yZXNlcnZlZF9tZW1fbG9v
a3VwKHN0cnVjdCBkZXZpY2Vfbm9kZSAqbnApCj4gIAo+ICAJbmFtZSA9IGtiYXNlbmFtZShucC0+
ZnVsbF9uYW1lKTsKPiAgCWZvciAoaSA9IDA7IGkgPCByZXNlcnZlZF9tZW1fY291bnQ7IGkrKykK
PiAtCQlpZiAoIXN0cmNtcChyZXNlcnZlZF9tZW1baV0ubmFtZSwgbmFtZSkpCj4gLQkJCXJldHVy
biAmcmVzZXJ2ZWRfbWVtW2ldOwo+ICsJCWlmICghc3RyY21wKHJlc2VydmVkX21lbXNbaV0ubmFt
ZSwgbmFtZSkpCj4gKwkJCXJldHVybiAmcmVzZXJ2ZWRfbWVtc1tpXTsKPiAgCj4gIAlyZXR1cm4g
TlVMTDsKPiAgfQo+IGRpZmYgLS1naXQgYS9pbmNsdWRlL2xpbnV4L29mX3Jlc2VydmVkX21lbS5o
IGIvaW5jbHVkZS9saW51eC9vZl9yZXNlcnZlZF9tZW0uaAo+IGluZGV4IDRkZTJhMjRjYWRjOS4u
MzRlMTM0YmVjNjA2IDEwMDY0NAo+IC0tLSBhL2luY2x1ZGUvbGludXgvb2ZfcmVzZXJ2ZWRfbWVt
LmgKPiArKysgYi9pbmNsdWRlL2xpbnV4L29mX3Jlc2VydmVkX21lbS5oCj4gQEAgLTMyLDYgKzMy
LDggQEAgdHlwZWRlZiBpbnQgKCpyZXNlcnZlZG1lbV9vZl9pbml0X2ZuKShzdHJ1Y3QgcmVzZXJ2
ZWRfbWVtICpybWVtKTsKPiAgI2RlZmluZSBSRVNFUlZFRE1FTV9PRl9ERUNMQVJFKG5hbWUsIGNv
bXBhdCwgaW5pdCkJCQlcCj4gIAlfT0ZfREVDTEFSRShyZXNlcnZlZG1lbSwgbmFtZSwgY29tcGF0
LCBpbml0LCByZXNlcnZlZG1lbV9vZl9pbml0X2ZuKQo+ICAKPiArdm9pZCBvZl9yZXNlcnZlZF9t
ZW1faW5pdCh2b2lkKTsKPiArCj4gIGludCBvZl9yZXNlcnZlZF9tZW1fZGV2aWNlX2luaXRfYnlf
aWR4KHN0cnVjdCBkZXZpY2UgKmRldiwKPiAgCQkJCSAgICAgICBzdHJ1Y3QgZGV2aWNlX25vZGUg
Km5wLCBpbnQgaWR4KTsKPiAgaW50IG9mX3Jlc2VydmVkX21lbV9kZXZpY2VfaW5pdF9ieV9uYW1l
KHN0cnVjdCBkZXZpY2UgKmRldiwKPiBAQCAtNDUsNiArNDcsOCBAQCBzdHJ1Y3QgcmVzZXJ2ZWRf
bWVtICpvZl9yZXNlcnZlZF9tZW1fbG9va3VwKHN0cnVjdCBkZXZpY2Vfbm9kZSAqbnApOwo+ICAj
ZGVmaW5lIFJFU0VSVkVETUVNX09GX0RFQ0xBUkUobmFtZSwgY29tcGF0LCBpbml0KQkJCVwKPiAg
CV9PRl9ERUNMQVJFX1NUVUIocmVzZXJ2ZWRtZW0sIG5hbWUsIGNvbXBhdCwgaW5pdCwgcmVzZXJ2
ZWRtZW1fb2ZfaW5pdF9mbikKPiAgCj4gK3N0YXRpYyBpbmxpbmUgdm9pZCBvZl9yZXNlcnZlZF9t
ZW1faW5pdCh2b2lkKSB7IH0KPiArCj4gIHN0YXRpYyBpbmxpbmUgaW50IG9mX3Jlc2VydmVkX21l
bV9kZXZpY2VfaW5pdF9ieV9pZHgoc3RydWN0IGRldmljZSAqZGV2LAo+ICAJCQkJCXN0cnVjdCBk
ZXZpY2Vfbm9kZSAqbnAsIGludCBpZHgpCj4gIHsKPiAtLSAKPiAyLjMwLjIKPiAKPiAKX19fX19f
X19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX18KT3BlblJJU0MgbWFpbGlu
ZyBsaXN0Ck9wZW5SSVNDQGxpc3RzLmxpYnJlY29yZXMub3JnCmh0dHBzOi8vbGlzdHMubGlicmVj
b3Jlcy5vcmcvbGlzdGluZm8vb3BlbnJpc2MK
