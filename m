Return-Path: <openrisc-bounces@lists.librecores.org>
X-Original-To: lists+openrisc@lfdr.de
Delivered-To: lists+openrisc@lfdr.de
Received: from mail.librecores.org (lists.librecores.org [88.198.125.70])
	by mail.lfdr.de (Postfix) with ESMTP id AA7FF4C677A
	for <lists+openrisc@lfdr.de>; Mon, 28 Feb 2022 11:49:21 +0100 (CET)
Received: from [172.31.1.100] (localhost.localdomain [127.0.0.1])
	by mail.librecores.org (Postfix) with ESMTP id CBECF24834;
	Mon, 28 Feb 2022 11:49:20 +0100 (CET)
Received: from foss.arm.com (foss.arm.com [217.140.110.172])
 by mail.librecores.org (Postfix) with ESMTP id 69B4624820
 for <openrisc@lists.librecores.org>; Mon, 28 Feb 2022 11:49:19 +0100 (CET)
Received: from usa-sjc-imap-foss1.foss.arm.com (unknown [10.121.207.14])
 by usa-sjc-mx-foss1.foss.arm.com (Postfix) with ESMTP id D3C7D106F;
 Mon, 28 Feb 2022 02:49:18 -0800 (PST)
Received: from p8cg001049571a15.arm.com (unknown [10.163.47.185])
 by usa-sjc-imap-foss1.foss.arm.com (Postfix) with ESMTPA id 63D2F3F73D;
 Mon, 28 Feb 2022 02:49:10 -0800 (PST)
From: Anshuman Khandual <anshuman.khandual@arm.com>
To: linux-mm@kvack.org,
	akpm@linux-foundation.org
Date: Mon, 28 Feb 2022 16:17:27 +0530
Message-Id: <1646045273-9343-5-git-send-email-anshuman.khandual@arm.com>
X-Mailer: git-send-email 2.7.4
In-Reply-To: <1646045273-9343-1-git-send-email-anshuman.khandual@arm.com>
References: <1646045273-9343-1-git-send-email-anshuman.khandual@arm.com>
Subject: [OpenRISC] [PATCH V3 04/30] powerpc/mm: Enable
 ARCH_HAS_VM_GET_PAGE_PROT
X-BeenThere: openrisc@lists.librecores.org
X-Mailman-Version: 2.1.26
Precedence: list
List-Id: Discussion around the OpenRISC processor
 <openrisc.lists.librecores.org>
List-Unsubscribe: <https://lists.librecores.org/options/openrisc>,
 <mailto:openrisc-request@lists.librecores.org?subject=unsubscribe>
List-Archive: <http://lists.librecores.org/pipermail/openrisc/>
List-Post: <mailto:openrisc@lists.librecores.org>
List-Help: <mailto:openrisc-request@lists.librecores.org?subject=help>
List-Subscribe: <https://lists.librecores.org/listinfo/openrisc>,
 <mailto:openrisc-request@lists.librecores.org?subject=subscribe>
Cc: linux-ia64@vger.kernel.org, linux-sh@vger.kernel.org,
 linux-mips@vger.kernel.org, Paul Mackerras <paulus@samba.org>,
 Michael Ellerman <mpe@ellerman.id.au>, sparclinux@vger.kernel.org,
 linux-riscv@lists.infradead.org, linux-arch@vger.kernel.org,
 linux-s390@vger.kernel.org, linux-hexagon@vger.kernel.org,
 linux-csky@vger.kernel.org, Christoph Hellwig <hch@infradead.org>,
 linux-snps-arc@lists.infradead.org, linux-xtensa@linux-xtensa.org,
 Anshuman Khandual <anshuman.khandual@arm.com>, linux-um@lists.infradead.org,
 linux-m68k@lists.linux-m68k.org, openrisc@lists.librecores.org,
 linux-arm-kernel@lists.infradead.org, linux-parisc@vger.kernel.org,
 linux-kernel@vger.kernel.org, linux-alpha@vger.kernel.org,
 linuxppc-dev@lists.ozlabs.org
MIME-Version: 1.0
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: openrisc-bounces@lists.librecores.org
Sender: "OpenRISC" <openrisc-bounces@lists.librecores.org>

VGhpcyBkZWZpbmVzIGFuZCBleHBvcnRzIGEgcGxhdGZvcm0gc3BlY2lmaWMgY3VzdG9tIHZtX2dl
dF9wYWdlX3Byb3QoKSB2aWEKc3Vic2NyaWJpbmcgQVJDSF9IQVNfVk1fR0VUX1BBR0VfUFJPVC4g
U3Vic2VxdWVudGx5IGFsbCBfX1NYWFggYW5kIF9fUFhYWAptYWNyb3MgY2FuIGJlIGRyb3BwZWQg
d2hpY2ggYXJlIG5vIGxvbmdlciBuZWVkZWQuIFdoaWxlIGhlcmUsIHRoaXMgYWxzbwpsb2NhbGl6
ZXMgYXJjaF92bV9nZXRfcGFnZV9wcm90KCkgYXMgcG93ZXJwY192bV9nZXRfcGFnZV9wcm90KCkg
YW5kIG1vdmVzCml0IG5lYXIgdm1fZ2V0X3BhZ2VfcHJvdCgpLgoKQ2M6IE1pY2hhZWwgRWxsZXJt
YW4gPG1wZUBlbGxlcm1hbi5pZC5hdT4KQ2M6IFBhdWwgTWFja2VycmFzIDxwYXVsdXNAc2FtYmEu
b3JnPgpDYzogbGludXhwcGMtZGV2QGxpc3RzLm96bGFicy5vcmcKQ2M6IGxpbnV4LWtlcm5lbEB2
Z2VyLmtlcm5lbC5vcmcKU2lnbmVkLW9mZi1ieTogQW5zaHVtYW4gS2hhbmR1YWwgPGFuc2h1bWFu
LmtoYW5kdWFsQGFybS5jb20+Ci0tLQogYXJjaC9wb3dlcnBjL0tjb25maWcgICAgICAgICAgICAg
ICB8ICAxICsKIGFyY2gvcG93ZXJwYy9pbmNsdWRlL2FzbS9tbWFuLmggICAgfCAxMiAtLS0tLS0K
IGFyY2gvcG93ZXJwYy9pbmNsdWRlL2FzbS9wZ3RhYmxlLmggfCAxOSAtLS0tLS0tLS0tCiBhcmNo
L3Bvd2VycGMvbW0vbW1hcC5jICAgICAgICAgICAgIHwgNTkgKysrKysrKysrKysrKysrKysrKysr
KysrKysrKysrCiA0IGZpbGVzIGNoYW5nZWQsIDYwIGluc2VydGlvbnMoKyksIDMxIGRlbGV0aW9u
cygtKQoKZGlmZiAtLWdpdCBhL2FyY2gvcG93ZXJwYy9LY29uZmlnIGIvYXJjaC9wb3dlcnBjL0tj
b25maWcKaW5kZXggYjc3OTYwMzk3OGUxLi5kZGI0YTM2ODdjMDUgMTAwNjQ0Ci0tLSBhL2FyY2gv
cG93ZXJwYy9LY29uZmlnCisrKyBiL2FyY2gvcG93ZXJwYy9LY29uZmlnCkBAIC0xMzUsNiArMTM1
LDcgQEAgY29uZmlnIFBQQwogCXNlbGVjdCBBUkNIX0hBU19USUNLX0JST0FEQ0FTVAkJaWYgR0VO
RVJJQ19DTE9DS0VWRU5UU19CUk9BRENBU1QKIAlzZWxlY3QgQVJDSF9IQVNfVUFDQ0VTU19GTFVT
SENBQ0hFCiAJc2VsZWN0IEFSQ0hfSEFTX1VCU0FOX1NBTklUSVpFX0FMTAorCXNlbGVjdCBBUkNI
X0hBU19WTV9HRVRfUEFHRV9QUk9UCiAJc2VsZWN0IEFSQ0hfSEFWRV9OTUlfU0FGRV9DTVBYQ0hH
CiAJc2VsZWN0IEFSQ0hfS0VFUF9NRU1CTE9DSwogCXNlbGVjdCBBUkNIX01JR0hUX0hBVkVfUENf
UEFSUE9SVApkaWZmIC0tZ2l0IGEvYXJjaC9wb3dlcnBjL2luY2x1ZGUvYXNtL21tYW4uaCBiL2Fy
Y2gvcG93ZXJwYy9pbmNsdWRlL2FzbS9tbWFuLmgKaW5kZXggN2NiNmQxOGY1Y2Q2Li4xYjAyNGU2
NGM4ZWMgMTAwNjQ0Ci0tLSBhL2FyY2gvcG93ZXJwYy9pbmNsdWRlL2FzbS9tbWFuLmgKKysrIGIv
YXJjaC9wb3dlcnBjL2luY2x1ZGUvYXNtL21tYW4uaApAQCAtMjQsMTggKzI0LDYgQEAgc3RhdGlj
IGlubGluZSB1bnNpZ25lZCBsb25nIGFyY2hfY2FsY192bV9wcm90X2JpdHModW5zaWduZWQgbG9u
ZyBwcm90LAogfQogI2RlZmluZSBhcmNoX2NhbGNfdm1fcHJvdF9iaXRzKHByb3QsIHBrZXkpIGFy
Y2hfY2FsY192bV9wcm90X2JpdHMocHJvdCwgcGtleSkKIAotc3RhdGljIGlubGluZSBwZ3Byb3Rf
dCBhcmNoX3ZtX2dldF9wYWdlX3Byb3QodW5zaWduZWQgbG9uZyB2bV9mbGFncykKLXsKLSNpZmRl
ZiBDT05GSUdfUFBDX01FTV9LRVlTCi0JcmV0dXJuICh2bV9mbGFncyAmIFZNX1NBTykgPwotCQlf
X3BncHJvdChfUEFHRV9TQU8gfCB2bWZsYWdfdG9fcHRlX3BrZXlfYml0cyh2bV9mbGFncykpIDoK
LQkJX19wZ3Byb3QoMCB8IHZtZmxhZ190b19wdGVfcGtleV9iaXRzKHZtX2ZsYWdzKSk7Ci0jZWxz
ZQotCXJldHVybiAodm1fZmxhZ3MgJiBWTV9TQU8pID8gX19wZ3Byb3QoX1BBR0VfU0FPKSA6IF9f
cGdwcm90KDApOwotI2VuZGlmCi19Ci0jZGVmaW5lIGFyY2hfdm1fZ2V0X3BhZ2VfcHJvdCh2bV9m
bGFncykgYXJjaF92bV9nZXRfcGFnZV9wcm90KHZtX2ZsYWdzKQotCiBzdGF0aWMgaW5saW5lIGJv
b2wgYXJjaF92YWxpZGF0ZV9wcm90KHVuc2lnbmVkIGxvbmcgcHJvdCwgdW5zaWduZWQgbG9uZyBh
ZGRyKQogewogCWlmIChwcm90ICYgfihQUk9UX1JFQUQgfCBQUk9UX1dSSVRFIHwgUFJPVF9FWEVD
IHwgUFJPVF9TRU0gfCBQUk9UX1NBTykpCmRpZmYgLS1naXQgYS9hcmNoL3Bvd2VycGMvaW5jbHVk
ZS9hc20vcGd0YWJsZS5oIGIvYXJjaC9wb3dlcnBjL2luY2x1ZGUvYXNtL3BndGFibGUuaAppbmRl
eCBkNTY0ZDBlY2Q0Y2QuLjNjYmI2ZGUyMGY5ZCAxMDA2NDQKLS0tIGEvYXJjaC9wb3dlcnBjL2lu
Y2x1ZGUvYXNtL3BndGFibGUuaAorKysgYi9hcmNoL3Bvd2VycGMvaW5jbHVkZS9hc20vcGd0YWJs
ZS5oCkBAIC0yMCwyNSArMjAsNiBAQCBzdHJ1Y3QgbW1fc3RydWN0OwogI2luY2x1ZGUgPGFzbS9u
b2hhc2gvcGd0YWJsZS5oPgogI2VuZGlmIC8qICFDT05GSUdfUFBDX0JPT0szUyAqLwogCi0vKiBO
b3RlIGR1ZSB0byB0aGUgd2F5IHZtIGZsYWdzIGFyZSBsYWlkIG91dCwgdGhlIGJpdHMgYXJlIFhX
UiAqLwotI2RlZmluZSBfX1AwMDAJUEFHRV9OT05FCi0jZGVmaW5lIF9fUDAwMQlQQUdFX1JFQURP
TkxZCi0jZGVmaW5lIF9fUDAxMAlQQUdFX0NPUFkKLSNkZWZpbmUgX19QMDExCVBBR0VfQ09QWQot
I2RlZmluZSBfX1AxMDAJUEFHRV9SRUFET05MWV9YCi0jZGVmaW5lIF9fUDEwMQlQQUdFX1JFQURP
TkxZX1gKLSNkZWZpbmUgX19QMTEwCVBBR0VfQ09QWV9YCi0jZGVmaW5lIF9fUDExMQlQQUdFX0NP
UFlfWAotCi0jZGVmaW5lIF9fUzAwMAlQQUdFX05PTkUKLSNkZWZpbmUgX19TMDAxCVBBR0VfUkVB
RE9OTFkKLSNkZWZpbmUgX19TMDEwCVBBR0VfU0hBUkVECi0jZGVmaW5lIF9fUzAxMQlQQUdFX1NI
QVJFRAotI2RlZmluZSBfX1MxMDAJUEFHRV9SRUFET05MWV9YCi0jZGVmaW5lIF9fUzEwMQlQQUdF
X1JFQURPTkxZX1gKLSNkZWZpbmUgX19TMTEwCVBBR0VfU0hBUkVEX1gKLSNkZWZpbmUgX19TMTEx
CVBBR0VfU0hBUkVEX1gKLQogI2lmbmRlZiBfX0FTU0VNQkxZX18KIAogI2lmbmRlZiBNQVhfUFRS
U19QRVJfUEdECmRpZmYgLS1naXQgYS9hcmNoL3Bvd2VycGMvbW0vbW1hcC5jIGIvYXJjaC9wb3dl
cnBjL21tL21tYXAuYwppbmRleCBjNDc1Y2Y4MTBhYTguLmVlMjc1OTM3ZmUxOSAxMDA2NDQKLS0t
IGEvYXJjaC9wb3dlcnBjL21tL21tYXAuYworKysgYi9hcmNoL3Bvd2VycGMvbW0vbW1hcC5jCkBA
IC0yNTQsMyArMjU0LDYyIEBAIHZvaWQgYXJjaF9waWNrX21tYXBfbGF5b3V0KHN0cnVjdCBtbV9z
dHJ1Y3QgKm1tLCBzdHJ1Y3QgcmxpbWl0ICpybGltX3N0YWNrKQogCQltbS0+Z2V0X3VubWFwcGVk
X2FyZWEgPSBhcmNoX2dldF91bm1hcHBlZF9hcmVhX3RvcGRvd247CiAJfQogfQorCitzdGF0aWMg
aW5saW5lIHBncHJvdF90IF9fdm1fZ2V0X3BhZ2VfcHJvdCh1bnNpZ25lZCBsb25nIHZtX2ZsYWdz
KQoreworCXN3aXRjaCAodm1fZmxhZ3MgJiAoVk1fUkVBRCB8IFZNX1dSSVRFIHwgVk1fRVhFQyB8
IFZNX1NIQVJFRCkpIHsKKwljYXNlIFZNX05PTkU6CisJCXJldHVybiBQQUdFX05PTkU7CisJY2Fz
ZSBWTV9SRUFEOgorCQlyZXR1cm4gUEFHRV9SRUFET05MWTsKKwljYXNlIFZNX1dSSVRFOgorCWNh
c2UgVk1fV1JJVEUgfCBWTV9SRUFEOgorCQlyZXR1cm4gUEFHRV9DT1BZOworCWNhc2UgVk1fRVhF
QzoKKwljYXNlIFZNX0VYRUMgfCBWTV9SRUFEOgorCQlyZXR1cm4gUEFHRV9SRUFET05MWV9YOwor
CWNhc2UgVk1fRVhFQyB8IFZNX1dSSVRFOgorCWNhc2UgVk1fRVhFQyB8IFZNX1dSSVRFIHwgVk1f
UkVBRDoKKwkJcmV0dXJuIFBBR0VfQ09QWV9YOworCWNhc2UgVk1fU0hBUkVEOgorCQlyZXR1cm4g
UEFHRV9OT05FOworCWNhc2UgVk1fU0hBUkVEIHwgVk1fUkVBRDoKKwkJcmV0dXJuIFBBR0VfUkVB
RE9OTFk7CisJY2FzZSBWTV9TSEFSRUQgfCBWTV9XUklURToKKwljYXNlIFZNX1NIQVJFRCB8IFZN
X1dSSVRFIHwgVk1fUkVBRDoKKwkJcmV0dXJuIFBBR0VfU0hBUkVEOworCWNhc2UgVk1fU0hBUkVE
IHwgVk1fRVhFQzoKKwljYXNlIFZNX1NIQVJFRCB8IFZNX0VYRUMgfCBWTV9SRUFEOgorCQlyZXR1
cm4gUEFHRV9SRUFET05MWV9YOworCWNhc2UgVk1fU0hBUkVEIHwgVk1fRVhFQyB8IFZNX1dSSVRF
OgorCWNhc2UgVk1fU0hBUkVEIHwgVk1fRVhFQyB8IFZNX1dSSVRFIHwgVk1fUkVBRDoKKwkJcmV0
dXJuIFBBR0VfU0hBUkVEX1g7CisJZGVmYXVsdDoKKwkJQlVJTERfQlVHKCk7CisJfQorfQorCisj
aWZkZWYgQ09ORklHX1BQQzY0CitzdGF0aWMgcGdwcm90X3QgcG93ZXJwY192bV9nZXRfcGFnZV9w
cm90KHVuc2lnbmVkIGxvbmcgdm1fZmxhZ3MpCit7CisjaWZkZWYgQ09ORklHX1BQQ19NRU1fS0VZ
UworCXJldHVybiAodm1fZmxhZ3MgJiBWTV9TQU8pID8KKwkJX19wZ3Byb3QoX1BBR0VfU0FPIHwg
dm1mbGFnX3RvX3B0ZV9wa2V5X2JpdHModm1fZmxhZ3MpKSA6CisJCV9fcGdwcm90KDAgfCB2bWZs
YWdfdG9fcHRlX3BrZXlfYml0cyh2bV9mbGFncykpOworI2Vsc2UKKwlyZXR1cm4gKHZtX2ZsYWdz
ICYgVk1fU0FPKSA/IF9fcGdwcm90KF9QQUdFX1NBTykgOiBfX3BncHJvdCgwKTsKKyNlbmRpZgor
fQorI2Vsc2UKK3N0YXRpYyBwZ3Byb3RfdCBwb3dlcnBjX3ZtX2dldF9wYWdlX3Byb3QodW5zaWdu
ZWQgbG9uZyB2bV9mbGFncykKK3sKKwlyZXR1cm4gX19wZ3Byb3QoMCk7Cit9CisjZW5kaWYgLyog
Q09ORklHX1BQQzY0ICovCisKK3BncHJvdF90IHZtX2dldF9wYWdlX3Byb3QodW5zaWduZWQgbG9u
ZyB2bV9mbGFncykKK3sKKwlyZXR1cm4gX19wZ3Byb3QocGdwcm90X3ZhbChfX3ZtX2dldF9wYWdl
X3Byb3Qodm1fZmxhZ3MpKSB8CisJICAgICAgIHBncHJvdF92YWwocG93ZXJwY192bV9nZXRfcGFn
ZV9wcm90KHZtX2ZsYWdzKSkpOworfQorRVhQT1JUX1NZTUJPTCh2bV9nZXRfcGFnZV9wcm90KTsK
LS0gCjIuMjUuMQoKX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X18KT3BlblJJU0MgbWFpbGluZyBsaXN0Ck9wZW5SSVNDQGxpc3RzLmxpYnJlY29yZXMub3JnCmh0
dHBzOi8vbGlzdHMubGlicmVjb3Jlcy5vcmcvbGlzdGluZm8vb3BlbnJpc2MK
