Return-Path: <openrisc-bounces@lists.librecores.org>
X-Original-To: lists+openrisc@lfdr.de
Delivered-To: lists+openrisc@lfdr.de
Received: from mail.librecores.org (lists.librecores.org [88.198.125.70])
	by mail.lfdr.de (Postfix) with ESMTP id 3DA954B569B
	for <lists+openrisc@lfdr.de>; Mon, 14 Feb 2022 17:38:01 +0100 (CET)
Received: from [172.31.1.100] (localhost.localdomain [127.0.0.1])
	by mail.librecores.org (Postfix) with ESMTP id 1D2AA24816;
	Mon, 14 Feb 2022 17:38:01 +0100 (CET)
Received: from sin.source.kernel.org (sin.source.kernel.org [145.40.73.55])
 by mail.librecores.org (Postfix) with ESMTPS id 6EDA5211B2
 for <openrisc@lists.librecores.org>; Mon, 14 Feb 2022 17:37:59 +0100 (CET)
Received: from smtp.kernel.org (relay.kernel.org [52.25.139.140])
 (using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
 (No client certificate requested)
 by sin.source.kernel.org (Postfix) with ESMTPS id 95321CE19E6;
 Mon, 14 Feb 2022 16:37:57 +0000 (UTC)
Received: by smtp.kernel.org (Postfix) with ESMTPSA id F14ABC340E9;
 Mon, 14 Feb 2022 16:37:44 +0000 (UTC)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/simple; d=kernel.org;
 s=k20201202; t=1644856674;
 bh=V6/ZfWZ1PAD3Y97L2QNR1QNU/2itdbWUv5bvEuYuqFQ=;
 h=From:To:Cc:Subject:Date:In-Reply-To:References:From;
 b=MOAf9yBvH1riDXG/nGNPY+w9Gc9bnqic4pnJ0+tu96kd19/UyQ+Onu2FZTuj/qx3H
 5DZ48NElBgU3qg/LDAY1SezCwzOrzgR1DEV7JVhEQY1s/p3xpNft39stpuEoc4sI/q
 K7roa/97KxpQjsDrcV7HwA+T3TThR5YApydcNi+mLOC0+byS8aASvctyxWuoL5KLh3
 DMrCNNigujQsLvalAFKiivzphwW9Yj5VBRBUajRIBc/jTjiD3QI/Gt/oNiPbyJR5ar
 MJMqnkbNnG0hh+1THGkOhds095tIBm/qJ0icPc9d1KZtauxvKz3+3Ip0UHfF/dGlgx
 UNo5dPaPdtkMg==
From: Arnd Bergmann <arnd@kernel.org>
To: Linus Torvalds <torvalds@linux-foundation.org>,
 Christoph Hellwig <hch@lst.de>, linux-arch@vger.kernel.org,
 linux-mm@kvack.org, linux-api@vger.kernel.org, arnd@arndb.de,
 linux-kernel@vger.kernel.org
Date: Mon, 14 Feb 2022 17:34:50 +0100
Message-Id: <20220214163452.1568807-13-arnd@kernel.org>
X-Mailer: git-send-email 2.29.2
In-Reply-To: <20220214163452.1568807-1-arnd@kernel.org>
References: <20220214163452.1568807-1-arnd@kernel.org>
MIME-Version: 1.0
Subject: [OpenRISC] [PATCH 12/14] sh: remove CONFIG_SET_FS support
X-BeenThere: openrisc@lists.librecores.org
X-Mailman-Version: 2.1.26
Precedence: list
List-Id: Discussion around the OpenRISC processor
 <openrisc.lists.librecores.org>
List-Unsubscribe: <https://lists.librecores.org/options/openrisc>,
 <mailto:openrisc-request@lists.librecores.org?subject=unsubscribe>
List-Archive: <http://lists.librecores.org/pipermail/openrisc/>
List-Post: <mailto:openrisc@lists.librecores.org>
List-Help: <mailto:openrisc-request@lists.librecores.org?subject=help>
List-Subscribe: <https://lists.librecores.org/listinfo/openrisc>,
 <mailto:openrisc-request@lists.librecores.org?subject=subscribe>
Cc: mark.rutland@arm.com, dalias@libc.org, linux-ia64@vger.kernel.org,
 linux-sh@vger.kernel.org, peterz@infradead.org, jcmvbkbc@gmail.com,
 guoren@kernel.org, sparclinux@vger.kernel.org, linux-hexagon@vger.kernel.org,
 linux-riscv@lists.infradead.org, will@kernel.org, ardb@kernel.org,
 linux-s390@vger.kernel.org, bcain@codeaurora.org, mpe@ellerman.id.au,
 deller@gmx.de, x86@kernel.org, linux@armlinux.org.uk,
 linux-csky@vger.kernel.org, mingo@redhat.com,
 linux-snps-arc@lists.infradead.org, linux-xtensa@linux-xtensa.org,
 hca@linux.ibm.com, linux-alpha@vger.kernel.org, linux-um@lists.infradead.org,
 linux-m68k@lists.linux-m68k.org, openrisc@lists.librecores.org,
 green.hu@gmail.com, linux-arm-kernel@lists.infradead.org, monstr@monstr.eu,
 tsbogend@alpha.franken.de, linux-parisc@vger.kernel.org, nickhu@andestech.com,
 linux-mips@vger.kernel.org, dinguyen@kernel.org, ebiederm@xmission.com,
 richard@nod.at, akpm@linux-foundation.org, linuxppc-dev@lists.ozlabs.org,
 davem@davemloft.net
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: openrisc-bounces@lists.librecores.org
Sender: "OpenRISC" <openrisc-bounces@lists.librecores.org>

RnJvbTogQXJuZCBCZXJnbWFubiA8YXJuZEBhcm5kYi5kZT4KCnNoIHVzZXMgc2V0X2ZzL2dldF9m
cyBvbmx5IGluIG9uZSBmaWxlLCB0byBoYW5kbGUgYWRkcmVzcwplcnJvcnMgaW4gYm90aCB1c2Vy
IGFuZCBrZXJuZWwgbWVtb3J5LgoKSXQgYWxyZWFkeSBoYXMgYW4gYWJzdHJhY3Rpb24gdG8gZGlm
ZmVyZW50aWF0ZSBiZXR3ZWVuIEkvTwphbmQgbWVtb3J5LCBzbyBhZGRpbmcgYSB0aGlyZCBjbGFz
cyBmb3Iga2VybmVsIG1lbW9yeSBmaXRzCmludG8gdGhlIHNhbWUgc2NoZW1lIGFuZCBsZXRzIHVz
IGtpbGwgb2ZmIENPTkZJR19TRVRfRlMuCgpTaWduZWQtb2ZmLWJ5OiBBcm5kIEJlcmdtYW5uIDxh
cm5kQGFybmRiLmRlPgotLS0KIGFyY2gvc2gvS2NvbmZpZyAgICAgICAgICAgICAgICAgICB8ICAx
IC0KIGFyY2gvc2gvaW5jbHVkZS9hc20vcHJvY2Vzc29yLmggICB8ICAxIC0KIGFyY2gvc2gvaW5j
bHVkZS9hc20vc2VnbWVudC5oICAgICB8IDMzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0KIGFyY2gvc2gvaW5jbHVkZS9hc20vdGhyZWFkX2luZm8uaCB8ICAyIC0tCiBhcmNoL3NoL2lu
Y2x1ZGUvYXNtL3VhY2Nlc3MuaCAgICAgfCAgNCAtLS0tCiBhcmNoL3NoL2tlcm5lbC9pb190cmFw
cGVkLmMgICAgICAgfCAgOSArKy0tLS0tLS0KIGFyY2gvc2gva2VybmVsL3Byb2Nlc3NfMzIuYyAg
ICAgICB8ICAyIC0tCiBhcmNoL3NoL2tlcm5lbC90cmFwc18zMi5jICAgICAgICAgfCAzMCArKysr
KysrKysrKysrKysrKy0tLS0tLS0tLS0tCiA4IGZpbGVzIGNoYW5nZWQsIDIxIGluc2VydGlvbnMo
KyksIDYxIGRlbGV0aW9ucygtKQogZGVsZXRlIG1vZGUgMTAwNjQ0IGFyY2gvc2gvaW5jbHVkZS9h
c20vc2VnbWVudC5oCgpkaWZmIC0tZ2l0IGEvYXJjaC9zaC9LY29uZmlnIGIvYXJjaC9zaC9LY29u
ZmlnCmluZGV4IDI0NzRhMDRjZWFjNC4uZjY3NmU5MmI3ZDViIDEwMDY0NAotLS0gYS9hcmNoL3No
L0tjb25maWcKKysrIGIvYXJjaC9zaC9LY29uZmlnCkBAIC02NSw3ICs2NSw2IEBAIGNvbmZpZyBT
VVBFUkgKIAlzZWxlY3QgUEVSRl9FVkVOVFMKIAlzZWxlY3QgUEVSRl9VU0VfVk1BTExPQwogCXNl
bGVjdCBSVENfTElCCi0Jc2VsZWN0IFNFVF9GUwogCXNlbGVjdCBTUEFSU0VfSVJRCiAJc2VsZWN0
IFRSQUNFX0lSUUZMQUdTX1NVUFBPUlQKIAloZWxwCmRpZmYgLS1naXQgYS9hcmNoL3NoL2luY2x1
ZGUvYXNtL3Byb2Nlc3Nvci5oIGIvYXJjaC9zaC9pbmNsdWRlL2FzbS9wcm9jZXNzb3IuaAppbmRl
eCAzODIwZDY5ODg0NmUuLjg1YTZjMWMzYzE2ZSAxMDA2NDQKLS0tIGEvYXJjaC9zaC9pbmNsdWRl
L2FzbS9wcm9jZXNzb3IuaAorKysgYi9hcmNoL3NoL2luY2x1ZGUvYXNtL3Byb2Nlc3Nvci5oCkBA
IC0zLDcgKzMsNiBAQAogI2RlZmluZSBfX0FTTV9TSF9QUk9DRVNTT1JfSAogCiAjaW5jbHVkZSA8
YXNtL2NwdS1mZWF0dXJlcy5oPgotI2luY2x1ZGUgPGFzbS9zZWdtZW50Lmg+CiAjaW5jbHVkZSA8
YXNtL2NhY2hlLmg+CiAKICNpZm5kZWYgX19BU1NFTUJMWV9fCmRpZmYgLS1naXQgYS9hcmNoL3No
L2luY2x1ZGUvYXNtL3NlZ21lbnQuaCBiL2FyY2gvc2gvaW5jbHVkZS9hc20vc2VnbWVudC5oCmRl
bGV0ZWQgZmlsZSBtb2RlIDEwMDY0NAppbmRleCAwMmU1NGEzMzM1ZDYuLjAwMDAwMDAwMDAwMAot
LS0gYS9hcmNoL3NoL2luY2x1ZGUvYXNtL3NlZ21lbnQuaAorKysgL2Rldi9udWxsCkBAIC0xLDMz
ICswLDAgQEAKLS8qIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBHUEwtMi4wICovCi0jaWZuZGVm
IF9fQVNNX1NIX1NFR01FTlRfSAotI2RlZmluZSBfX0FTTV9TSF9TRUdNRU5UX0gKLQotI2lmbmRl
ZiBfX0FTU0VNQkxZX18KLQotdHlwZWRlZiBzdHJ1Y3QgewotCXVuc2lnbmVkIGxvbmcgc2VnOwot
fSBtbV9zZWdtZW50X3Q7Ci0KLSNkZWZpbmUgTUFLRV9NTV9TRUcocykJKChtbV9zZWdtZW50X3Qp
IHsgKHMpIH0pCi0KLS8qCi0gKiBUaGUgZnMgdmFsdWUgZGV0ZXJtaW5lcyB3aGV0aGVyIGFyZ3Vt
ZW50IHZhbGlkaXR5IGNoZWNraW5nIHNob3VsZCBiZQotICogcGVyZm9ybWVkIG9yIG5vdC4gIElm
IGdldF9mcygpID09IFVTRVJfRFMsIGNoZWNraW5nIGlzIHBlcmZvcm1lZCwgd2l0aAotICogZ2V0
X2ZzKCkgPT0gS0VSTkVMX0RTLCBjaGVja2luZyBpcyBieXBhc3NlZC4KLSAqCi0gKiBGb3IgaGlz
dG9yaWNhbCByZWFzb25zLCB0aGVzZSBtYWNyb3MgYXJlIGdyb3NzbHkgbWlzbmFtZWQuCi0gKi8K
LSNkZWZpbmUgS0VSTkVMX0RTCU1BS0VfTU1fU0VHKDB4RkZGRkZGRkZVTCkKLSNpZmRlZiBDT05G
SUdfTU1VCi0jZGVmaW5lIFVTRVJfRFMJCU1BS0VfTU1fU0VHKFBBR0VfT0ZGU0VUKQotI2Vsc2UK
LSNkZWZpbmUgVVNFUl9EUwkJS0VSTkVMX0RTCi0jZW5kaWYKLQotI2RlZmluZSB1YWNjZXNzX2tl
cm5lbCgpIChnZXRfZnMoKS5zZWcgPT0gS0VSTkVMX0RTLnNlZykKLQotI2RlZmluZSBnZXRfZnMo
KQkoY3VycmVudF90aHJlYWRfaW5mbygpLT5hZGRyX2xpbWl0KQotI2RlZmluZSBzZXRfZnMoeCkJ
KGN1cnJlbnRfdGhyZWFkX2luZm8oKS0+YWRkcl9saW1pdCA9ICh4KSkKLQotI2VuZGlmIC8qIF9f
QVNTRU1CTFlfXyAqLwotI2VuZGlmIC8qIF9fQVNNX1NIX1NFR01FTlRfSCAqLwpkaWZmIC0tZ2l0
IGEvYXJjaC9zaC9pbmNsdWRlL2FzbS90aHJlYWRfaW5mby5oIGIvYXJjaC9zaC9pbmNsdWRlL2Fz
bS90aHJlYWRfaW5mby5oCmluZGV4IDU5OGQwMTg0ZmZlYS4uYjExOWI4NTlhMGEzIDEwMDY0NAot
LS0gYS9hcmNoL3NoL2luY2x1ZGUvYXNtL3RocmVhZF9pbmZvLmgKKysrIGIvYXJjaC9zaC9pbmNs
dWRlL2FzbS90aHJlYWRfaW5mby5oCkBAIC0zMCw3ICszMCw2IEBAIHN0cnVjdCB0aHJlYWRfaW5m
byB7CiAJX191MzIJCQlzdGF0dXM7CQkvKiB0aHJlYWQgc3luY2hyb25vdXMgZmxhZ3MgKi8KIAlf
X3UzMgkJCWNwdTsKIAlpbnQJCQlwcmVlbXB0X2NvdW50OyAvKiAwID0+IHByZWVtcHRhYmxlLCA8
MCA9PiBCVUcgKi8KLQltbV9zZWdtZW50X3QJCWFkZHJfbGltaXQ7CS8qIHRocmVhZCBhZGRyZXNz
IHNwYWNlICovCiAJdW5zaWduZWQgbG9uZwkJcHJldmlvdXNfc3A7CS8qIHNwIG9mIHByZXZpb3Vz
IHN0YWNrIGluIGNhc2UKIAkJCQkJCSAgIG9mIG5lc3RlZCBJUlEgc3RhY2tzICovCiAJX191OAkJ
CXN1cGVydmlzb3Jfc3RhY2tbMF07CkBAIC01OCw3ICs1Nyw2IEBAIHN0cnVjdCB0aHJlYWRfaW5m
byB7CiAJLnN0YXR1cwkJPSAwLAkJCVwKIAkuY3B1CQk9IDAsCQkJXAogCS5wcmVlbXB0X2NvdW50
CT0gSU5JVF9QUkVFTVBUX0NPVU5ULAlcCi0JLmFkZHJfbGltaXQJPSBLRVJORUxfRFMsCQlcCiB9
CiAKIC8qIGhvdyB0byBnZXQgdGhlIGN1cnJlbnQgc3RhY2sgcG9pbnRlciBmcm9tIEMgKi8KZGlm
ZiAtLWdpdCBhL2FyY2gvc2gvaW5jbHVkZS9hc20vdWFjY2Vzcy5oIGIvYXJjaC9zaC9pbmNsdWRl
L2FzbS91YWNjZXNzLmgKaW5kZXggY2NkMjE5ZDc0ODUxLi5hNzk2MDllYjE0YmUgMTAwNjQ0Ci0t
LSBhL2FyY2gvc2gvaW5jbHVkZS9hc20vdWFjY2Vzcy5oCisrKyBiL2FyY2gvc2gvaW5jbHVkZS9h
c20vdWFjY2Vzcy5oCkBAIC0yLDExICsyLDcgQEAKICNpZm5kZWYgX19BU01fU0hfVUFDQ0VTU19I
CiAjZGVmaW5lIF9fQVNNX1NIX1VBQ0NFU1NfSAogCi0jaW5jbHVkZSA8YXNtL3NlZ21lbnQuaD4K
ICNpbmNsdWRlIDxhc20vZXh0YWJsZS5oPgotCi0jZGVmaW5lIHVzZXJfYWRkcl9tYXgoKQkoY3Vy
cmVudF90aHJlYWRfaW5mbygpLT5hZGRyX2xpbWl0LnNlZykKLQogI2luY2x1ZGUgPGFzbS1nZW5l
cmljL2FjY2Vzc19vay5oPgogCiAvKgpkaWZmIC0tZ2l0IGEvYXJjaC9zaC9rZXJuZWwvaW9fdHJh
cHBlZC5jIGIvYXJjaC9zaC9rZXJuZWwvaW9fdHJhcHBlZC5jCmluZGV4IDAwNGFkMDEzMGIxMC4u
ZTgwM2IxNGVmMTJlIDEwMDY0NAotLS0gYS9hcmNoL3NoL2tlcm5lbC9pb190cmFwcGVkLmMKKysr
IGIvYXJjaC9zaC9rZXJuZWwvaW9fdHJhcHBlZC5jCkBAIC0yNzAsNyArMjcwLDYgQEAgc3RhdGlj
IHN0cnVjdCBtZW1fYWNjZXNzIHRyYXBwZWRfaW9fYWNjZXNzID0gewogCiBpbnQgaGFuZGxlX3Ry
YXBwZWRfaW8oc3RydWN0IHB0X3JlZ3MgKnJlZ3MsIHVuc2lnbmVkIGxvbmcgYWRkcmVzcykKIHsK
LQltbV9zZWdtZW50X3Qgb2xkZnM7CiAJaW5zbl9zaXplX3QgaW5zdHJ1Y3Rpb247CiAJaW50IHRt
cDsKIApAQCAtMjgxLDE2ICsyODAsMTIgQEAgaW50IGhhbmRsZV90cmFwcGVkX2lvKHN0cnVjdCBw
dF9yZWdzICpyZWdzLCB1bnNpZ25lZCBsb25nIGFkZHJlc3MpCiAKIAlXQVJOX09OKHVzZXJfbW9k
ZShyZWdzKSk7CiAKLQlvbGRmcyA9IGdldF9mcygpOwotCXNldF9mcyhLRVJORUxfRFMpOwotCWlm
IChjb3B5X2Zyb21fdXNlcigmaW5zdHJ1Y3Rpb24sICh2b2lkICopKHJlZ3MtPnBjKSwKLQkJCSAg
IHNpemVvZihpbnN0cnVjdGlvbikpKSB7Ci0JCXNldF9mcyhvbGRmcyk7CisJaWYgKGNvcHlfZnJv
bV9rZXJuZWxfbm9mYXVsdCgmaW5zdHJ1Y3Rpb24sICh2b2lkICopKHJlZ3MtPnBjKSwKKwkJCQkg
ICAgIHNpemVvZihpbnN0cnVjdGlvbikpKSB7CiAJCXJldHVybiAwOwogCX0KIAogCXRtcCA9IGhh
bmRsZV91bmFsaWduZWRfYWNjZXNzKGluc3RydWN0aW9uLCByZWdzLAogCQkJCSAgICAgICZ0cmFw
cGVkX2lvX2FjY2VzcywgMSwgYWRkcmVzcyk7Ci0Jc2V0X2ZzKG9sZGZzKTsKIAlyZXR1cm4gdG1w
ID09IDA7CiB9CmRpZmYgLS1naXQgYS9hcmNoL3NoL2tlcm5lbC9wcm9jZXNzXzMyLmMgYi9hcmNo
L3NoL2tlcm5lbC9wcm9jZXNzXzMyLmMKaW5kZXggMWMyOGUzY2RkYjYwLi5jYTAxMjg2YTA2MTAg
MTAwNjQ0Ci0tLSBhL2FyY2gvc2gva2VybmVsL3Byb2Nlc3NfMzIuYworKysgYi9hcmNoL3NoL2tl
cm5lbC9wcm9jZXNzXzMyLmMKQEAgLTEyMyw3ICsxMjMsNiBAQCBpbnQgY29weV90aHJlYWQodW5z
aWduZWQgbG9uZyBjbG9uZV9mbGFncywgdW5zaWduZWQgbG9uZyB1c3AsIHVuc2lnbmVkIGxvbmcg
YXJnLAogI2lmIGRlZmluZWQoQ09ORklHX1NIX0ZQVSkKIAkJY2hpbGRyZWdzLT5zciB8PSBTUl9G
RDsKICNlbmRpZgotCQl0aS0+YWRkcl9saW1pdCA9IEtFUk5FTF9EUzsKIAkJdGktPnN0YXR1cyAm
PSB+VFNfVVNFREZQVTsKIAkJcC0+dGhyZWFkLmZwdV9jb3VudGVyID0gMDsKIAkJcmV0dXJuIDA7
CkBAIC0xMzIsNyArMTMxLDYgQEAgaW50IGNvcHlfdGhyZWFkKHVuc2lnbmVkIGxvbmcgY2xvbmVf
ZmxhZ3MsIHVuc2lnbmVkIGxvbmcgdXNwLCB1bnNpZ25lZCBsb25nIGFyZywKIAogCWlmICh1c3Ap
CiAJCWNoaWxkcmVncy0+cmVnc1sxNV0gPSB1c3A7Ci0JdGktPmFkZHJfbGltaXQgPSBVU0VSX0RT
OwogCiAJaWYgKGNsb25lX2ZsYWdzICYgQ0xPTkVfU0VUVExTKQogCQljaGlsZHJlZ3MtPmdiciA9
IHRsczsKZGlmZiAtLWdpdCBhL2FyY2gvc2gva2VybmVsL3RyYXBzXzMyLmMgYi9hcmNoL3NoL2tl
cm5lbC90cmFwc18zMi5jCmluZGV4IGIzYzcxNWJjMjU0Yi4uNmNkZGEzYTYyMWExIDEwMDY0NAot
LS0gYS9hcmNoL3NoL2tlcm5lbC90cmFwc18zMi5jCisrKyBiL2FyY2gvc2gva2VybmVsL3RyYXBz
XzMyLmMKQEAgLTc1LDYgKzc1LDIzIEBAIHN0YXRpYyBzdHJ1Y3QgbWVtX2FjY2VzcyB1c2VyX21l
bV9hY2Nlc3MgPSB7CiAJY29weV90b191c2VyLAogfTsKIAorc3RhdGljIHVuc2lnbmVkIGxvbmcg
Y29weV9mcm9tX2tlcm5lbF93cmFwcGVyKHZvaWQgKmRzdCwgY29uc3Qgdm9pZCBfX3VzZXIgKnNy
YywKKwkJCQkJICAgICAgdW5zaWduZWQgbG9uZyBjbnQpCit7CisJcmV0dXJuIGNvcHlfZnJvbV9r
ZXJuZWxfbm9mYXVsdChkc3QsIChjb25zdCB2b2lkIF9fZm9yY2UgKilzcmMsIGNudCk7Cit9CisK
K3N0YXRpYyB1bnNpZ25lZCBsb25nIGNvcHlfdG9fa2VybmVsX3dyYXBwZXIodm9pZCBfX3VzZXIg
KmRzdCwgY29uc3Qgdm9pZCAqc3JjLAorCQkJCQkgICAgdW5zaWduZWQgbG9uZyBjbnQpCit7CisJ
cmV0dXJuIGNvcHlfdG9fa2VybmVsX25vZmF1bHQoKHZvaWQgX19mb3JjZSAqKWRzdCwgc3JjLCBj
bnQpOworfQorCitzdGF0aWMgc3RydWN0IG1lbV9hY2Nlc3Mga2VybmVsX21lbV9hY2Nlc3MgPSB7
CisJY29weV9mcm9tX2tlcm5lbF93cmFwcGVyLAorCWNvcHlfdG9fa2VybmVsX3dyYXBwZXIsCit9
OworCiAvKgogICogaGFuZGxlIGFuIGluc3RydWN0aW9uIHRoYXQgZG9lcyBhbiB1bmFsaWduZWQg
bWVtb3J5IGFjY2VzcyBieSBlbXVsYXRpbmcgdGhlCiAgKiBkZXNpcmVkIGJlaGF2aW91cgpAQCAt
NDczLDcgKzQ5MCw2IEBAIGFzbWxpbmthZ2Ugdm9pZCBkb19hZGRyZXNzX2Vycm9yKHN0cnVjdCBw
dF9yZWdzICpyZWdzLAogCQkJCSB1bnNpZ25lZCBsb25nIGFkZHJlc3MpCiB7CiAJdW5zaWduZWQg
bG9uZyBlcnJvcl9jb2RlID0gMDsKLQltbV9zZWdtZW50X3Qgb2xkZnM7CiAJaW5zbl9zaXplX3Qg
aW5zdHJ1Y3Rpb247CiAJaW50IHRtcDsKIApAQCAtNDg5LDEzICs1MDUsMTAgQEAgYXNtbGlua2Fn
ZSB2b2lkIGRvX2FkZHJlc3NfZXJyb3Ioc3RydWN0IHB0X3JlZ3MgKnJlZ3MsCiAJCWxvY2FsX2ly
cV9lbmFibGUoKTsKIAkJaW5jX3VuYWxpZ25lZF91c2VyX2FjY2VzcygpOwogCi0JCW9sZGZzID0g
Zm9yY2VfdWFjY2Vzc19iZWdpbigpOwogCQlpZiAoY29weV9mcm9tX3VzZXIoJmluc3RydWN0aW9u
LCAoaW5zbl9zaXplX3QgX191c2VyICopKHJlZ3MtPnBjICYgfjEpLAogCQkJCSAgIHNpemVvZihp
bnN0cnVjdGlvbikpKSB7Ci0JCQlmb3JjZV91YWNjZXNzX2VuZChvbGRmcyk7CiAJCQlnb3RvIHVz
cGFjZV9zZWd2OwogCQl9Ci0JCWZvcmNlX3VhY2Nlc3NfZW5kKG9sZGZzKTsKIAogCQkvKiBzaG91
dCBhYm91dCB1c2Vyc3BhY2UgZml4dXBzICovCiAJCXVuYWxpZ25lZF9maXh1cHNfbm90aWZ5KGN1
cnJlbnQsIGluc3RydWN0aW9uLCByZWdzKTsKQEAgLTUxOCwxMSArNTMxLDkgQEAgYXNtbGlua2Fn
ZSB2b2lkIGRvX2FkZHJlc3NfZXJyb3Ioc3RydWN0IHB0X3JlZ3MgKnJlZ3MsCiAJCQlnb3RvIHVz
cGFjZV9zZWd2OwogCQl9CiAKLQkJb2xkZnMgPSBmb3JjZV91YWNjZXNzX2JlZ2luKCk7CiAJCXRt
cCA9IGhhbmRsZV91bmFsaWduZWRfYWNjZXNzKGluc3RydWN0aW9uLCByZWdzLAogCQkJCQkgICAg
ICAmdXNlcl9tZW1fYWNjZXNzLCAwLAogCQkJCQkgICAgICBhZGRyZXNzKTsKLQkJZm9yY2VfdWFj
Y2Vzc19lbmQob2xkZnMpOwogCiAJCWlmICh0bXAgPT0gMCkKIAkJCXJldHVybjsgLyogc29ydGVk
ICovCkBAIC01MzgsMjEgKzU0OSwxOCBAQCBhc21saW5rYWdlIHZvaWQgZG9fYWRkcmVzc19lcnJv
cihzdHJ1Y3QgcHRfcmVncyAqcmVncywKIAkJaWYgKHJlZ3MtPnBjICYgMSkKIAkJCWRpZSgidW5h
bGlnbmVkIHByb2dyYW0gY291bnRlciIsIHJlZ3MsIGVycm9yX2NvZGUpOwogCi0JCXNldF9mcyhL
RVJORUxfRFMpOwotCQlpZiAoY29weV9mcm9tX3VzZXIoJmluc3RydWN0aW9uLCAodm9pZCBfX3Vz
ZXIgKikocmVncy0+cGMpLAorCQlpZiAoY29weV9mcm9tX2tlcm5lbF9ub2ZhdWx0KCZpbnN0cnVj
dGlvbiwgKHZvaWQgKikocmVncy0+cGMpLAogCQkJCSAgIHNpemVvZihpbnN0cnVjdGlvbikpKSB7
CiAJCQkvKiBBcmdoLiBGYXVsdCBvbiB0aGUgaW5zdHJ1Y3Rpb24gaXRzZWxmLgogCQkJICAgVGhp
cyBzaG91bGQgbmV2ZXIgaGFwcGVuIG5vbi1TTVAKIAkJCSovCi0JCQlzZXRfZnMob2xkZnMpOwog
CQkJZGllKCJpbnNuIGZhdWx0aW5nIGluIGRvX2FkZHJlc3NfZXJyb3IiLCByZWdzLCAwKTsKIAkJ
fQogCiAJCXVuYWxpZ25lZF9maXh1cHNfbm90aWZ5KGN1cnJlbnQsIGluc3RydWN0aW9uLCByZWdz
KTsKIAotCQloYW5kbGVfdW5hbGlnbmVkX2FjY2VzcyhpbnN0cnVjdGlvbiwgcmVncywgJnVzZXJf
bWVtX2FjY2VzcywKKwkJaGFuZGxlX3VuYWxpZ25lZF9hY2Nlc3MoaW5zdHJ1Y3Rpb24sIHJlZ3Ms
ICZrZXJuZWxfbWVtX2FjY2VzcywKIAkJCQkJMCwgYWRkcmVzcyk7Ci0JCXNldF9mcyhvbGRmcyk7
CiAJfQogfQogCi0tIAoyLjI5LjIKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fCk9wZW5SSVNDIG1haWxpbmcgbGlzdApPcGVuUklTQ0BsaXN0cy5saWJyZWNv
cmVzLm9yZwpodHRwczovL2xpc3RzLmxpYnJlY29yZXMub3JnL2xpc3RpbmZvL29wZW5yaXNjCg==
