Return-Path: <openrisc-bounces@lists.librecores.org>
X-Original-To: lists+openrisc@lfdr.de
Delivered-To: lists+openrisc@lfdr.de
Received: from mail.librecores.org (lists.librecores.org [88.198.125.70])
	by mail.lfdr.de (Postfix) with ESMTP id 6409044AD3C
	for <lists+openrisc@lfdr.de>; Tue,  9 Nov 2021 13:13:19 +0100 (CET)
Received: from [172.31.1.100] (localhost.localdomain [127.0.0.1])
	by mail.librecores.org (Postfix) with ESMTP id 0272A24229;
	Tue,  9 Nov 2021 13:13:19 +0100 (CET)
Received: from mail-pg1-f182.google.com (mail-pg1-f182.google.com
 [209.85.215.182])
 by mail.librecores.org (Postfix) with ESMTPS id 41BD523F72
 for <openrisc@lists.librecores.org>; Tue,  9 Nov 2021 13:13:17 +0100 (CET)
Received: by mail-pg1-f182.google.com with SMTP id r80so7981392pgr.9
 for <openrisc@lists.librecores.org>; Tue, 09 Nov 2021 04:13:17 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=gmail.com; s=20210112;
 h=from:to:cc:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=pKqF76GHr4wypYS/aitTLKrnukJQCV5uEmTcj2qsOe8=;
 b=kgFItEegrSRQSjPv9b46S31JEQz/LaLl5ewdmBsFQgJM4JNSVYCfJvgak7135AETN3
 VCXHfTUQzwqxZ75MsQp0hnytzeXXtKQsrIjmEkaj/TnGFbZoyYh7dfcIdmnqGxq+F102
 YUHMRCPgBxYZRLTWOL0W6AHep6bIUuQGzkfUoUFOuMyyL0ZdgUOn7nB/l4u1zJwRpeRU
 GxM7chPw+AI8iD9Qb2mXC6KTvdU/aYNUjqIwdY9Tz1CEVOJeiJXKmdJg0S75tmx3UE4I
 7qAdDN7h4S9KeGy8a2QhmmTh6s3a3P1fobbtHYKVz5zgX/r/8X1wOxckWnoQ3VaQpv8j
 ZwKA==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
 d=1e100.net; s=20210112;
 h=x-gm-message-state:from:to:cc:subject:date:message-id:mime-version
 :content-transfer-encoding;
 bh=pKqF76GHr4wypYS/aitTLKrnukJQCV5uEmTcj2qsOe8=;
 b=UEB11Y7u1TdUDJCYMPweymfR5LyHhgolFOI/FBkstXLlXmQkyGwsssJRGT7SFTHqOU
 VZF512l7sK0ISlYf+Zdx9atld/qGEEaQjU/dx1ftcFY5UCnVanBxivy6ODBiZ9OLXamh
 QO7UoM5pYKhyemX0siD2MiPhsikVWq9KL0O6d7sXq+30sP0cQmr6W6hzpqph1+Gmdca7
 M+rzSS+5E3pZhI+xzx89vZ5Qj5ryed/J6FZC2opPA2+JX82SRB7pOAWAwtHLD8wHTMNn
 foy34f74mbknY6ErC+uPxwrRTzr5jFcdASA6L0hjri2jmUqtB05LtfvCEENHNo2cur+T
 9pMw==
X-Gm-Message-State: AOAM530miAbVZ/bLQpIxPzJ+b8RzxUGiVKaYAC+igADQRbMCRIumuBl8
 rF7SIESvSo+CE+e0nxpvMbc=
X-Google-Smtp-Source: ABdhPJxPueiT80NssHXcxjcXKtYW/P0Dhd1YSnBof/7nyNZu2JrJmDsDv8dsRkQwnw1TLhQe6kvsig==
X-Received: by 2002:a63:9508:: with SMTP id p8mr5379214pgd.413.1636459995639; 
 Tue, 09 Nov 2021 04:13:15 -0800 (PST)
Received: from localhost ([2409:10:24a0:4700:e8ad:216a:2a9d:6d0c])
 by smtp.gmail.com with ESMTPSA id nh21sm2518107pjb.30.2021.11.09.04.13.14
 (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
 Tue, 09 Nov 2021 04:13:14 -0800 (PST)
From: Stafford Horne <shorne@gmail.com>
To: GCC patches <gcc-patches@gcc.gnu.org>
Date: Tue,  9 Nov 2021 21:13:08 +0900
Message-Id: <20211109121308.583835-1-shorne@gmail.com>
X-Mailer: git-send-email 2.31.1
MIME-Version: 1.0
Subject: [OpenRISC] [RFC PATCH] or1k: Fix clobbering of _mcount argument if
 fPIC is enabled
X-BeenThere: openrisc@lists.librecores.org
X-Mailman-Version: 2.1.26
Precedence: list
List-Id: Discussion around the OpenRISC processor
 <openrisc.lists.librecores.org>
List-Unsubscribe: <https://lists.librecores.org/options/openrisc>,
 <mailto:openrisc-request@lists.librecores.org?subject=unsubscribe>
List-Archive: <http://lists.librecores.org/pipermail/openrisc/>
List-Post: <mailto:openrisc@lists.librecores.org>
List-Help: <mailto:openrisc-request@lists.librecores.org?subject=help>
List-Subscribe: <https://lists.librecores.org/listinfo/openrisc>,
 <mailto:openrisc-request@lists.librecores.org?subject=subscribe>
Cc: Openrisc <openrisc@lists.librecores.org>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: openrisc-bounces@lists.librecores.org
Sender: "OpenRISC" <openrisc-bounces@lists.librecores.org>

UmVjZW50bHkgd2UgY2hhbmdlZCB0aGUgUFJPRklMRV9IT09LIF9tY291bnQgY2FsbCB0byBwYXNz
IGluIHRoZSBsaW5rCnJlZ2lzdGVyIGFzIGFuIGFyZ3VtZW50LiAgVGhpcyBhY3R1YWxseSBkb2Vz
IG5vdCB3b3JrIHdoZW4gdGhlIF9tY291bnQKY2FsbCB1c2VzIGEgUExUIGJlY2F1c2UgdGhlIEdP
VCByZWdpc3RlciBzZXR1cCBjb2RlIGVuZHMgdXAgZ2V0dGluZwppbnNlcnRlZCBiZWZvcmUgdGhl
IFBST0ZJTEVfSE9PSyBhbmQgY2xvYmJlcnMgdGhlIGxpbmsgcmVnaXN0ZXIKYXJndW1lbnQuCgpU
aGVzZSBnbGliYyB0ZXN0cyBhcmUgZmFpbGluZzoKICBnbW9uL3RzdC1nbW9uLXBpZS1ncHJvZgog
IGdtb24vdHN0LWdtb24tc3RhdGljLWdwcm9mCgpUaGlzIHBhdGNoIGZpeGVzIHRoaXMgYnkgc2F2
aW5nIHRoZSBpbnN0cnVjdGlvbiB0aGF0IHN0b3JlcyB0aGUgTGluawpSZWdpc3RlciB0byB0aGUg
X21jb3VudCBhcmd1bWVudCBhbmQgdGhlbiBpbnNlcnRzIHRoZSBHT1QgcmVnaXN0ZXIgc2V0dXAK
aW5zdHJ1Y3Rpb25zIGFmdGVyIHRoYXQuCgpGb3IgZXhhbXBsZToKCm1haW4uYzoKCiAgICBleHRl
cm4gaW50IGU7CgogICAgaW50IGYyKGludCBhKSB7CiAgICAgIHJldHVybiBhICsgZTsKICAgIH0K
CiAgICBpbnQgZjEoaW50IGEpIHsKICAgICAgcmV0dXJuIGYyIChhICsgYSk7CiAgICB9CgogICAg
aW50IG1haW4oaW50IGFyZ2MsIGNoYXIgKiogYXJndikgewogICAgICByZXR1cm4gZjEgKGFyZ2Mp
OwogICAgfQoKQ29tcGlsZWQ6CgogICAgb3Ixay1zbWgtbGludXgtZ251LWdjYyAtV2FsbCAtYyAt
TzIgLWZQSUMgLXBnIC1TIG1haW4uYwoKQmVmb3JlIEZpeDoKCiAgICBtYWluOgogICAgICAgIGwu
YWRkaSAgcjEsIHIxLCAtMTYKICAgICAgICBsLnN3ICAgIDgocjEpLCByMgogICAgICAgIGwuc3cg
ICAgMChyMSksIHIxNgogICAgICAgIGwuYWRkaSAgcjIsIHIxLCAxNiAgICMgS2VlcGluZyBGUCwg
YnV0IG5vdCBuZWVkZWQKICAgICAgICBsLnN3ICAgIDQocjEpLCByMTgKICAgICAgICBsLnN3ICAg
IDEyKHIxKSwgcjkKICAgICAgICBsLmphbCAgIDggICAgICAgICAgICAjIEdPVCBTZXR1cCBjbG9i
YmVycyByOSAoTGluayBSZWdpc3RlcikKICAgICAgICAgbC5tb3ZoaSAgICAgICAgcjE2LCBnb3Rw
Y2hpKF9HTE9CQUxfT0ZGU0VUX1RBQkxFXy00KQogICAgICAgIGwub3JpICAgcjE2LCByMTYsIGdv
dHBjbG8oX0dMT0JBTF9PRkZTRVRfVEFCTEVfKzApCiAgICAgICAgbC5hZGQgICByMTYsIHIxNiwg
cjkKICAgICAgICBsLm9yICAgIHIxOCwgcjMsIHIzCiAgICAgICAgbC5vciAgICByMywgcjksIHI5
ICAgICMgVGhpcyBpcyBub3QgdGhlIG9yaWdpbmFsIExSCiAgICAgICAgbC5qYWwgICBwbHQoX21j
b3VudCkKICAgICAgICAgbC5ub3AKCiAgICAgICAgbC5qYWwgICBwbHQoZjEpCiAgICAgICAgIGwu
b3IgICAgcjMsIHIxOCwgcjE4CiAgICAgICAgbC5sd3ogICByOSwgMTIocjEpCiAgICAgICAgbC5s
d3ogICByMTYsIDAocjEpCiAgICAgICAgbC5sd3ogICByMTgsIDQocjEpCiAgICAgICAgbC5sd3og
ICByMiwgOChyMSkKICAgICAgICBsLmpyICAgIHI5CiAgICAgICAgIGwuYWRkaSAgcjEsIHIxLCAx
NgoKQWZ0ZXIgdGhlIGZpeDoKCiAgICBtYWluOgogICAgICAgIGwuYWRkaSAgcjEsIHIxLCAtMTIK
ICAgICAgICBsLnN3ICAgIDAocjEpLCByMTYKICAgICAgICBsLnN3ICAgIDQocjEpLCByMTgKICAg
ICAgICBsLnN3ICAgIDgocjEpLCByOQogICAgICAgIGwub3IgICAgcjE4LCByMywgcjMKICAgICAg
ICBsLm9yICAgIHIzLCByOSwgcjkgICAgIyBXZSBub3cgaGF2ZSByOSAoTFIpIHNldCBlYXJseQog
ICAgICAgIGwuamFsICAgOCAgICAgICAgICAgICAjIENsb2JiZXJzIHI5IChMaW5rIFJlZ2lzdGVy
KQogICAgICAgICBsLm1vdmhpICAgICAgICByMTYsIGdvdHBjaGkoX0dMT0JBTF9PRkZTRVRfVEFC
TEVfLTQpCiAgICAgICAgbC5vcmkgICByMTYsIHIxNiwgZ290cGNsbyhfR0xPQkFMX09GRlNFVF9U
QUJMRV8rMCkKICAgICAgICBsLmFkZCAgIHIxNiwgcjE2LCByOQogICAgICAgIGwuamFsICAgcGx0
KF9tY291bnQpCiAgICAgICAgIGwubm9wCgogICAgICAgIGwuamFsICAgcGx0KGYxKQogICAgICAg
ICBsLm9yICAgIHIzLCByMTgsIHIxOAogICAgICAgIGwubHd6ICAgcjksIDgocjEpCiAgICAgICAg
bC5sd3ogICByMTYsIDAocjEpCiAgICAgICAgbC5sd3ogICByMTgsIDQocjEpCiAgICAgICAgbC5q
ciAgICByOQogICAgICAgICBsLmFkZGkgIHIxLCByMSwgMTIKCkZpeGVzOiAzMDg1MzFkMTQ4YSAo
Im9yMWs6IEFkZCByZXR1cm4gYWRkcmVzcyBhcmd1bWVudCB0byBfbWNvdW50IGNhbGwiKQoKZ2Nj
L0NoYW5nZUxvZzoKCSogY29uZmlnL29yMWsvb3Ixay1wcm90b3MuaCAob3Ixa19wcm9maWxlX2hv
b2spOiBOZXcgZnVuY3Rpb24uCgkqIGNvbmZpZy9vcjFrL29yMWsuaCAoUFJPRklMRV9IT09LKTog
Q2hhbmdlIG1hY3JvIHRvIHJlZmVyZW5jZQoJbmV3IGZ1bmN0aW9uIG9yMWtfcHJvZmlsZV9ob29r
LgoJKiBjb25maWcvb3Ixay9vcjFrLmMgKHN0cnVjdCBtYWNoaW5lX2Z1bmN0aW9uKTogQWRkIG5l
dyBmaWVsZAoJc2V0X21jb3VudF9hcmdfaW5zbi4KCShvcjFrX3Byb2ZpbGVfaG9vayk6IE5ldyBm
dW5jdGlvbi4KCShvcjFrX2luaXRfcGljX3JlZyk6IFVwZGF0ZSB0byBpbmplY3QgcGljIHJ0eCBh
ZnRlciBfbWNvdW50IGFyZwoJd2hlbiBwcm9maWxpbmcuCgkob3Ixa19mcmFtZV9wb2ludGVyX3Jl
cXVpcmVkKTogRnJhbWUgcG9pbnRlciBubyBsb25nZXIgbmVlZGVkCgl3aGVuIHByb2ZpbGluZy4K
LS0tCkkgYW0gc2VuZGluZyB0aGlzIGFzIFJGQyBhcyBJIHRoaW5rIHRoZXJlIHNob3VsZCBiZSBh
IGJldHRlciB3YXkgdG8gaGFuZGxlCnRoaXMgYnV0IEkgYW0gbm90IHN1cmUgaG93IHRoYXQgd291
bGQgYmUuCgpBbiBlYXJsaWVyIHBhdGNoIEkgdHJpZWQgd2FzIHRvIHN0b3JlIHRoZSBsaW5rIHJl
Z2lzdGVyIHRvIGEgdGVtcG9yYXJ5IHJlZ2lzdGVyCnRoZW4gcGFzcyB0aGUgdGVtcG9yYXJ5IHJl
Z2lzdGVyIGFzIGFuIGFyZ3VtZW50IHRvIF9tY291bnQsIGhvd2V2ZXIKb3B0aW1pemF0aW9ucyBj
YXVzZWQgdGhlIGxpbmsgcmVnaXN0ZXIgdG8gc3RpbGwgZ2V0IGNsb2JiZXJlZC4KCkFueSB0aG91
Z2h0cyB3aWxsIGJlIGhlbHBmdWwuCgotU3RhZmZvcmQKCiBnY2MvY29uZmlnL29yMWsvb3Ixay1w
cm90b3MuaCB8ICAxICsKIGdjYy9jb25maWcvb3Ixay9vcjFrLmMgICAgICAgIHwgNDkgKysrKysr
KysrKysrKysrKysrKysrKysrKysrKy0tLS0tLS0KIGdjYy9jb25maWcvb3Ixay9vcjFrLmggICAg
ICAgIHwgIDggKy0tLS0tCiAzIGZpbGVzIGNoYW5nZWQsIDQyIGluc2VydGlvbnMoKyksIDE2IGRl
bGV0aW9ucygtKQoKZGlmZiAtLWdpdCBhL2djYy9jb25maWcvb3Ixay9vcjFrLXByb3Rvcy5oIGIv
Z2NjL2NvbmZpZy9vcjFrL29yMWstcHJvdG9zLmgKaW5kZXggYmJiNTRjOGY3OTAuLjU2NTU0ZjI5
MzdmIDEwMDY0NAotLS0gYS9nY2MvY29uZmlnL29yMWsvb3Ixay1wcm90b3MuaAorKysgYi9nY2Mv
Y29uZmlnL29yMWsvb3Ixay1wcm90b3MuaApAQCAtMjAsNiArMjAsNyBAQCBhbG9uZyB3aXRoIEdD
Qzsgc2VlIHRoZSBmaWxlIENPUFlJTkczLiAgSWYgbm90IHNlZQogZXh0ZXJuIEhPU1RfV0lERV9J
TlQgb3Ixa19pbml0aWFsX2VsaW1pbmF0aW9uX29mZnNldCAoaW50LCBpbnQpOwogZXh0ZXJuIHZv
aWQgb3Ixa19leHBhbmRfcHJvbG9ndWUgKHZvaWQpOwogZXh0ZXJuIHZvaWQgb3Ixa19leHBhbmRf
ZXBpbG9ndWUgKHZvaWQpOworZXh0ZXJuIHZvaWQgb3Ixa19wcm9maWxlX2hvb2sgKHZvaWQpOwog
ZXh0ZXJuIHZvaWQgb3Ixa19leHBhbmRfZWhfcmV0dXJuIChydHgpOwogZXh0ZXJuIHJ0eCAgb3Ix
a19pbml0aWFsX2ZyYW1lX2FkZHIgKHZvaWQpOwogZXh0ZXJuIHJ0eCAgb3Ixa19keW5hbWljX2No
YWluX2FkZHIgKHJ0eCk7CmRpZmYgLS1naXQgYS9nY2MvY29uZmlnL29yMWsvb3Ixay5jIGIvZ2Nj
L2NvbmZpZy9vcjFrL29yMWsuYwppbmRleCBlNzcyYTdhZGRlYS4uMzM1YzRjNWRlY2YgMTAwNjQ0
Ci0tLSBhL2djYy9jb25maWcvb3Ixay9vcjFrLmMKKysrIGIvZ2NjL2NvbmZpZy9vcjFrL29yMWsu
YwpAQCAtNzMsNiArNzMsMTAgQEAgc3RydWN0IEdUWSgoKSkgbWFjaGluZV9mdW5jdGlvbgogCiAg
IC8qIFJlbWVtYmVyIHdoZXJlIHRoZSBzZXRfZ290X3BsYWNlaG9sZGVyIGlzIGxvY2F0ZWQuICAq
LwogICBydHhfaW5zbiAqc2V0X2dvdF9pbnNuOworCisgIC8qIFJlbWVtYmVyIHdoZXJlIG1jb3Vu
dCBhcmdzIGFyZSBzdG9yZWQgc28gd2UgY2FuIGluc2VydCBzZXRfZ290X2luc24KKyAgICAgYWZ0
ZXIuICAqLworICBydHhfaW5zbiAqc2V0X21jb3VudF9hcmdfaW5zbjsKIH07CiAKIC8qIFplcm8g
aW5pdGlhbGl6YXRpb24gaXMgT0sgZm9yIGFsbCBjdXJyZW50IGZpZWxkcy4gICovCkBAIC00MTUs
NiArNDE5LDI1IEBAIG9yMWtfZXhwYW5kX2VwaWxvZ3VlICh2b2lkKQogCQkJICAgRUhfUkVUVVJO
X1NUQUNLQURKX1JUWCkpOwogfQogCisvKiBXb3JrZXIgZm9yIFBST0ZJTEVfSE9PSy4KKyAgIFRo
ZSBPcGVuUklTQyBwcm9maWxlIGhvb2sgdXNlcyB0aGUgbGluayByZWdpc3RlciB3aGljaCB3aWxs
IGdldCBjbG9iYmVyZWQgYnkKKyAgIHRoZSBHT1Qgc2V0dXAgUlRYLiAgVGhpcyBzZXRzIHVwIGEg
cGxhY2Vob2xkZXIgdG8gYWxsb3cgaW5qZWN0aW5nIG9mIHRoZSBHT1QKKyAgIHNldHVwIFJUWCB0
byBhdm9pZCBjbG9iYmVyaW5nLiAgKi8KKwordm9pZAorb3Ixa19wcm9maWxlX2hvb2sgKHZvaWQp
Cit7CisgIHJ0eCBhMSA9IGdlbl9ydHhfUkVHIChQbW9kZSwgMyk7CisgIHJ0eCByYSA9IGdldF9o
YXJkX3JlZ19pbml0aWFsX3ZhbCAoUG1vZGUsIExSX1JFR05VTSk7CisgIHJ0eCBmdW4gPSBnZW5f
cnR4X1NZTUJPTF9SRUYgKFBtb2RlLCAiX21jb3VudCIpOworCisgIC8qIEtlZXAgdHJhY2sgb2Yg
d2hlcmUgd2Ugc2V0dXAgdGhlIF9tY291bnQgYXJndW1lbnQgc28gd2UgY2FuIGluc2VydCB0aGUK
KyAgICAgR09UIHNldHVwIFJUWCBhZnRlciBpdC4gICovCisgIGNmdW4tPm1hY2hpbmUtPnNldF9t
Y291bnRfYXJnX2luc24gPSBlbWl0X21vdmVfaW5zbiAoYTEsIHJhKTsKKworICBlbWl0X2xpYnJh
cnlfY2FsbCAoZnVuLCBMQ1RfTk9STUFMLCBWT0lEbW9kZSwgYTEsIFBtb2RlKTsKK30KKwogLyog
V29ya2VyIGZvciBUQVJHRVRfSU5JVF9QSUNfUkVHLgogICAgSW5pdGlhbGl6ZSB0aGUgY2Z1bi0+
bWFjaGluZS0+c2V0X2dvdF9pbnNuIHJ0eCBhbmQgaW5zZXJ0IGl0IGF0IHRoZSBlbnRyeQogICAg
b2YgdGhlIGN1cnJlbnQgZnVuY3Rpb24uICBUaGUgcnR4IGlzIGp1c3QgYSB0ZW1wb3JhcnkgcGxh
Y2Vob2xkZXIgZm9yCkBAIC00MjMsMTcgKzQ0NiwyNSBAQCBvcjFrX2V4cGFuZF9lcGlsb2d1ZSAo
dm9pZCkKIHN0YXRpYyB2b2lkCiBvcjFrX2luaXRfcGljX3JlZyAodm9pZCkKIHsKLSAgc3RhcnRf
c2VxdWVuY2UgKCk7CiAKLSAgY2Z1bi0+bWFjaGluZS0+c2V0X2dvdF9pbnNuCi0gICAgPSBlbWl0
X2luc24gKGdlbl9zZXRfZ290X3RtcCAocGljX29mZnNldF90YWJsZV9ydHgpKTsKKyAgaWYgKGNy
dGwtPnByb2ZpbGUpCisgICAgY2Z1bi0+bWFjaGluZS0+c2V0X2dvdF9pbnNuID0KKyAgICAgIGVt
aXRfaW5zbl9hZnRlciAoZ2VuX3NldF9nb3RfdG1wIChwaWNfb2Zmc2V0X3RhYmxlX3J0eCksCisJ
CSAgICAgICBjZnVuLT5tYWNoaW5lLT5zZXRfbWNvdW50X2FyZ19pbnNuKTsKKyAgZWxzZQorICAg
IHsKKyAgICAgIHN0YXJ0X3NlcXVlbmNlICgpOworCisgICAgICBjZnVuLT5tYWNoaW5lLT5zZXRf
Z290X2luc24gPQorCWVtaXRfaW5zbiAoZ2VuX3NldF9nb3RfdG1wIChwaWNfb2Zmc2V0X3RhYmxl
X3J0eCkpOwogCi0gIHJ0eF9pbnNuICpzZXEgPSBnZXRfaW5zbnMgKCk7Ci0gIGVuZF9zZXF1ZW5j
ZSAoKTsKKyAgICAgIHJ0eF9pbnNuICpzZXEgPSBnZXRfaW5zbnMgKCk7CisgICAgICBlbmRfc2Vx
dWVuY2UgKCk7CiAKLSAgZWRnZSBlbnRyeV9lZGdlID0gc2luZ2xlX3N1Y2NfZWRnZSAoRU5UUllf
QkxPQ0tfUFRSX0ZPUl9GTiAoY2Z1bikpOwotICBpbnNlcnRfaW5zbl9vbl9lZGdlIChzZXEsIGVu
dHJ5X2VkZ2UpOwotICBjb21taXRfb25lX2VkZ2VfaW5zZXJ0aW9uIChlbnRyeV9lZGdlKTsKKyAg
ICAgIGVkZ2UgZW50cnlfZWRnZSA9IHNpbmdsZV9zdWNjX2VkZ2UgKEVOVFJZX0JMT0NLX1BUUl9G
T1JfRk4gKGNmdW4pKTsKKyAgICAgIGluc2VydF9pbnNuX29uX2VkZ2UgKHNlcSwgZW50cnlfZWRn
ZSk7CisgICAgICBjb21taXRfb25lX2VkZ2VfaW5zZXJ0aW9uIChlbnRyeV9lZGdlKTsKKyAgICB9
CiB9CiAKICN1bmRlZiBUQVJHRVRfSU5JVF9QSUNfUkVHCkBAIC00ODAsNyArNTExLDcgQEAgb3Ix
a19mcmFtZV9wb2ludGVyX3JlcXVpcmVkICgpCiB7CiAgIC8qID8/PyBXaGlsZSBJUkEgY2hlY2tz
IGFjY2Vzc2VzX3ByaW9yX2ZyYW1lcywgcmVsb2FkIGRvZXMgbm90LgogICAgICBXZSBkbyB3YW50
IHRoZSBmcmFtZSBwb2ludGVyIGZvciB0aGlzIGNhc2UuICAqLwotICByZXR1cm4gKGNydGwtPmFj
Y2Vzc2VzX3ByaW9yX2ZyYW1lcyB8fCBjcnRsLT5wcm9maWxlKTsKKyAgcmV0dXJuIChjcnRsLT5h
Y2Nlc3Nlc19wcmlvcl9mcmFtZXMpOwogfQogCiAvKiBFeHBhbmQgdGhlICJlaF9yZXR1cm4iIHBh
dHRlcm4uCmRpZmYgLS1naXQgYS9nY2MvY29uZmlnL29yMWsvb3Ixay5oIGIvZ2NjL2NvbmZpZy9v
cjFrL29yMWsuaAppbmRleCA0NjAzY2I2NzE2MC4uY2UwYTQ3ZGZhNjYgMTAwNjQ0Ci0tLSBhL2dj
Yy9jb25maWcvb3Ixay9vcjFrLmgKKysrIGIvZ2NjL2NvbmZpZy9vcjFrL29yMWsuaApAQCAtMzg1
LDEzICszODUsNyBAQCBkbyB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgIFwKIAogLyogRW1pdCBydGwgZm9yIHByb2ZpbGluZy4gIE91dHB1dCBhc3Nl
bWJsZXIgY29kZSB0byBjYWxsICJfbWNvdW50IiBmb3IKICAgIHByb2ZpbGluZyBhIGZ1bmN0aW9u
IGVudHJ5LiAgKi8KLSNkZWZpbmUgUFJPRklMRV9IT09LKExBQkVMKQkJCQkJCVwKLSAgewkJCQkJ
CQkJCVwKLSAgICBydHggZnVuLCByYTsJCQkJCQkJXAotICAgIHJhID0gZ2V0X2hhcmRfcmVnX2lu
aXRpYWxfdmFsIChQbW9kZSwgTFJfUkVHTlVNKTsJCQlcCi0gICAgZnVuID0gZ2VuX3J0eF9TWU1C
T0xfUkVGIChQbW9kZSwgIl9tY291bnQiKTsJCQlcCi0gICAgZW1pdF9saWJyYXJ5X2NhbGwgKGZ1
biwgTENUX05PUk1BTCwgVk9JRG1vZGUsIHJhLCBQbW9kZSk7CQlcCi0gIH0KKyNkZWZpbmUgUFJP
RklMRV9IT09LKExBQkVMKSAgb3Ixa19wcm9maWxlX2hvb2soKQogCiAvKiBBbGwgdGhlIHdvcmsg
aXMgZG9uZSBpbiBQUk9GSUxFX0hPT0ssIGJ1dCB0aGlzIGlzIHN0aWxsIHJlcXVpcmVkLiAgKi8K
ICNkZWZpbmUgRlVOQ1RJT05fUFJPRklMRVIoU1RSRUFNLCBMQUJFTE5PKSBkbyB7IH0gd2hpbGUg
KDApCi0tIAoyLjMxLjEKCl9fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fCk9wZW5SSVNDIG1haWxpbmcgbGlzdApPcGVuUklTQ0BsaXN0cy5saWJyZWNvcmVzLm9y
ZwpodHRwczovL2xpc3RzLmxpYnJlY29yZXMub3JnL2xpc3RpbmZvL29wZW5yaXNjCg==
