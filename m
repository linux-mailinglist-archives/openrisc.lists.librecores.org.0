Return-Path: <openrisc-bounces@lists.librecores.org>
X-Original-To: lists+openrisc@lfdr.de
Delivered-To: lists+openrisc@lfdr.de
Received: from mail.librecores.org (lists.librecores.org [88.198.125.70])
	by mail.lfdr.de (Postfix) with ESMTP id DD7D6376D0F
	for <lists+openrisc@lfdr.de>; Sat,  8 May 2021 00:57:13 +0200 (CEST)
Received: from [172.31.1.100] (localhost.localdomain [127.0.0.1])
	by mail.librecores.org (Postfix) with ESMTP id BF48521004;
	Sat,  8 May 2021 00:57:12 +0200 (CEST)
Received: from regular1.263xmail.com (regular1.263xmail.com [211.150.70.195])
 by mail.librecores.org (Postfix) with ESMTPS id DD64720F41
 for <openrisc@lists.librecores.org>; Fri,  7 May 2021 11:58:05 +0200 (CEST)
Received: from localhost (unknown [192.168.167.69])
 by regular1.263xmail.com (Postfix) with ESMTP id 537CE1CAC;
 Fri,  7 May 2021 17:58:03 +0800 (CST)
X-MAIL-GRAY: 0
X-MAIL-DELIVERY: 1
X-ADDR-CHECKED4: 1
X-ANTISPAM-LEVEL: 2
X-SKE-CHECKED: 1
X-ABS-CHECKED: 1
Received: from manjaro.uniontech.com (unknown [58.246.122.242])
 by smtp.263.net (postfix) whith ESMTP id
 P19990T140046839564032S1620381481946185_; 
 Fri, 07 May 2021 17:58:02 +0800 (CST)
X-IP-DOMAINF: 1
X-UNIQUE-TAG: <744b1e7359a2f5935d994bd3077b8646>
X-RL-SENDER: chenli@uniontech.com
X-SENDER: chenli@uniontech.com
X-LOGIN-NAME: chenli@uniontech.com
X-FST-TO: linux-arm-kernel@lists.infradead.org
X-RCPT-COUNT: 10
X-SENDER-IP: 58.246.122.242
X-ATTACHMENT-NUM: 0
X-System-Flag: 0
Date: Fri, 07 May 2021 17:58:02 +0800
Message-ID: <87k0oaq311.wl-chenli@uniontech.com>
From: Chen Li <chenli@uniontech.com>
To: linux-arm-kernel@lists.infradead.org, Russell King <linux@armlinux.org.uk>,
 linux-kernel@vger.kernel.org, linux-ia64@vger.kernel.org,
 Geert Uytterhoeven <geert@linux-m68k.org>, linux-m68k@lists.linux-m68k.org,
 Jonas Bonn <jonas@southpole.se>, openrisc@lists.librecores.org,
 Chris Zankel <chris@zankel.net>, linux-xtensa@linux-xtensa.org
User-Agent: Wanderlust/2.15.9 (Almost Unreal) SEMI-EPG/1.14.7 (Harue)
 FLIM-LB/1.14.9 (=?ISO-8859-4?Q?Goj=F2?=) APEL-LB/10.8 EasyPG/1.0.0
 Emacs/28.0.50 (x86_64-pc-linux-gnu) MULE/6.0 (HANACHIRUSATO)
MIME-Version: 1.0 (generated by SEMI-EPG 1.14.7 - "Harue")
X-Mailman-Approved-At: Sat, 08 May 2021 00:57:11 +0200
Subject: [OpenRISC] [PATCH] mm: update legacy flush_tlb_* to use vma
X-BeenThere: openrisc@lists.librecores.org
X-Mailman-Version: 2.1.26
Precedence: list
List-Id: Discussion around the OpenRISC processor
 <openrisc.lists.librecores.org>
List-Unsubscribe: <https://lists.librecores.org/options/openrisc>,
 <mailto:openrisc-request@lists.librecores.org?subject=unsubscribe>
List-Archive: <http://lists.librecores.org/pipermail/openrisc/>
List-Post: <mailto:openrisc@lists.librecores.org>
List-Help: <mailto:openrisc-request@lists.librecores.org?subject=help>
List-Subscribe: <https://lists.librecores.org/listinfo/openrisc>,
 <mailto:openrisc-request@lists.librecores.org?subject=subscribe>
Content-Type: text/plain; charset="utf-8"
Content-Transfer-Encoding: base64
Errors-To: openrisc-bounces@lists.librecores.org
Sender: "OpenRISC" <openrisc-bounces@lists.librecores.org>

CjEuIFRoZXNlIHRsYiBmbHVzaCBmdW5jdGlvbnMgIGhhdmUgYmVlbiB1c2luZyB2bWEgaW5zdGVh
ZCBtbSBsb25nIHRpbWUgYWdvLCBidXQgdGhlcmUKaXMgc3RpbGwgc29tZSBjb21lbnRzIHVzZSBt
bSBhcyBwYXJhbWV0ZXIuCgoyLiB0aGUgYWN0dWFsIHN0cnVjdCB3ZSB1c2UgaXMgdm1fYXJlYV9z
dHJ1Y3QgaW5zdGVhZCBvZiB2bWFfc3RydWN0LgoKMy4gcmVtb3ZlIHVudXNlZCBmbHVzaF9rZXJu
X3RsYl9wYWdlLgoKU2lnbmVkLW9mZi1ieTogQ2hlbiBMaSA8Y2hlbmxpQHVuaW9udGVjaC5jb20+
Ci0tLQogYXJjaC9hcm0vaW5jbHVkZS9hc20vdGxiZmx1c2guaCAgICAgIHwgMTMgKysrLS0tLS0t
LS0tLQogYXJjaC9hcm0vbW0vdGxiLXY2LlMgICAgICAgICAgICAgICAgIHwgIDIgKy0KIGFyY2gv
YXJtL21tL3RsYi12Ny5TICAgICAgICAgICAgICAgICB8ICAyICstCiBhcmNoL2lhNjQva2VybmVs
L2VmaV9zdHViLlMgICAgICAgICAgfCAgMiArLQogYXJjaC9tNjhrL2luY2x1ZGUvYXNtL3RsYmZs
dXNoLmggICAgIHwgIDIgKy0KIGFyY2gvb3BlbnJpc2MvaW5jbHVkZS9hc20vdGxiZmx1c2guaCB8
ICAyICstCiBhcmNoL3h0ZW5zYS9pbmNsdWRlL2FzbS90bGJmbHVzaC5oICAgfCAgNCArKy0tCiA3
IGZpbGVzIGNoYW5nZWQsIDEwIGluc2VydGlvbnMoKyksIDE3IGRlbGV0aW9ucygtKQoKZGlmZiAt
LWdpdCBhL2FyY2gvYXJtL2luY2x1ZGUvYXNtL3RsYmZsdXNoLmggYi9hcmNoL2FybS9pbmNsdWRl
L2FzbS90bGJmbHVzaC5oCmluZGV4IDI0Y2JmYzExMmRmYS4uMGNjYzk4NWI5MGFmIDEwMDY0NAot
LS0gYS9hcmNoL2FybS9pbmNsdWRlL2FzbS90bGJmbHVzaC5oCisrKyBiL2FyY2gvYXJtL2luY2x1
ZGUvYXNtL3RsYmZsdXNoLmgKQEAgLTI1Myw3ICsyNTMsNyBAQCBleHRlcm4gc3RydWN0IGNwdV90
bGJfZm5zIGNwdV90bGI7CiAgKgkJc3BhY2UuCiAgKgkJLSBtbQktIG1tX3N0cnVjdCBkZXNjcmli
aW5nIGFkZHJlc3Mgc3BhY2UKICAqCi0gKglmbHVzaF90bGJfcmFuZ2UobW0sc3RhcnQsZW5kKQor
ICoJZmx1c2hfdGxiX3JhbmdlKHZtYSxzdGFydCxlbmQpCiAgKgogICoJCUludmFsaWRhdGUgYSBy
YW5nZSBvZiBUTEIgZW50cmllcyBpbiB0aGUgc3BlY2lmaWVkCiAgKgkJYWRkcmVzcyBzcGFjZS4K
QEAgLTI2MSwxOCArMjYxLDExIEBAIGV4dGVybiBzdHJ1Y3QgY3B1X3RsYl9mbnMgY3B1X3RsYjsK
ICAqCQktIHN0YXJ0IC0gc3RhcnQgYWRkcmVzcyAobWF5IG5vdCBiZSBhbGlnbmVkKQogICoJCS0g
ZW5kCS0gZW5kIGFkZHJlc3MgKGV4Y2x1c2l2ZSwgbWF5IG5vdCBiZSBhbGlnbmVkKQogICoKLSAq
CWZsdXNoX3RsYl9wYWdlKHZhZGRyLHZtYSkKKyAqCWZsdXNoX3RsYl9wYWdlKHZtYSwgdWFkZHIp
CiAgKgogICoJCUludmFsaWRhdGUgdGhlIHNwZWNpZmllZCBwYWdlIGluIHRoZSBzcGVjaWZpZWQg
YWRkcmVzcyByYW5nZS4KKyAqCQktIHZtYQktIHZtX2FyZWFfc3RydWN0IGRlc2NyaWJpbmcgYWRk
cmVzcyByYW5nZQogICoJCS0gdmFkZHIgLSB2aXJ0dWFsIGFkZHJlc3MgKG1heSBub3QgYmUgYWxp
Z25lZCkKLSAqCQktIHZtYQktIHZtYV9zdHJ1Y3QgZGVzY3JpYmluZyBhZGRyZXNzIHJhbmdlCi0g
KgotICoJZmx1c2hfa2Vybl90bGJfcGFnZShrYWRkcikKLSAqCi0gKgkJSW52YWxpZGF0ZSB0aGUg
VExCIGVudHJ5IGZvciB0aGUgc3BlY2lmaWVkIHBhZ2UuICBUaGUgYWRkcmVzcwotICoJCXdpbGwg
YmUgaW4gdGhlIGtlcm5lbHMgdmlydHVhbCBtZW1vcnkgc3BhY2UuICBDdXJyZW50IHVzZXMKLSAq
CQlvbmx5IHJlcXVpcmUgdGhlIEQtVExCIHRvIGJlIGludmFsaWRhdGVkLgotICoJCS0ga2FkZHIg
LSBLZXJuZWwgdmlydHVhbCBtZW1vcnkgYWRkcmVzcwogICovCiAKIC8qCmRpZmYgLS1naXQgYS9h
cmNoL2FybS9tbS90bGItdjYuUyBiL2FyY2gvYXJtL21tL3RsYi12Ni5TCmluZGV4IDUzMzViOTY4
NzI5Ny4uNzRmNGIzODNhZmUzIDEwMDY0NAotLS0gYS9hcmNoL2FybS9tbS90bGItdjYuUworKysg
Yi9hcmNoL2FybS9tbS90bGItdjYuUwpAQCAtMjQsNyArMjQsNyBAQAogICoKICAqCS0gc3RhcnQg
LSBzdGFydCBhZGRyZXNzIChtYXkgbm90IGJlIGFsaWduZWQpCiAgKgktIGVuZCAgIC0gZW5kIGFk
ZHJlc3MgKGV4Y2x1c2l2ZSwgbWF5IG5vdCBiZSBhbGlnbmVkKQotICoJLSB2bWEgICAtIHZtYV9z
dHJ1Y3QgZGVzY3JpYmluZyBhZGRyZXNzIHJhbmdlCisgKgktIHZtYSAgIC0gdm1fYXJlYV9zdHJ1
Y3QgZGVzY3JpYmluZyBhZGRyZXNzIHJhbmdlCiAgKgogICoJSXQgaXMgYXNzdW1lZCB0aGF0Ogog
ICoJLSB0aGUgIkludmFsaWRhdGUgc2luZ2xlIGVudHJ5IiBpbnN0cnVjdGlvbiB3aWxsIGludmFs
aWRhdGUKZGlmZiAtLWdpdCBhL2FyY2gvYXJtL21tL3RsYi12Ny5TIGIvYXJjaC9hcm0vbW0vdGxi
LXY3LlMKaW5kZXggMWJiMjhkN2RiNTY3Li44N2JmNGFiMTc3MjEgMTAwNjQ0Ci0tLSBhL2FyY2gv
YXJtL21tL3RsYi12Ny5TCisrKyBiL2FyY2gvYXJtL21tL3RsYi12Ny5TCkBAIC0yMyw3ICsyMyw3
IEBACiAgKgogICoJLSBzdGFydCAtIHN0YXJ0IGFkZHJlc3MgKG1heSBub3QgYmUgYWxpZ25lZCkK
ICAqCS0gZW5kICAgLSBlbmQgYWRkcmVzcyAoZXhjbHVzaXZlLCBtYXkgbm90IGJlIGFsaWduZWQp
Ci0gKgktIHZtYSAgIC0gdm1hX3N0cnVjdCBkZXNjcmliaW5nIGFkZHJlc3MgcmFuZ2UKKyAqCS0g
dm1hICAgLSB2bV9hcmVhX3N0cnVjdCBkZXNjcmliaW5nIGFkZHJlc3MgcmFuZ2UKICAqCiAgKglJ
dCBpcyBhc3N1bWVkIHRoYXQ6CiAgKgktIHRoZSAiSW52YWxpZGF0ZSBzaW5nbGUgZW50cnkiIGlu
c3RydWN0aW9uIHdpbGwgaW52YWxpZGF0ZQpkaWZmIC0tZ2l0IGEvYXJjaC9pYTY0L2tlcm5lbC9l
Zmlfc3R1Yi5TIGIvYXJjaC9pYTY0L2tlcm5lbC9lZmlfc3R1Yi5TCmluZGV4IDU4MjMzYmI3OTc2
ZC4uMWZkNjFiNzhmYjI5IDEwMDY0NAotLS0gYS9hcmNoL2lhNjQva2VybmVsL2VmaV9zdHViLlMK
KysrIGIvYXJjaC9pYTY0L2tlcm5lbC9lZmlfc3R1Yi5TCkBAIC03LDcgKzcsNyBAQAogICoKICAq
IFRoaXMgc3R1YiBhbGxvd3MgdXMgdG8gbWFrZSBFRkkgY2FsbHMgaW4gcGh5c2ljYWwgbW9kZSB3
aXRoIGludGVycnVwdHMKICAqIHR1cm5lZCBvZmYuICBXZSBuZWVkIHRoaXMgYmVjYXVzZSB3ZSBj
YW4ndCBjYWxsIFNldFZpcnR1YWxNYXAoKSB1bnRpbAotICogdGhlIGtlcm5lbCBoYXMgYm9vdGVk
IGZhciBlbm91Z2ggdG8gYWxsb3cgYWxsb2NhdGlvbiBvZiBzdHJ1Y3Qgdm1hX3N0cnVjdAorICog
dGhlIGtlcm5lbCBoYXMgYm9vdGVkIGZhciBlbm91Z2ggdG8gYWxsb3cgYWxsb2NhdGlvbiBvZiBz
dHJ1Y3Qgdm1fYXJlYV9zdHJ1Y3QKICAqIGVudHJpZXMgKHdoaWNoIHdlIHdvdWxkIG5lZWQgdG8g
bWFwIHN0dWZmIHdpdGggbWVtb3J5IGF0dHJpYnV0ZXMgb3RoZXIKICAqIHRoYW4gdW5jYWNoZWQg
b3Igd3JpdGViYWNrLi4uKS4gIFNpbmNlIHRoZSBHZXRUaW1lKCkgc2VydmljZSBnZXRzIGNhbGxl
ZAogICogZWFybGllciB0aGFuIHRoYXQsIHdlIG5lZWQgdG8gYmUgYWJsZSB0byBtYWtlIHBoeXNp
Y2FsIG1vZGUgRUZJIGNhbGxzIGZyb20KZGlmZiAtLWdpdCBhL2FyY2gvbTY4ay9pbmNsdWRlL2Fz
bS90bGJmbHVzaC5oIGIvYXJjaC9tNjhrL2luY2x1ZGUvYXNtL3RsYmZsdXNoLmgKaW5kZXggNTMz
N2JjMmMyNjJmLi5hNjMxOGNjZDMwOGYgMTAwNjQ0Ci0tLSBhL2FyY2gvbTY4ay9pbmNsdWRlL2Fz
bS90bGJmbHVzaC5oCisrKyBiL2FyY2gvbTY4ay9pbmNsdWRlL2FzbS90bGJmbHVzaC5oCkBAIC0y
NjMsNyArMjYzLDcgQEAgc3RhdGljIGlubGluZSB2b2lkIGZsdXNoX3RsYl9wYWdlKHN0cnVjdCB2
bV9hcmVhX3N0cnVjdCAqdm1hLCB1bnNpZ25lZCBsb25nIGFkZHIKIAlCVUcoKTsKIH0KIAotc3Rh
dGljIGlubGluZSB2b2lkIGZsdXNoX3RsYl9yYW5nZShzdHJ1Y3QgbW1fc3RydWN0ICptbSwKK3N0
YXRpYyBpbmxpbmUgdm9pZCBmbHVzaF90bGJfcmFuZ2Uoc3RydWN0IHZtX2FyZWFfc3RydWN0ICp2
bWEsCiAJCQkJICAgdW5zaWduZWQgbG9uZyBzdGFydCwgdW5zaWduZWQgbG9uZyBlbmQpCiB7CiAJ
QlVHKCk7CmRpZmYgLS1naXQgYS9hcmNoL29wZW5yaXNjL2luY2x1ZGUvYXNtL3RsYmZsdXNoLmgg
Yi9hcmNoL29wZW5yaXNjL2luY2x1ZGUvYXNtL3RsYmZsdXNoLmgKaW5kZXggMTg1ZGNkMzczMWVk
Li5kYmYwMzAzNjVhYjQgMTAwNjQ0Ci0tLSBhL2FyY2gvb3BlbnJpc2MvaW5jbHVkZS9hc20vdGxi
Zmx1c2guaAorKysgYi9hcmNoL29wZW5yaXNjL2luY2x1ZGUvYXNtL3RsYmZsdXNoLmgKQEAgLTI1
LDcgKzI1LDcgQEAKICAqICAtIGZsdXNoX3RsYl9hbGwoKSBmbHVzaGVzIGFsbCBwcm9jZXNzZXMg
VExCcwogICogIC0gZmx1c2hfdGxiX21tKG1tKSBmbHVzaGVzIHRoZSBzcGVjaWZpZWQgbW0gY29u
dGV4dCBUTEIncwogICogIC0gZmx1c2hfdGxiX3BhZ2Uodm1hLCB2bWFkZHIpIGZsdXNoZXMgb25l
IHBhZ2UKLSAqICAtIGZsdXNoX3RsYl9yYW5nZShtbSwgc3RhcnQsIGVuZCkgZmx1c2hlcyBhIHJh
bmdlIG9mIHBhZ2VzCisgKiAgLSBmbHVzaF90bGJfcmFuZ2Uodm1hLCBzdGFydCwgZW5kKSBmbHVz
aGVzIGEgcmFuZ2Ugb2YgcGFnZXMKICAqLwogZXh0ZXJuIHZvaWQgbG9jYWxfZmx1c2hfdGxiX2Fs
bCh2b2lkKTsKIGV4dGVybiB2b2lkIGxvY2FsX2ZsdXNoX3RsYl9tbShzdHJ1Y3QgbW1fc3RydWN0
ICptbSk7CmRpZmYgLS1naXQgYS9hcmNoL3h0ZW5zYS9pbmNsdWRlL2FzbS90bGJmbHVzaC5oIGIv
YXJjaC94dGVuc2EvaW5jbHVkZS9hc20vdGxiZmx1c2guaAppbmRleCA4NTZlMmRhMmUzOTcuLjU3
M2RmOGNlYTIwMCAxMDA2NDQKLS0tIGEvYXJjaC94dGVuc2EvaW5jbHVkZS9hc20vdGxiZmx1c2gu
aAorKysgYi9hcmNoL3h0ZW5zYS9pbmNsdWRlL2FzbS90bGJmbHVzaC5oCkBAIC0yNiw4ICsyNiw4
IEBACiAgKgogICogIC0gZmx1c2hfdGxiX2FsbCgpIGZsdXNoZXMgYWxsIHByb2Nlc3NlcyBUTEIg
ZW50cmllcwogICogIC0gZmx1c2hfdGxiX21tKG1tKSBmbHVzaGVzIHRoZSBzcGVjaWZpZWQgbW0g
Y29udGV4dCBUTEIgZW50cmllcwotICogIC0gZmx1c2hfdGxiX3BhZ2UobW0sIHZtYWRkcikgZmx1
c2hlcyBhIHNpbmdsZSBwYWdlCi0gKiAgLSBmbHVzaF90bGJfcmFuZ2UobW0sIHN0YXJ0LCBlbmQp
IGZsdXNoZXMgYSByYW5nZSBvZiBwYWdlcworICogIC0gZmx1c2hfdGxiX3BhZ2Uodm1hLCBwYWdl
KSBmbHVzaGVzIGEgc2luZ2xlIHBhZ2UKKyAqICAtIGZsdXNoX3RsYl9yYW5nZSh2bWEsIHZtYWRk
ciwgZW5kKSBmbHVzaGVzIGEgcmFuZ2Ugb2YgcGFnZXMKICAqLwogCiB2b2lkIGxvY2FsX2ZsdXNo
X3RsYl9hbGwodm9pZCk7Ci0tIAoyLjMxLjEKCgoKX19fX19fX19fX19fX19fX19fX19fX19fX19f
X19fX19fX19fX19fX19fX19fX18KT3BlblJJU0MgbWFpbGluZyBsaXN0Ck9wZW5SSVNDQGxpc3Rz
LmxpYnJlY29yZXMub3JnCmh0dHBzOi8vbGlzdHMubGlicmVjb3Jlcy5vcmcvbGlzdGluZm8vb3Bl
bnJpc2MK
